(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7c96"],{"81by":function(t,e,n){},C58x:function(t,e,n){"use strict";n.d(e,"k",function(){return a}),n.d(e,"d",function(){return r}),n.d(e,"t",function(){return s}),n.d(e,"q",function(){return o}),n.d(e,"j",function(){return c}),n.d(e,"c",function(){return u}),n.d(e,"f",function(){return l}),n.d(e,"b",function(){return d}),n.d(e,"m",function(){return h}),n.d(e,"e",function(){return m}),n.d(e,"x",function(){return p}),n.d(e,"a",function(){return f}),n.d(e,"h",function(){return v}),n.d(e,"i",function(){return b}),n.d(e,"l",function(){return g}),n.d(e,"v",function(){return y}),n.d(e,"n",function(){return w}),n.d(e,"w",function(){return _}),n.d(e,"u",function(){return j}),n.d(e,"r",function(){return x}),n.d(e,"o",function(){return O}),n.d(e,"p",function(){return k}),n.d(e,"g",function(){return N}),n.d(e,"s",function(){return S});var i=n("t3Un");function a(t){return Object(i.a)({url:"/api/v1/theory/admin/evts/",method:"get",params:t})}function r(t){return Object(i.a)({url:"/api/v1/theory/admin/evts/",method:"delete",data:t})}function s(t){return Object(i.a)({url:"/api/v1/theory/admin/evts/",method:"patch",data:t})}function o(){return Object(i.a)({url:"/api/v1/theory/admin/evts/teachers/",method:"get"})}function c(t){return Object(i.a)({url:"/api/v1/theory/admin/evts/"+t+"/",method:"get"})}function u(t,e){return Object(i.a)({url:"/api/v1/theory/admin/evts/"+t+"/",method:"delete",data:e})}function l(t,e){return Object(i.a)({url:"/api/v1/theory/admin/evts/"+t+"/",method:"patch",data:e})}function d(t){return Object(i.a)({url:"/api/v1/theory/admin/evts/",method:"post",data:t})}function h(t,e){return Object(i.a)({url:"/api/v1/theory/admin/evts/"+t+"/tasks/",method:"get",params:e})}function m(t,e){return Object(i.a)({url:"/api/v1/theory/admin/evts/"+t+"/tasks/",method:"delete",data:e})}function p(t,e){return Object(i.a)({url:"/api/v1/theory/admin/evts/"+t+"/tasks/preview/",method:"get"})}function f(t){return Object(i.a)({url:"/api/v1/theory/admin/evts/"+t+"/tasks/import/status/",method:"get"})}function v(t,e){return Object(i.a)({url:"/api/v1/theory/admin/evts/"+t+"/tasks/import/",method:"get",params:e})}function b(t){return Object(i.a)({url:"/api/v1/theory/admin/evts/"+t+"/tasks/imported/",method:"get"})}function g(t,e,n){return Object(i.a)({url:"/api/v1/theory/admin/evts/"+t+"/tasks/import/preview/",method:"post",params:e,data:n})}function y(t,e){return Object(i.a)({url:"/api/v1/theory/admin/evts/"+t+"/tasks/import/",method:"post",data:e})}function w(t,e){return Object(i.a)({url:"/api/v1/theory/admin/evts/"+t+"/users/",method:"get"})}function _(t,e){return Object(i.a)({url:"/api/v1/theory/admin/evts/"+t+"/users/",method:"patch",data:e})}function j(t,e){return Object(i.a)({url:"/api/v1/theory/admin/evts/"+t+"/scores/",method:"get",params:e})}function x(t,e,n){return Object(i.a)({url:"/api/v1/theory/admin/evts/"+t+"/scores/users/"+e+"/check/",method:"get"})}function O(t){return Object(i.a)({url:"/api/v1/theory/admin/evts/"+t+"/scores/users/submission/",method:"post"})}function k(t){return Object(i.a)({url:"/api/v1/theory/admin/evts/"+t+"/scores/users/generation/",method:"post"})}function N(t,e){return Object(i.a)({url:"/api/v1/theory/admin/evts/"+t+"/scores/users/export/pdf/",method:"get",params:e})}function S(t){return Object(i.a)({url:"/api/v1/theory/admin/evts/"+t+"/scores/users/pdf/download/",method:"get"})}},RDdS:function(t,e,n){"use strict";var i=n("81by");n.n(i).a},XS0u:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n("omC7"),a=n.n(i),r=n("Q2cO"),s=n.n(r),o=function(t,e){"object"===(void 0===e?"undefined":s()(e))?localStorage[t]=a()(e):""===e?localStorage.removeItem(t):localStorage[t]=e}},Y5bG:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),Math.easeInOutQuad=function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e};var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};function a(t,e,n){var a=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,r=t-a,s=0;e=void 0===e?500:e;!function t(){s+=20,function(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}(Math.easeInOutQuad(s,a,r,e)),s<e?i(t):n&&"function"==typeof n&&n()}()}},ZySA:function(t,e,n){"use strict";var i=n("6ZY3"),a=n.n(i),r=(n("jUE0"),{bind:function(t,e){t.addEventListener("click",function(n){var i=a()({},e.value),r=a()({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},i),s=r.ele;if(s){s.style.position="relative",s.style.overflow="hidden";var o=s.getBoundingClientRect(),c=s.querySelector(".waves-ripple");switch(c?c.className="waves-ripple":((c=document.createElement("span")).className="waves-ripple",c.style.height=c.style.width=Math.max(o.width,o.height)+"px",s.appendChild(c)),r.type){case"center":c.style.top=o.height/2-c.offsetHeight/2+"px",c.style.left=o.width/2-c.offsetWidth/2+"px";break;default:c.style.top=(n.pageY-o.top-c.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",c.style.left=(n.pageX-o.left-c.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return c.style.backgroundColor=r.color,c.className="waves-ripple z-active",!1}},!1)}}),s=function(t){t.directive("waves",r)};window.Vue&&(window.waves=r,Vue.use(s)),r.install=s;e.a=r},aFNf:function(t,e,n){var i=n("c01Q"),a=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return a.stringify.apply(a,arguments)}},i6Of:function(t,e,n){"use strict";n.r(e);var i=n("C58x"),a=n("twWv"),r=n("ZySA"),s=n("Mz3J"),o=(n("XS0u"),{name:"IndexVue",components:{Pagination:s.a},directives:{waves:r.a},data:function(){return{hash:this.$route.query.hash,tableKey:0,total:0,listLoading:!1,page:1,userGroup:{},listQuery:{search:"",limit:this.$store.state.config.row,offset:0},matchList:[],ids:[],timer:null,num:0,loadingId:null,exportTime:0}},created:function(){var t=this;this.getList(),this.getUserGroup(),this.$route.query.hash&&Object(i.j)(this.$route.query.hash).then(function(e){t.$store.dispatch("changeMatchName",e.data.name_zh)})},beforeDestroy:function(){this.$store.dispatch("changeMatchName","")},methods:{canExport:function(){var t=this;Object(i.g)(this.hash,{time:!0}).then(function(e){e.data.success&&(t.exportTime=e.data.time_num,e.data.path?window.location.href=e.data.path:t.exportAll())})},exportAll:function(){var t=this;this.$confirm("文档导出过程需要"+this.exportTime+"~"+(this.exportTime+2)+"分钟，请您耐心等待。","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.loadingId=a.Loading.service({lock:!0,text:"保存中",background:"rgba(0, 0, 0, 0.7)"}),Object(i.g)(t.hash).then(function(e){e.data.success?t.timer=setInterval(function(){t.pollingDownPdf()},1e3):t.loadingId.close()})}).catch(function(){t.$message({type:"info",message:"已取消"})})},pollingDownPdf:function(){var t=this;Object(i.s)(this.hash).then(function(e){e.data.success&&e.data.path?(t.loadingId.close(),clearInterval(t.timer),window.location.href=e.data.path):e.data.success||(t.loadingId.close(),clearInterval(t.timer)),t.num++})},generation:function(){var t=this;this.$confirm("确认分发试卷？").then(function(e){Object(i.p)(t.hash).then(function(e){e.data.success&&(t.$message.success("分发试卷成功"),t.getList())})}).catch(function(t){})},forceSubmit:function(){var t=this;this.$confirm("确认强制交卷？").then(function(e){Object(i.o)(t.hash).then(function(e){e.data.success&&(t.getList(),t.$message.success("强制交卷成功"))})}).catch(function(t){})},inspect:function(t){this.$router.push({path:"/competition/theory/inspect",query:{hash:this.hash,id:t.obj_id}})},getUserGroup:function(){var t=this;Object(i.n)(this.hash).then(function(e){t.userGroup=e.data.data})},indexMethod:function(t){return(this.page-1)*this.listQuery.limit+t+1},getList:function(){var t=this;this.listQuery.offset=this.page,Object(i.u)(this.hash,this.listQuery).then(function(e){t.matchList=e.data.rows,t.total=e.data.total})},checkTable:function(t){this.ids=t.map(function(t){return t.id})}}}),c=(n("RDdS"),n("ZrdR")),u=Object(c.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"competition_box"},[t._m(0),t._v(" "),n("div",{staticClass:"filter-container"},[n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"mini",type:"warning"},on:{click:t.generation}},[t._v("批量发卷\n    ")]),t._v(" "),n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"mini",type:"danger"},on:{click:t.forceSubmit}},[t._v("核查积分\n    ")]),t._v(" "),n("div",{staticStyle:{display:"inline-block",width:"4px",height:"28px","background-color":"#bdbdbd","vertical-align":"top",margin:"0 20px"}}),t._v(" "),n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请输入账号"},model:{value:t.listQuery.search,callback:function(e){t.$set(t.listQuery,"search","string"==typeof e?e.trim():e)},expression:"listQuery.search"}}),t._v(" "),n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"mini",type:"primary"},on:{click:t.getList}},[t._v("搜索\n    ")]),t._v(" "),n("div",{staticStyle:{float:"right"}},[n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",size:"mini"},on:{click:t.canExport}},[t._v("批量导出试卷")]),t._v("\n\n       \n\n      "),n("a",{attrs:{href:"/api/v1/theory/admin/evts/"+t.hash+"/scores/users/export/",download:""}},[n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",size:"mini"}},[t._v("批量导出成绩")])],1)],1)],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.matchList,border:"",fit:"","highlight-current-row":"","tooltip-effect":"dark"},on:{"selection-change":t.checkTable}},[n("el-table-column",{attrs:{index:t.indexMethod,align:"center",type:"index",width:"50",label:"序号"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"obj_uname",label:"账号"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"obj_name",label:"昵称"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"sum_score",label:"分数"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"max_time",label:"交卷时间"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"end_time",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(1==e.row.status?"已提交":"未提交"))])]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"150",align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.is_sponsor?t._e():n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"mini",type:"success"},on:{click:function(n){t.inspect(e.row)}}},[t._v("检查\n        ")]),t._v(" "),e.row.status?n("a",{attrs:{href:"/api/v1/theory/admin/evts/"+t.hash+"/scores/users/"+e.row.obj_id+"/export/",download:""}},[n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"mini",type:"warning"}},[t._v("导出\n          ")])],1):t._e()]}}])})],1),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{total:t.total,page:t.page,limit:t.listQuery.limit},on:{"update:page":function(e){t.page=e},"update:limit":function(e){t.$set(t.listQuery,"limit",e)},pagination:t.getList}})],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"manageTip"},[e("div",{staticClass:"title"},[this._v("管理提示:")]),this._v(" "),e("div",[e("p",[this._v("\n        1.竞赛平台提供手动批量发卷功能。\n      ")]),this._v(" "),e("p",[this._v("\n        2.竞赛开始前请执行【批量发卷】，系统将依据试卷最终确认的题目进行批量分发，检测和查验操作。试卷题目、参赛人员的变动请务必重复此操作进行竞赛数据的更新。\n      ")]),this._v(" "),e("p",[this._v("\n        3.竞赛结束后请执行【核查积分】，系统将对已登录的全部用户成绩再次进行查验，核算总分。\n      ")])])])}],!1,null,"21e325b3",null);u.options.__file="index.vue";e.default=u.exports},jUE0:function(t,e,n){},omC7:function(t,e,n){t.exports={default:n("aFNf"),__esModule:!0}}}]);
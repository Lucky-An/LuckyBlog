(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-556a"],{"3xab":function(t,e,n){},Ibrk:function(t,e,n){"use strict";n.d(e,"e",function(){return i}),n.d(e,"g",function(){return s}),n.d(e,"i",function(){return r}),n.d(e,"f",function(){return c}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return l}),n.d(e,"d",function(){return u}),n.d(e,"c",function(){return d}),n.d(e,"h",function(){return g});var a=n("t3Un");function i(t){return Object(a.a)({url:"/api/v1/common/admin/challenge/tags/",method:"get",params:t})}function s(){return Object(a.a)({url:"/api/v1/common/admin/flavors",method:"get",params:{per_page:9999}})}function r(){return Object(a.a)({url:"/api/v1/common/admin/images",method:"get"})}function c(t){return Object(a.a)({url:"/api/v1/common/admin/challenge/categorys/",method:"get",params:t})}function o(t){return Object(a.a)({url:"/api/v1/common/admin/challenge/tags/",method:"post",data:t})}function l(t){return Object(a.a)({url:"/api/v1/common/admin/challenge/categorys/",method:"post",data:t})}function u(t){return Object(a.a)({url:"/api/v1/common/admin/challenge/categorys/",method:"delete",data:t})}function d(t){return Object(a.a)({url:"/api/v1/common/admin/challenge/tags/",method:"delete",data:t})}function g(t){return Object(a.a)({url:"/api/v1/common/admin/flavors",method:"get",params:t})}},UB4q:function(t,e,n){"use strict";n.r(e);var a=n("Mz3J"),i=n("ZySA"),s=n("gyXm"),r=n("VEZC"),c=n("Ibrk"),o={name:"TopicManagement",directives:{waves:i.a,clipboard:s.a},components:{Pagination:a.a},data:function(){return{matchList:[],ids:[],listTotal:0,listPage:1,listQuery:{offset:0,limit:this.$store.state.config.row,key:""},key:"",tagDlg:!1,tagDlgAry:[],tagtype:1,tagIds:[],digTitle:"",tagQuery:{cn_name:"",content:"",type:4}}},created:function(){this.getList()},methods:{checkTag:function(t){this.tagIds=t.map(function(t){return t.id})},closetagDlg:function(){this.tagQuery={cn_name:"",content:"",type:4}},showTagDlg:function(t){this.tagtype=t,1==t?(this.digTitle="题目类型管理",this.tagDlgAry=this.subType,this.getType()):(this.digTitle="题目标签管理",this.tagDlgAry=this.tagAry,this.getTag()),this.tagDlg=!0},removeTagType:function(t){var e=this,n={ids:[t],type:4};n.ids.length<=0||this.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){1==e.tagtype&&(n.type="rw",Object(c.d)(n).then(function(t){t.data.success&&(e.$message.success("删除成功"),e.getType())})),2==e.tagtype&&Object(c.c)(n).then(function(t){t.data.success&&(e.$message.success("删除成功"),e.getTag())})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},getType:function(){var t=this;Object(c.f)({type:4}).then(function(e){t.subType=e.data,t.tagDlgAry=e.data})},getTag:function(){var t=this;Object(c.e)().then(function(e){t.tagAry=e.data,t.tagDlgAry=e.data})},addTagType:function(){var t=this;this.tagQuery.cn_name.length>30?this.$message.error("名称长度应限制在30字以内"):""!==this.tagQuery.cn_name?(1==this.tagtype&&Object(c.b)(this.tagQuery).then(function(e){e.data.success&&(t.tagQuery={cn_name:"",content:"",type:4},t.$message.success("新增成功"),t.getType())}),2==this.tagtype&&Object(c.a)(this.tagQuery).then(function(e){e.data.success&&(t.tagQuery={cn_name:"",content:"",type:4},t.$message.success("新增成功"),t.getTag())})):this.$message.error("请输入名称")},removeSub:function(t){var e=this,n={};1===t.length?n.ids=t:n.ids=this.ids,n.ids.length<=0||this.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r.b)(n).then(function(t){t.data.success&&(e.$message.success("操作成功"),e.getList())})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},publicSub:function(t){var e=this,n={};n.ids=this.ids,n.public=t,Object(r.g)(n).then(function(t){t.data.success&&(e.$message.success("操作成功"),e.getList())})},addTopic:function(){this.$router.push({path:"/itemBank/rw/addRW",query:{type:this.$route.name}})},editTopic:function(t){this.$router.push({path:"/itemBank/rw/editRW",query:{task_id:t,type:this.$route.name}})},getList:function(t){var e=this;1==t&&(this.listQuery.key=this.key,this.listPage=1),this.listQuery.offset=this.listPage-1+1,Object(r.e)(this.listQuery).then(function(t){var n=t.data;e.matchList=n.rows,e.listTotal=n.total})},checkTable:function(t){this.ids=t.map(function(t){return t.id})},indexMethod:function(t){return(this.listPage-1)*this.listQuery.limit+t+1}}},l=(n("xK2H"),n("ZrdR")),u=Object(l.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"150px"},attrs:{placeholder:"请输入题目名称",size:"mini"},model:{value:t.key,callback:function(e){t.key="string"==typeof e?e.trim():e},expression:"key"}}),t._v(" "),n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",size:"mini"},on:{click:function(e){t.getList(1)}}},[t._v("搜索\n    ")])],1),t._v(" "),n("div",{staticClass:"filter-container"},[n("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.addTopic}},[t._v(" 新增")]),t._v(" "),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.removeSub}},[t._v(" 删除")])],1),t._v(" "),n("div",{staticClass:"filter-container"},[n("el-table",{attrs:{data:t.matchList,border:""},on:{"selection-change":t.checkTable}},[n("el-table-column",{attrs:{align:"center",type:"selection"}}),t._v(" "),n("el-table-column",{attrs:{index:t.indexMethod,align:"center",type:"index",width:"50",label:"序号"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"title",label:"题目名称"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"category_name",label:"题目类型"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"score",label:"题目分值"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"题目附件"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.file?n("a",{attrs:{href:e.row.file,download:""}},[n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"mini",type:"primary"}},[t._v("下载附件")])],1):n("span",[t._v("无")])]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:"success"},on:{click:function(n){t.editTopic(e.row.id)}}},[t._v("编辑\n          ")])]}}])})],1)],1),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.listTotal>0,expression:"listTotal > 0"}],attrs:{total:t.listTotal,page:t.listPage,limit:t.listQuery.limit},on:{"update:page":function(e){t.listPage=e},"update:limit":function(e){t.$set(t.listQuery,"limit",e)},pagination:t.getList}}),t._v(" "),n("el-dialog",{attrs:{title:t.digTitle,visible:t.tagDlg,width:"780px"},on:{"update:visible":function(e){t.tagDlg=e},close:t.closetagDlg}},[n("el-form",{ref:"form",attrs:{"label-width":"0px"}},[n("el-form-item",{attrs:{label:""}},[n("el-col",{attrs:{span:12}},[n("el-input",{attrs:{clearable:"",placeholder:"请输入名称"},model:{value:t.tagQuery.cn_name,callback:function(e){t.$set(t.tagQuery,"cn_name","string"==typeof e?e.trim():e)},expression:"tagQuery.cn_name"}})],1),t._v(" "),n("el-col",{staticStyle:{"margin-left":"30px"},attrs:{span:4}},[n("el-button",{attrs:{type:"success"},on:{click:t.addTagType}},[t._v("新增")])],1)],1)],1),t._v(" "),n("div",{staticStyle:{border:"1px solid rgb(240, 249, 235)"}},t._l(t.tagDlgAry,function(e){return n("el-tag",{key:e.id,staticClass:"mytag",staticStyle:{margin:"8px 20px",background:"#fff","border-color":"rgb(220, 220, 220)","border-radius":"43px"},attrs:{closable:"",size:"mini"},on:{close:function(n){t.removeTagType(e.id)}}},[n("el-tooltip",{staticClass:"item",attrs:{content:e.cn_name,effect:"dark",placement:"top-start"}},[n("div",{staticStyle:{display:"inline-block",width:"80px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","font-size":"14px"}},[t._v("\n            "+t._s(e.cn_name)+"\n          ")])])],1)}))],1)],1)},[],!1,null,"0fd98206",null);u.options.__file="index.vue";e.default=u.exports},VEZC:function(t,e,n){"use strict";n.d(e,"e",function(){return i}),n.d(e,"g",function(){return s}),n.d(e,"b",function(){return r}),n.d(e,"a",function(){return c}),n.d(e,"c",function(){return o}),n.d(e,"f",function(){return l}),n.d(e,"d",function(){return u});var a=n("t3Un");function i(t){return Object(a.a)({url:"/api/v1/rw/admin/tasks/",method:"get",params:t})}function s(t){return Object(a.a)({url:"/api/v1/rw/admin/tasks/batch_public/",method:"patch",data:t})}function r(t){return Object(a.a)({url:"/api/v1/rw/admin/tasks/batch_destroy/",method:"delete",data:t})}function c(t){return Object(a.a)({url:"/api/v1/rw/admin/tasks/",method:"post",data:t})}function o(t,e){return Object(a.a)({url:"/api/v1/rw/admin/tasks/"+t,method:"patch",data:e})}function l(t){return Object(a.a)({url:"/api/v1/rw/admin/tasks/"+t,method:"get"})}function u(t){return Object(a.a)({url:"/api/v1/rw/admin/tasks/nodes",method:"get"})}},xK2H:function(t,e,n){"use strict";var a=n("3xab");n.n(a).a}}]);
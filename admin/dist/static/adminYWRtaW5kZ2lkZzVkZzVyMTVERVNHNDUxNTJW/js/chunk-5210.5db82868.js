(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5210"],{"1W9+":function(t,e,n){"use strict";var a=n("7l3z");n.n(a).a},"4jvS":function(t,e,n){"use strict";var a=n("ZihO");n.n(a).a},"7l3z":function(t,e,n){},CquO:function(t,e,n){"use strict";n.d(e,"y",function(){return i}),n.d(e,"l",function(){return r}),n.d(e,"X",function(){return o}),n.d(e,"x",function(){return s}),n.d(e,"j",function(){return l}),n.d(e,"p",function(){return c}),n.d(e,"g",function(){return u}),n.d(e,"B",function(){return d}),n.d(e,"cb",function(){return p}),n.d(e,"J",function(){return m}),n.d(e,"I",function(){return f}),n.d(e,"U",function(){return h}),n.d(e,"V",function(){return v}),n.d(e,"ib",function(){return b}),n.d(e,"Q",function(){return _}),n.d(e,"R",function(){return g}),n.d(e,"f",function(){return y}),n.d(e,"w",function(){return j}),n.d(e,"eb",function(){return w}),n.d(e,"A",function(){return k}),n.d(e,"H",function(){return x}),n.d(e,"D",function(){return O}),n.d(e,"O",function(){return S}),n.d(e,"r",function(){return $}),n.d(e,"m",function(){return F}),n.d(e,"bb",function(){return T}),n.d(e,"h",function(){return L}),n.d(e,"o",function(){return z}),n.d(e,"E",function(){return q}),n.d(e,"k",function(){return C}),n.d(e,"Y",function(){return D}),n.d(e,"K",function(){return Q}),n.d(e,"z",function(){return E}),n.d(e,"C",function(){return I}),n.d(e,"c",function(){return N}),n.d(e,"d",function(){return M}),n.d(e,"hb",function(){return P}),n.d(e,"jb",function(){return B}),n.d(e,"Z",function(){return J}),n.d(e,"ab",function(){return U}),n.d(e,"fb",function(){return A}),n.d(e,"gb",function(){return G}),n.d(e,"u",function(){return H}),n.d(e,"G",function(){return R}),n.d(e,"b",function(){return Z}),n.d(e,"W",function(){return W}),n.d(e,"v",function(){return X}),n.d(e,"n",function(){return K}),n.d(e,"i",function(){return Y}),n.d(e,"L",function(){return V}),n.d(e,"e",function(){return tt}),n.d(e,"M",function(){return et}),n.d(e,"T",function(){return nt}),n.d(e,"F",function(){return at}),n.d(e,"db",function(){return it}),n.d(e,"N",function(){return rt}),n.d(e,"a",function(){return ot}),n.d(e,"P",function(){return st}),n.d(e,"q",function(){return lt}),n.d(e,"S",function(){return ct}),n.d(e,"t",function(){return ut}),n.d(e,"s",function(){return dt});var a=n("t3Un");function i(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/events",method:"get",params:t})}function r(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/events/batch_destroy",method:"delete",data:t})}function o(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/events/batch_public",method:"patch",data:t})}function s(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/events/"+t,method:"get"})}function l(t,e){return Object(a.a)({url:"/api/v1/jeopardy/admin/events/"+t,method:"delete",data:e})}function c(t,e){return Object(a.a)({url:"/api/v1/jeopardy/admin/events/"+t,method:"patch",data:e})}function u(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/events",method:"post",data:t})}function d(t,e){return Object(a.a)({url:"/api/v1/jeopardy/admin/events/"+t+"/users",method:"get"})}function p(t,e){return Object(a.a)({url:"/api/v1/jeopardy/admin/events/"+t+"/users",method:"post",data:e})}function m(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/event/tasks",method:"get",params:t})}function f(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/event/users",method:"get",params:t})}function h(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/event/state",method:"get",params:t})}function v(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/event_mode/"+t,method:"get"})}function b(t,e){return Object(a.a)({url:"/api/v1/jeopardy/admin/event/state",method:"patch",params:t,data:e})}function _(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/init_env/",method:"post",data:t})}function g(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/event/"+t+"/networks",method:"post"})}function y(t,e){return Object(a.a)({url:"/api/v1/jeopardy/admin/event/data/clear",method:"delete",params:t})}function j(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/import_tasks_details",method:"get",params:t})}function w(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/event_tasks/batch_create",method:"post",data:t})}function k(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/task_tags",method:"get"})}function x(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/task_categorys",method:"get"})}function O(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/event_tasks",method:"get",params:t})}function S(t,e){return Object(a.a)({url:"/api/v1/jeopardy/admin/event/"+t+"/tasks/scores",method:"post",data:e})}function $(t,e){return Object(a.a)({url:"/api/v1/jeopardy/admin/event/"+t+"/tasks/scores",method:"patch",data:e})}function F(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/event_tasks/batch_destroy",method:"delete",data:t})}
//! 解题赛 创建竞赛  编辑题目回显
function T(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/event_tasks/"+t,method:"get"})}function L(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/event_tasks",method:"post",data:t})}
//! 解题赛 创建竞赛  保存编辑题目
function z(t,e){return Object(a.a)({url:"/api/v1/jeopardy/admin/event_tasks/"+t,method:"patch",data:e})}function q(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/task_categorys",method:"get"})}function C(t,e){return Object(a.a)({url:"/api/v1/jeopardy/admin/event_tasks/"+t,method:"delete",data:{index:e}})}function D(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/event_tasks/batch_public",method:"patch",data:t})}function Q(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/event/instances",method:"get",params:t})}function E(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/event/notices",method:"get",params:t})}function I(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/event/task/notices",method:"get",params:t})}function N(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/event/notices",method:"post",data:t})}function M(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/event/task/notices",method:"post",data:t})}function P(t,e){return Object(a.a)({url:"/api/v1/jeopardy/admin/event/notices",method:"patch",params:t,data:e})}function B(t,e){return Object(a.a)({url:"/api/v1/jeopardy/admin/event/task/notices",method:"patch",params:t,data:e})}function J(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/event/notices",method:"delete",data:t})}function U(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/event/task/notices",method:"delete",data:t})}function A(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/event/notices/top",method:"patch",data:t})}function G(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/event/task/notices/top",method:"patch",data:t})}function H(t,e){return Object(a.a)({method:"get",url:"/api/v1/jeopardy/admin/event/"+t+"/networks",params:e})}function R(t){return Object(a.a)({method:"get",url:"/api/v1/jeopardy/admin/event/"+t+"/groups"})}function Z(t,e){return Object(a.a)({method:"post",url:"/api/v1/jeopardy/admin/event/"+t+"/networks",data:e})}function W(t){return Object(a.a)({method:"get",url:"/api/v1/jeopardy/admin/event/check_network/"+t})}function X(t,e,n){return Object(a.a)({method:"get",url:"/api/v1/jeopardy/admin/event/"+t+"/networks/"+e,data:n})}function K(t,e,n){return Object(a.a)({method:"patch",url:"/api/v1/jeopardy/admin/event/"+t+"/networks/"+e,data:n})}function Y(t,e){return Object(a.a)({method:"delete",url:"/api/v1/jeopardy/admin/event/"+t+"/networks",data:e})}function V(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/event/players",method:"get",params:t})}function tt(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/event/player/bans",method:"PATCH",data:t})}function et(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/event/player/score",method:"get",params:t})}function nt(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/event/player/score",method:"patch",data:t})}function at(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/event/player/reward",method:"get",params:t})}function it(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/event/player/reward",method:"post",data:t})}function rt(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/event/scores",method:"get",params:t})}function ot(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/event/score/player",method:"get",params:t})}function st(t){return Object(a.a)({url:"/api/v1/jeopardy/admin/event/view",method:"get",params:t})}function lt(t,e){return Object(a.a)({url:"/api/v1/jeopardy/admin/event/view",method:"patch",params:t,data:e})}function ct(t){return Object(a.a)({method:"patch",url:"/api/v1/jeopardy/admin/event/init_scene",params:t})}function ut(t){return Object(a.a)({method:"get",url:"/api/v1/jeopardy/admin/event/data/export",params:t,responseType:"blob"})}function dt(t){return Object(a.a)({method:"get",url:"/api/v1/jeopardy/admin/event/wps/export",params:t,responseType:"blob"})}},X1hN:function(t,e,n){"use strict";var a=n("eEyf");n.n(a).a},Y5bG:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),Math.easeInOutQuad=function(t,e,n,a){return(t/=a/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e};var a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};function i(t,e,n){var i=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,r=t-i,o=0;e=void 0===e?500:e;!function t(){o+=20,function(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}(Math.easeInOutQuad(o,i,r,e)),o<e?a(t):n&&"function"==typeof n&&n()}()}},ZihO:function(t,e,n){},ZtEl:function(t,e,n){},ZySA:function(t,e,n){"use strict";var a=n("6ZY3"),i=n.n(a),r=(n("jUE0"),{bind:function(t,e){t.addEventListener("click",function(n){var a=i()({},e.value),r=i()({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},a),o=r.ele;if(o){o.style.position="relative",o.style.overflow="hidden";var s=o.getBoundingClientRect(),l=o.querySelector(".waves-ripple");switch(l?l.className="waves-ripple":((l=document.createElement("span")).className="waves-ripple",l.style.height=l.style.width=Math.max(s.width,s.height)+"px",o.appendChild(l)),r.type){case"center":l.style.top=s.height/2-l.offsetHeight/2+"px",l.style.left=s.width/2-l.offsetWidth/2+"px";break;default:l.style.top=(n.pageY-s.top-l.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",l.style.left=(n.pageX-s.left-l.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return l.style.backgroundColor=r.color,l.className="waves-ripple z-active",!1}},!1)}}),o=function(t){t.directive("waves",r)};window.Vue&&(window.waves=r,Vue.use(o)),r.install=o;e.a=r},aFNf:function(t,e,n){var a=n("c01Q"),i=a.JSON||(a.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},bW74:function(t,e,n){},cGas:function(t,e,n){"use strict";var a=n("uXHB");n.n(a).a},caR4:function(t,e,n){"use strict";var a=n("ZtEl");n.n(a).a},eEyf:function(t,e,n){},jUE0:function(t,e,n){},omC7:function(t,e,n){t.exports={default:n("aFNf"),__esModule:!0}},qI6C:function(t,e,n){"use strict";n.r(e);var a=n("uTCP"),i=n("tBjE"),r=n("CquO"),o=n("Y5bG"),s={components:{QuillEditor:a.a,UploadFile:i.a},data:function(){return{fileList:[],step:!0,showEn:!1,startEndTime:[],ruleForm:{name_zh:"",start_time:"",end_time:"",cover:"",logo:"",description_zh:"",description_html_zh:"",event_mode:1,mode:1,integral_mode:1,reward_mode:0,task_access:1,competition_guide_zh:"",competition_guide_html_zh:"",name_en:"",description_en:"",description_html_en:"",competition_guide_en:"",competition_guide_html_en:""},rules:{name_zh:[{required:!0,message:"请输入竞赛名称",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字",trigger:"blur"}],description_zh:[{required:!0,message:"请输入竞赛简介",trigger:"blur"}]},id:this.$route.query.id,process:null,imgUrl:{logo:"",cover:""}}},created:function(){this.id&&(this.getInfo(),this.step=!1)},methods:{changeIntegral:function(t){1===t&&(this.ruleForm.reward_mode=0)},goBottom:function(){Object(o.a)(1e5,100)},nextStep:function(){this.$emit("nextStep",this.step)},getInfo:function(){var t=this;Object(r.x)(this.id).then(function(e){for(var n in t.ruleForm)t.ruleForm[n]=e.data[n];t.startEndTime=[e.data.start_time,e.data.end_time],t.process=e.data.process,setTimeout(function(){Object(o.a)(0,0)},50)})},deleteImg:function(t){var e=this;this.$confirm("此操作会删除服务器中的图片，确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r.j)(e.id,{img:t}).then(function(n){n.data.success&&(e.$message.success("删除成功"),e.ruleForm[t]="")})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},clearImg:function(t){this.imgUrl[t]="",this.$refs[t].value=""},handleImage:function(t){var e=this,n=this.$refs[t].files[0];if(n){var a=new FileReader;a.readAsDataURL(n),a.onload=function(n){e.imgUrl[t]=a.result}}else this.imgUrl[t]=""},onSubmit:function(){var t=this,e=new FormData;this.ruleForm.start_time=this.startEndTime[0],this.ruleForm.end_time=this.startEndTime[1];var n=new Date(this.$store.state.config.time),a=new Date(this.ruleForm.start_time),i=new Date(this.ruleForm.end_time);if(n.getTime()>a.getTime()&&0!==this.process)this.$message.error("开始时间不能早于当前时间");else if(n.getTime()>i.getTime())this.$message.error("结束时间不能早于当前时间");else if(this.ruleForm.start_time!==this.ruleForm.end_time){this.ruleForm.join_mode=this.ruleForm.mode;var o=this.ruleForm;for(var s in o)e.append(s,o[s]);this.id?Object(r.p)(this.id,e).then(function(e){e.data.success&&t.nextStep()}):Object(r.g)(e).then(function(e){e.data.success&&(sessionStorage.setItem("id",e.data.event_id),t.$router.push({path:"/competition/jeopardy/editMatch/editMatch",query:{id:e.data.event_id,hash:e.data.event_hash,step:1}}))})}else this.$message.error("开始时间和结束时间不能相同")},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return e.$message.error("输入信息有误"),!1;e.onSubmit()})}}},l=(n("qsMj"),n("ZrdR")),c=Object(l.a)(s,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container create_match"},[n("div",{staticClass:"goBottom"},[n("el-button",{attrs:{type:"warning"},on:{click:t.goBottom}},[t._v("直达底部")])],1),t._v(" "),n("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"150px"}},[n("el-form-item",{attrs:{label:"竞赛名称",prop:"name_zh"}},[n("el-input",{attrs:{placeholder:"请输入竞赛名称"},model:{value:t.ruleForm.name_zh,callback:function(e){t.$set(t.ruleForm,"name_zh","string"==typeof e?e.trim():e)},expression:"ruleForm.name_zh"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"起止时间",required:""}},[n("el-date-picker",{attrs:{clearable:!1,disabled:0==t.process,type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.startEndTime,callback:function(e){t.startEndTime=e},expression:"startEndTime"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"竞赛封面"}},[n("UploadFile",{attrs:{file:t.ruleForm.cover,"file-type":["jpg","png"],"list-type":"picture-card","file-size":2097152},on:{"update:file":function(e){t.$set(t.ruleForm,"cover",e)}}}),t._v("\n      （请上传PNG、JPG格式文件，大小不超过2M）\n    ")],1),t._v(" "),n("el-form-item",{attrs:{label:"竞赛 Logo"}},[n("UploadFile",{attrs:{file:t.ruleForm.logo,"file-type":["jpg","png"],"list-type":"picture-card","file-size":2097152},on:{"update:file":function(e){t.$set(t.ruleForm,"logo",e)}}}),t._v("\n      （请上传PNG、JPG格式文件，大小不超过2M）\n    ")],1),t._v(" "),n("el-form-item",{attrs:{label:"竞赛简介",prop:"description_zh"}},[n("el-input",{attrs:{rows:8,type:"textarea",placeholder:"请输入竞赛简介"},model:{value:t.ruleForm.description_zh,callback:function(e){t.$set(t.ruleForm,"description_zh",e)},expression:"ruleForm.description_zh"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"比赛形式",prop:"event_mode",required:""}},[n("el-select",{attrs:{disabled:0==t.process},model:{value:t.ruleForm.event_mode,callback:function(e){t.$set(t.ruleForm,"event_mode",e)},expression:"ruleForm.event_mode"}},[n("el-option",{attrs:{value:1,label:"线上赛 VPN 模式"}}),t._v(" "),n("el-option",{attrs:{value:3,label:"线上赛基本模式"}}),t._v(" "),n("el-option",{attrs:{value:2,label:"线下赛"}})],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"参赛方式",prop:"mode"}},[n("el-select",{attrs:{disabled:0==t.process},model:{value:t.ruleForm.mode,callback:function(e){t.$set(t.ruleForm,"mode",e)},expression:"ruleForm.mode"}},[n("el-option",{attrs:{value:1,label:"个人赛"}}),t._v(" "),n("el-option",{attrs:{value:2,label:"组队赛"}})],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"积分方式"}},[n("el-select",{attrs:{disabled:0==t.process},on:{change:t.changeIntegral},model:{value:t.ruleForm.integral_mode,callback:function(e){t.$set(t.ruleForm,"integral_mode",e)},expression:"ruleForm.integral_mode"}},[n("el-option",{attrs:{value:1,label:"累加积分"}}),t._v(" "),n("el-option",{attrs:{value:2,label:"动态积分"}})],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"奖励方式"}},[n("el-select",{attrs:{disabled:1===t.ruleForm.integral_mode||0==t.process},model:{value:t.ruleForm.reward_mode,callback:function(e){t.$set(t.ruleForm,"reward_mode",e)},expression:"ruleForm.reward_mode"}},[n("el-option",{attrs:{value:0,label:"无"}}),t._v(" "),n("el-option",{attrs:{value:1,label:"一二三血额外奖励"}})],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"指南内容",prop:"competition_guide_zh"}},[n("quill-editor",{attrs:{holder:"请输入指南内容"},model:{value:t.ruleForm.competition_guide_html_zh,callback:function(e){t.$set(t.ruleForm,"competition_guide_html_zh",e)},expression:"ruleForm.competition_guide_html_zh"}})],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showEn,expression:"showEn"}]},[n("p",{staticStyle:{"text-align":"center","font-size":"24px","font-weight":"bold"}},[t._v("下方为英文信息")]),t._v(" "),n("el-form-item",{attrs:{label:"竞赛名称英文",prop:"name_en"}},[n("el-input",{attrs:{placeholder:"请填写竞赛英文名称第一行"},model:{value:t.ruleForm.name_en,callback:function(e){t.$set(t.ruleForm,"name_en",e)},expression:"ruleForm.name_en"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"竞赛简介英文",prop:"description_en"}},[n("el-input",{attrs:{rows:8,type:"textarea",placeholder:"请输入竞赛简介英文"},model:{value:t.ruleForm.description_en,callback:function(e){t.$set(t.ruleForm,"description_en",e)},expression:"ruleForm.description_en"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"参赛指南英文",prop:"competition_guide_en"}},[n("quill-editor",{attrs:{holder:"请输入参赛指南英文"},model:{value:t.ruleForm.competition_guide_html_en,callback:function(e){t.$set(t.ruleForm,"competition_guide_html_en",e)},expression:"ruleForm.competition_guide_html_en"}})],1)],1),t._v(" "),n("el-form-item",[n("span",{staticStyle:{color:"red","font-size":"18px"}},[t._v("如果竞赛信息有所更改，一定要先点击保存，否则修改的信息会丢失。")])]),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"success"},on:{click:function(e){t.showEn=!t.showEn}}},[t._v(t._s(t.showEn?"关闭填写英文信息":"显示填写英文信息"))]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保存")]),t._v(" "),n("el-button",{attrs:{disabled:t.step,type:"primary"},on:{click:function(e){t.nextStep("ruleForm")}}},[t._v("下一步")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="index.vue";var u=c.exports,d={data:function(){return{data:[],value:[],id:this.$route.query.id}},created:function(){this.getTeamList()},methods:{getTeamList:function(){var t=this;Object(r.B)(this.id).then(function(e){t.data=e.data.teams,t.value=e.data.team_ids})},submitForm:function(){var t=this,e={ids:this.value};Object(r.cb)(this.id,e).then(function(e){e.data.success&&t.$message.success("操作成功")})},nextStep:function(){this.$emit("nextStep")},backStep:function(){this.$emit("backStep")}}},p=(n("caR4"),Object(l.a)(d,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"transfer_box"},[n("el-transfer",{attrs:{titles:["所有选手","参赛选手"],props:{key:"id",label:"name"},data:t.data,filterable:"","filter-placeholder":"请输入选手名称"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t._v(" "),n("span",{staticStyle:{color:"red","font-size":"18px","margin-top":"20px"}},[t._v("如果竞赛信息有所更改，一定要先点击保存，否则修改的信息会丢失。")]),t._v(" "),n("div",{staticClass:"btn_box"},[n("el-button",{attrs:{type:"primary"},on:{click:t.backStep}},[t._v("上一步")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保存")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.nextStep}},[t._v("下一步")])],1)],1)},[],!1,null,"2ca4adff",null));p.options.__file="index.vue";var m=p.exports,f=n("omC7"),h=n.n(f),v=n("Mz3J"),b=n("ZySA"),_={name:"TopicManagement",directives:{waves:b.a},components:{Pagination:v.a},data:function(){return{id:this.$route.query.id,newscore:"",subType:[],subTag:[],textarea:"",addDlg:!1,choseDown:!1,diaFlag:!1,fileList:[],flagList:[],downList:[],subData:[],matchList:[],ids:[],tableKey:0,listTotal:0,subTotal:0,listLoading:!1,listPage:1,subPage:1,topicQuery:{offset:0,limit:this.$store.state.config.row,tag:"",category:"",title:"",order:"asc",event:this.$route.query.id},importData:{event:this.$route.query.id,hashs:[]},listQuery:{offset:0,limit:this.$store.state.config.row,event:this.$route.query.id,search:"",status:"",order:"asc",type:""},showInput:-1,timer:{},num:{},loading:[],diaSetScore:!1,setScoreList:[],editData:{},integral_mode:""}},created:function(){this.getList(),this.getType(),this.matchInfo()},beforeDestroy:function(){for(var t in this.timer)clearInterval(this.timer[t])},methods:{getSetScoreList:function(){var t=this,e={};e.ids=this.ids,Object(r.O)(this.$route.query.id,e).then(function(e){if(e.data.success){t.diaSetScore=!0,t.setScoreList=e.data.data;var n={};e.data.data.forEach(function(t){n[t.id]=t.score}),t.editData=JSON.parse(h()(n))}})},setScore:function(){var t=this,e={data:this.editData};Object(r.r)(this.$route.query.id,e).then(function(e){e.data.success?(t.$message.success("操作成功"),t.diaSetScore=!1,t.getList()):t.$message.error(e.data.meesage_zh)})},nextStep:function(){this.$emit("nextStep")},backStep:function(){this.$emit("backStep")},closeLoading:function(t){this.loading=this.loading.filter(function(e){return e!=t})},showEditScore:function(t,e){this.newscore=t,this.showInput=e},sureImportJeopardy:function(){var t=this;Object(r.eb)(this.importData).then(function(e){e.data.success&&(t.addDlg=!1,t.getList())})},handleChange:function(t){this.importData.hashs=t.map(function(t){return t.hash})},matchInfo:function(){var t=this;Object(r.x)(this.topicQuery.event).then(function(e){t.integral_mode=e.data.integral_mode})},showtopic:function(){this.topicQuery.tag="",this.topicQuery.category="",this.topicQuery.title="",this.addDlg=!0,this.getTag(),this.getImportList()},getImportList:function(){var t=this;this.topicQuery.offset=this.subPage,Object(r.w)(this.topicQuery).then(function(e){t.subData=e.data.rows,t.subTotal=e.data.total})},removeSub:function(){var t=this,e={};e.ids=this.ids,e.event=this.id,this.ids.length<=0||this.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r.m)(e).then(function(e){e.data.success&&(t.$message.success("操作成功"),t.getList())})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},showflag:function(t){this.diaFlag=!0,this.flagList=t},closeDown:function(){this.fileList=[],this.downList=[]},showDownload:function(t){this.choseDown=!0,this.fileList=t},download:function(){this.downList.forEach(function(t){window.location.href=t}),this.choseDown=!1},addTopic:function(){this.$router.push({path:"/competition/addTopic",query:{id:this.$route.query.id}})},editTopic:function(t){this.$router.push({path:"/competition/jeopardy/editMatch/editTopic",query:{id:this.$route.query.id,hash:this.$route.query.hash,task_id:t}})},getType:function(){var t=this;Object(r.H)().then(function(e){t.subType=e.data})},getTag:function(){var t=this;Object(r.A)().then(function(e){t.subTag=e.data})},getList:function(t){var e=this;this.listQuery.offset=this.listPage,Object(r.D)(this.listQuery).then(function(n){t&&e.closeLoading(t);var a=n.data;e.matchList=a.rows,e.listTotal=a.total})},checkTable:function(t){this.ids=t.map(function(t){return t.id})},indexMethod:function(t){return(this.listPage-1)*this.listQuery.limit+t+1},indexMethod2:function(t){return(this.topicQuery.offset-1)*this.topicQuery.limit+t+1}}},g=(n("1W9+"),n("X1hN"),Object(l.a)(_,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container jad_topic"},[n("div",{staticClass:"filter-container"},[n("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.showtopic}},[t._v("导入题目")]),t._v(" "),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.removeSub}},[t._v("删除")]),t._v(" "),1===t.integral_mode?n("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.getSetScoreList}},[t._v("题目分值设置")]):t._e()],1),t._v(" "),n("div",{staticClass:"filter-container"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.matchList,border:"",fit:"","highlight-current-row":"","tooltip-effect":"dark"},on:{"selection-change":t.checkTable}},[n("el-table-column",{attrs:{align:"center",type:"selection"}}),t._v(" "),n("el-table-column",{attrs:{index:t.indexMethod,align:"center",type:"index",width:"50",label:"序号"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"title",label:"题目名称"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"category_cn_name",label:"题目类型"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"题目附件"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.file.length>0?n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"mini",type:"warning"},on:{click:function(n){t.showDownload(e.row.file)}}},[t._v("下载")]):n("span",[t._v("无")])]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"is_dynamic_flag",label:"Flag 形式"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.is_dynamic_flag?n("span",[t._v("静态")]):t._e(),t._v(" "),1==e.row.is_dynamic_flag?n("span",[t._v("动态")]):t._e(),t._v(" "),2==e.row.is_dynamic_flag?n("span",[t._v("随机")]):t._e(),t._v(" "),3==e.row.is_dynamic_flag?n("span",[t._v("静态")]):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"is_dynamic_flag",label:"题目环境 "},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.is_dynamic_env?n("span",[0==e.row.is_share?n("span",[t._v("独享")]):t._e(),t._v(" "),1==e.row.is_share?n("span",[t._v("共享")]):t._e()]):n("span",[t._v("无")])]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"score",label:"题目分值"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"mini",type:"success"},on:{click:function(n){t.editTopic(e.row.id)}}},[t._v("编辑")])]}}])})],1)],1),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.listTotal>0,expression:"listTotal>0"}],attrs:{total:t.listTotal,page:t.listPage,limit:t.listQuery.limit},on:{"update:page":function(e){t.listPage=e},"update:limit":function(e){t.$set(t.listQuery,"limit",e)},pagination:t.getList}}),t._v(" "),n("p",{staticStyle:{color:"red","font-size":"18px","margin-top":"20px","text-align":"center",margin:"10px"}},[t._v("竞赛开始前，一定要先去竞赛运维中初始化网络，否则无法正常比赛。")]),t._v(" "),n("div",{staticClass:"btn_box topicStep_box"},[n("el-button",{attrs:{type:"primary"},on:{click:t.backStep}},[t._v("上一步")]),t._v(" "),n("router-link",{attrs:{to:{path:"/competition/jeopardy/index"}}},[n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"}},[t._v("完成")])],1),t._v(" "),n("router-link",{attrs:{to:{path:"/competition/jeopardy/operation",query:{id:t.id,hash:t.$route.query.hash}}}},[n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning"}},[t._v("竞赛运维")])],1)],1),t._v(" "),n("el-dialog",{staticClass:"addsub",attrs:{visible:t.addDlg,title:"导入题目",width:"900px"},on:{"update:visible":function(e){t.addDlg=e}}},[n("div",{staticStyle:{"margin-bottom":"20px"}},[n("el-select",{staticClass:"filter-item",attrs:{size:"mini",clearable:"",placeholder:"请选择题目标签"},model:{value:t.topicQuery.tag,callback:function(e){t.$set(t.topicQuery,"tag",e)},expression:"topicQuery.tag"}},t._l(t.subTag,function(t,e){return n("el-option",{key:e,attrs:{label:t.cn_name,value:t.id}})})),t._v(" "),n("el-select",{staticClass:"filter-item",attrs:{size:"mini",clearable:"",placeholder:"请选择题目类型"},model:{value:t.topicQuery.category,callback:function(e){t.$set(t.topicQuery,"category",e)},expression:"topicQuery.category"}},t._l(t.subType,function(t,e){return n("el-option",{key:e,attrs:{label:t.cn_name,value:t.id}})})),t._v(" "),n("div",{staticStyle:{float:"right"}},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"150px"},attrs:{placeholder:"题目名称",size:"mini"},model:{value:t.topicQuery.title,callback:function(e){t.$set(t.topicQuery,"title","string"==typeof e?e.trim():e)},expression:"topicQuery.title"}}),t._v(" "),n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",size:"mini"},on:{click:t.getImportList}},[t._v("搜索")])],1)],1),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.subData,border:""},on:{"selection-change":t.handleChange}},[n("el-table-column",{attrs:{align:"center",type:"selection"}}),t._v(" "),n("el-table-column",{attrs:{index:t.indexMethod2,align:"center",type:"index",width:"50",label:"序号"}}),t._v(" "),n("el-table-column",{attrs:{prop:"title",align:"center",label:"题目名称"}}),t._v(" "),n("el-table-column",{attrs:{prop:"tag_cn_name",align:"center",label:"题目标签"}}),t._v(" "),n("el-table-column",{attrs:{prop:"category_cn_name",align:"center",label:"题目类型"}})],1),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.subTotal>0,expression:"subTotal>0"}],attrs:{total:t.subTotal,page:t.subPage,limit:t.topicQuery.limit},on:{"update:page":function(e){t.subPage=e},"update:limit":function(e){t.$set(t.topicQuery,"limit",e)},pagination:t.getImportList}}),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.sureImportJeopardy}},[t._v("确 定")]),t._v(" "),n("el-button",{on:{click:function(e){t.addDlg=!1}}},[t._v("取 消")])],1)],1),t._v(" "),n("el-dialog",{staticClass:"addsub",attrs:{visible:t.diaSetScore,title:"批量修改分数"},on:{"update:visible":function(e){t.diaSetScore=e}}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.setScoreList,border:""}},[n("el-table-column",{attrs:{align:"center",prop:"title",label:"题目名称"}}),t._v(" "),n("el-table-column",{attrs:{prop:"score",align:"center",label:"分数"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input-number",{attrs:{min:-1e3,max:1e5,label:"描述文字"},model:{value:t.editData[e.row.id],callback:function(n){t.$set(t.editData,e.row.id,n)},expression:"editData[scope.row.id]"}})]}}])})],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.setScore}},[t._v("确 定")]),t._v(" "),n("el-button",{on:{click:function(e){t.diaSetScore=!1}}},[t._v("取 消")])],1)],1),t._v(" "),n("el-dialog",{staticClass:"addsub",attrs:{visible:t.choseDown,title:"下载附件",width:"900px"},on:{"update:visible":function(e){t.choseDown=e},close:t.closeDown}},t._l(t.fileList,function(e){return n("a",{attrs:{href:e,download:""}},[n("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary"}},[t._v(t._s(e))])],1)})),t._v(" "),n("el-dialog",{staticClass:"addsub",attrs:{visible:t.diaFlag,title:"查看flag",width:"900px"},on:{"update:visible":function(e){t.diaFlag=e},close:t.closeDown}},t._l(t.flagList,function(e){return n("p",[t._v(t._s(e))])}))],1)},[],!1,null,"5fde407a",null));g.options.__file="index.vue";var y=g.exports,j={name:"TopicManagement",directives:{waves:b.a},components:{Pagination:v.a},data:function(){return{matchList:[],ids:[],tableKey:0,listTotal:0,listLoading:!1,listPage:1,subPage:1,topicQuery:{offset:0,limit:this.$store.state.config.row},id:this.$route.query.id,listQuery:{offset:0,limit:this.$store.state.config.row}}},created:function(){this.getList()},methods:{indexMethod:function(t){return(this.listQuery.offset-1)*this.listQuery.limit+t+1},backStep:function(){this.$emit("backStep")},addInternet:function(){this.$router.push({path:"/competition/jeopardy/editMatch/addInetnet",query:{id:this.id,step:3}})},editInternet:function(t){this.$router.push({path:"/competition/jeopardy/editMatch/addInetnet",query:{id:this.id,internet_id:t,step:3}})},removeSub:function(){var t=this;this.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r.i)(t.id,{ids:t.ids}).then(function(e){e.data.success&&(t.$message.success("操作成功"),t.getList())})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},getList:function(t){var e=this;Object(r.u)(this.id).then(function(n){t&&e.closeLoading(t);var a=n.data;e.matchList=a})},checkTable:function(t){this.ids=t.map(function(t){return t.id})}}},w=(n("4jvS"),Object(l.a)(j,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container "},[n("div",{staticClass:"filter-container"},[n("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.addInternet}},[t._v(" 增加网络")]),t._v(" "),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.removeSub}},[t._v(" 删除")])],1),t._v(" "),n("div",{staticClass:"filter-container"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.matchList,border:"",fit:"","highlight-current-row":"","tooltip-effect":"dark"},on:{"selection-change":t.checkTable}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"name",label:"账户"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"name",label:"账户昵称"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"ip",label:"网络"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"vlan",label:"vlan"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"mask",label:"掩码"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"gateway",label:"网关"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",width:"100px",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"mini",type:"success"},on:{click:function(n){t.editInternet(e.row.id)}}},[t._v("编辑\n          ")])]}}])})],1)],1),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.listTotal>0,expression:"listTotal>0"}],attrs:{total:t.listTotal,page:t.listPage,limit:t.listQuery.limit},on:{"update:page":function(e){t.listPage=e},"update:limit":function(e){t.$set(t.listQuery,"limit",e)},pagination:t.getList}}),t._v(" "),n("div",{staticClass:"btn_box topicStep_box"},[n("el-button",{attrs:{type:"primary"},on:{click:t.backStep}},[t._v("上一步")]),t._v(" "),n("router-link",{attrs:{to:{path:"/competition/jeopardy/index"}}},[n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"}},[t._v("完成")])],1),t._v(" "),n("router-link",{attrs:{to:{path:"/competition/jeopardy/operation",query:{id:t.id}}}},[n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning"}},[t._v("竞赛运维")])],1)],1)],1)},[],!1,null,"8352aafe",null));w.options.__file="index.vue";var k={name:"Index",components:{createMatch:u,user:m,topic:y,internet:w.exports},data:function(){return{tabMapOptions:[{label:"基本信息",key:"status"},{label:"用户",key:"user"},{label:"题目",key:"sub"}],activeName:"status",active:1*this.$route.query.step||0}},created:function(){var t=this;this.$route.query.id&&Object(r.x)(this.$route.query.id).then(function(e){t.$store.dispatch("changeMatchName",e.data.name_zh)})},beforeDestroy:function(){this.$store.dispatch("changeMatchName","")},methods:{nextStep:function(){this.active++>3&&(this.active=0),this.$route.query.step=this.active},backStep:function(){this.active--<0&&(this.active=0),this.$route.query.step=this.active}}},x=(n("cGas"),Object(l.a)(k,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("el-steps",{staticStyle:{"margin-top":"20px"},attrs:{active:t.active,"finish-status":"success",simple:""}},[n("el-step",{attrs:{title:"基本信息"}}),t._v(" "),n("el-step",{attrs:{title:"选择选手"}}),t._v(" "),n("el-step",{attrs:{title:"题目"}})],1)],1),t._v(" "),0==t.active?n("div",[n("createMatch",{on:{nextStep:t.nextStep}})],1):t._e(),t._v(" "),1==t.active?n("div",[n("user",{on:{nextStep:t.nextStep,backStep:t.backStep}})],1):t._e(),t._v(" "),2==t.active?n("div",[n("topic",{on:{nextStep:t.nextStep,backStep:t.backStep}})],1):t._e()])},[],!1,null,"614f0cf2",null));x.options.__file="index.vue";e.default=x.exports},qsMj:function(t,e,n){"use strict";var a=n("bW74");n.n(a).a},uXHB:function(t,e,n){}}]);
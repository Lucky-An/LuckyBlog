(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-commons"],{"+NCQ":function(e,t,i){},"1mAt":function(e,t,i){},"65/3":function(e,t,i){},"9CxU":function(e,t,i){"use strict";var n=i("7Qib");t.a={data:function(){return{sidebarElm:null}},mounted:function(){var e=this;this.__resizeHandler=Object(n.a)(function(){e.chart&&e.chart.resize()},100),window.addEventListener("resize",this.__resizeHandler),this.sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.sidebarElm&&this.sidebarElm.addEventListener("transitionend",this.sidebarResizeHandler)},beforeDestroy:function(){window.removeEventListener("resize",this.__resizeHandler),this.sidebarElm&&this.sidebarElm.removeEventListener("transitionend",this.sidebarResizeHandler)},methods:{sidebarResizeHandler:function(e){"width"===e.propertyName&&this.__resizeHandler()}}}},CKYb:function(e,t,i){"use strict";var n=i("65/3");i.n(n).a},EDBd:function(e,t,i){"use strict";var n=i("+NCQ");i.n(n).a},Kw2p:function(e,t,i){"use strict";var n=i("1mAt");i.n(n).a},Mz3J:function(e,t,i){"use strict";var n=i("Y5bG"),a={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[this.$store.state.config.row,25,50,100]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},watch:{total:function(e,t){e<t&&this.page>Math.ceil(e/this.limit)&&(0!==e?(this.$emit("update:page",Math.ceil(e/this.limit)),this.handleCurrentChange(Math.ceil(e/this.limit))):(this.$emit("update:page",1),this.handleCurrentChange(1)))}},methods:{handleSizeChange:function(e){var t=this;setTimeout(function(){t.$emit("pagination",{page:t.currentPage,limit:e}),t.autoScroll&&Object(n.a)(0,800)},200)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&Object(n.a)(0,800)}}},r=(i("EDBd"),i("ZrdR")),l=Object(r.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[i("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},[],!1,null,"269b658c",null);l.options.__file="index.vue";t.a=l.exports},"Q+Gy":function(e,t,i){"use strict";var n=i("fe8K");i.n(n).a},fe8K:function(e,t,i){},i8oh:function(e,t,i){"use strict";var n=i("MD+q"),a={name:"Index",components:{Pagination:i("Mz3J").a},props:{selectMirror:{required:!0,type:Boolean},image_name:{type:String,default:""},image_uuid:{type:String,default:""},type:{type:String,default:"kvm"}},data:function(){return{allMirrorList:[],selectMirrorList:[],total:0,listSelect:{image_type:this.type,search:"",status:"active",per_page:10,page:1}}},computed:{isImage:{get:function(){return this.getMirrorList(),this.selectMirror},set:function(e){this.$emit("update:selectMirror",e)}}},created:function(){},methods:{indexMethod:function(e){return(this.listSelect.page-1)*this.listSelect.per_page+e+1},closed:function(){this.listSelect={image_type:this.type,search:"",per_page:10,page:1}},getMirrorList:function(e){var t=this;1===e&&(this.listSelect.page=1),Object(n.g)(this.listSelect).then(function(e){t.allMirrorList=e.data.data,t.total=e.data.total,t.$nextTick(function(){var e="";t.allMirrorList.filter(function(i,n){i.uuid==t.image_uuid&&(e=n)}),""!=t.image_uuid&&t.$refs.MirrorListTable&&t.$refs.MirrorListTable.toggleRowSelection(t.allMirrorList[e],!0)})})},confirmSelect:function(){this.search="",this.os_type="",this.selectMirrorList.length?(this.$emit("update:image_name",this.selectMirrorList[0].name),this.$emit("update:image_uuid",this.selectMirrorList[0].uuid)):(this.$emit("update:image_name",""),this.$emit("update:image_uuid","")),this.isImage=!1},changeSelectedMirrorList:function(e){e.length>1&&(this.$refs.MirrorListTable.clearSelection(),this.$refs.MirrorListTable.toggleRowSelection(e[1]),e.shift()),this.selectMirrorList=e}}},r=(i("vGyC"),i("Kw2p"),i("ZrdR")),l=Object(r.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"choice_wrapper"},[i("el-dialog",{attrs:{visible:e.isImage,title:"镜像选择",center:""},on:{"update:visible":function(t){e.isImage=t},close:e.closed}},[i("div",{staticClass:"filter-container"},[i("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入镜像名称",size:"mini"},model:{value:e.listSelect.search,callback:function(t){e.$set(e.listSelect,"search",t)},expression:"listSelect.search"}}),e._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.getMirrorList(1)}}},[e._v("搜索")])],1),e._v(" "),i("el-table",{ref:"MirrorListTable",staticClass:"img_table",attrs:{data:e.allMirrorList,border:""},on:{"selection-change":e.changeSelectedMirrorList}},[i("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{index:e.indexMethod,type:"index",width:"55",label:"序号",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"镜像名称",prop:"name",align:"center"}}),e._v(" "),"kvm"===e.type?i("el-table-column",{attrs:{label:"操作系统类型",prop:"os_type",align:"center"}}):e._e(),e._v(" "),i("el-table-column",{attrs:{prop:"description",label:"镜像描述",align:"center"}})],1),e._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.listSelect.page,limit:e.listSelect.per_page},on:{"update:page":function(t){e.$set(e.listSelect,"page",t)},"update:limit":function(t){e.$set(e.listSelect,"per_page",t)},pagination:e.getMirrorList}}),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.confirmSelect}},[e._v("确 定")]),e._v(" "),i("el-button",{on:{click:function(t){e.isImage=!1}}},[e._v("取 消")])],1)],1)],1)},[],!1,null,"851e42d0",null);l.options.__file="index.vue";t.a=l.exports},tBjE:function(e,t,i){"use strict";var n={name:"UploadFile",props:{file:{default:""},listType:{type:String,default:""},fileType:{type:Array,default:function(){return[]}},fileSize:{type:Number,default:10485760}},data:function(){return{ref:"markdown-editor-"+ +new Date+(1e3*Math.random()).toFixed(0),dialogImageUrl:"",dialogVisible:!1,hide:!1,fileList:[]}},watch:{file:{immediate:!0,handler:function(e,t){if("string"==typeof e&&e.length>0){var i=e.split("/");this.fileList=[{name:i[i.length-1],url:e}],this.hide=!0}else"string"==typeof e&&0===e.length?this.clearFiles():"[object File]"===Object.prototype.toString.call(e)&&"picture-card"!==this.listType&&(this.fileList=[e],this.hide=!0)}}},methods:{clearFiles:function(){this.fileList=[],this.hide=!1},handleRemove:function(e,t){this.hide=t.length,this.$emit("update:file","")},handlePictureCardPreview:function(e){"picture-card"===this.listType&&(this.dialogImageUrl=e.url,this.dialogVisible=!0)},handleEditChange:function(e,t){var i=e.raw,n=this.fileType.some(function(e){return i.name.toLowerCase().endsWith(e)});return 0===this.fileType.length&&(n=!0),n?i.size>this.fileSize?(this.$refs[this.ref].clearFiles(),void this.$message.error("文件大小不符合要求")):(this.$emit("update:file",e.raw),void(this.hide=t.length)):(this.$refs[this.ref].clearFiles(),void this.$message.error("文件格式不符合要求"))}}},a=(i("CKYb"),i("ZrdR")),r=Object(a.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-upload",{ref:e.ref,class:{my_hide:e.hide},attrs:{"list-type":e.listType,"file-list":e.fileList,"auto-upload":!1,"on-preview":e.handlePictureCardPreview,"on-change":e.handleEditChange,"on-remove":e.handleRemove,action:"#"}},[e.listType?i("i",{staticClass:"el-icon-plus"}):i("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("选择文件\n    ")])],1),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("img",{attrs:{src:e.dialogImageUrl,width:"100%",alt:""}})])],1)},[],!1,null,null,null);r.options.__file="index.vue";t.a=r.exports},uTCP:function(e,t,i){"use strict";var n=[["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[{color:[]},{background:[]}],[{align:[]}],["image"],["clean"]],a={name:"QuillEditor",components:{quillEditor:i("uIHo").quillEditor},model:{prop:"value",event:"input"},props:{file:{default:""},listType:{type:String,default:""},fileType:{type:Array,default:function(){return[]}},fileSize:{type:Number,default:10485760},value:{type:String,default:""},id:{type:String,required:!1,default:function(){return"markdown-editor-"+ +new Date+(1e3*Math.random()).toFixed(0)}},holder:{type:String,default:""}},data:function(){var e=this;return{ref:"markdown-editor-"+ +new Date+(1e3*Math.random()).toFixed(0),dialogImageUrl:"",dialogVisible:!1,hide:!1,editorOption:{placeholder:this.holder,modules:{toolbar:{container:n,handlers:{image:function(t){t?document.querySelector("#"+e.ref).click():e.quill.format("image",!1)}}}}}}},mounted:function(){},methods:{handleSuccess:function(e){var t=this.$refs[this.ref].quill;if(e.success){var i=t.getSelection().index;t.insertEmbed(i,"image",e.path),t.setSelection(i+1)}},onEditorBlur:function(e,t){},onEditorFocus:function(e,t){},onEditorReady:function(e,t){},onEditorChange:function(e,t){e.quill;var i=e.html;e.text;this.$emit("input",i)}}},r=(i("Q+Gy"),i("ZrdR")),l=Object(r.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"quillcon"},[i("el-upload",{class:{hide:e.hide},attrs:{"on-success":e.handleSuccess,"show-file-list":!1,name:"logo",accept:"['jpg', 'jpeg', 'png']",action:"/api/v1/common/admin/upload"}},[e.listType?e._e():i("el-button",{staticClass:"ivu-btn",attrs:{id:e.ref,size:"small",type:"primary"}},[e._v("点击上传")])],1),e._v(" "),i("quill-editor",{ref:e.ref,attrs:{id:e.id,value:e.value,options:e.editorOption},on:{blur:function(t){e.onEditorBlur(t,e.ref)},focus:function(t){e.onEditorFocus(t,e.ref)},ready:function(t){e.onEditorReady(t,e.ref)},change:function(t){e.onEditorChange(t,e.ref)}}})],1)},[],!1,null,"4dbddb0f",null);l.options.__file="index.vue";t.a=l.exports},vGyC:function(e,t,i){"use strict";var n=i("x+uo");i.n(n).a},"x+uo":function(e,t,i){}}]);
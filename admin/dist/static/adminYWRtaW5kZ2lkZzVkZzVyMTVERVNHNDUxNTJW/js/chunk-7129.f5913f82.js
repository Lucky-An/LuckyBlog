(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7129"],{D542:function(t,e,a){},Ibrk:function(t,e,a){"use strict";a.d(e,"e",function(){return i}),a.d(e,"g",function(){return l}),a.d(e,"i",function(){return s}),a.d(e,"f",function(){return o}),a.d(e,"a",function(){return c}),a.d(e,"b",function(){return r}),a.d(e,"d",function(){return u}),a.d(e,"c",function(){return d}),a.d(e,"h",function(){return p});var n=a("t3Un");function i(t){return Object(n.a)({url:"/api/v1/common/admin/challenge/tags/",method:"get",params:t})}function l(){return Object(n.a)({url:"/api/v1/common/admin/flavors",method:"get",params:{per_page:9999}})}function s(){return Object(n.a)({url:"/api/v1/common/admin/images",method:"get"})}function o(t){return Object(n.a)({url:"/api/v1/common/admin/challenge/categorys/",method:"get",params:t})}function c(t){return Object(n.a)({url:"/api/v1/common/admin/challenge/tags/",method:"post",data:t})}function r(t){return Object(n.a)({url:"/api/v1/common/admin/challenge/categorys/",method:"post",data:t})}function u(t){return Object(n.a)({url:"/api/v1/common/admin/challenge/categorys/",method:"delete",data:t})}function d(t){return Object(n.a)({url:"/api/v1/common/admin/challenge/tags/",method:"delete",data:t})}function p(t){return Object(n.a)({url:"/api/v1/common/admin/flavors",method:"get",params:t})}},"MD+q":function(t,e,a){"use strict";a.d(e,"e",function(){return i}),a.d(e,"d",function(){return l}),a.d(e,"f",function(){return s}),a.d(e,"k",function(){return o}),a.d(e,"i",function(){return c}),a.d(e,"g",function(){return r}),a.d(e,"h",function(){return u}),a.d(e,"j",function(){return d}),a.d(e,"c",function(){return p}),a.d(e,"b",function(){return m}),a.d(e,"a",function(){return g});var n=a("t3Un");
//! 渗透赛获取题目列表
function i(t){return Object(n.a)({url:"/api/v1/inf/admin/setting/challenge_store_list",method:"get",params:t})}
//! 渗透赛获取题目标签options值
function l(t){return Object(n.a)({url:"/api/v1/inf/admin/setting/challenge_store_flag",method:"get",params:t})}function s(t){return Object(n.a)({url:"/api/v1/inf/admin/setting/challenge_store",method:"post",data:t})}function o(t){return Object(n.a)({url:"/api/v1/inf/admin/setting/challenge_store_list",method:"post",data:t})}
//! 获取题目类型
function c(){return Object(n.a)({url:"/api/v1/inf/admin/setting/categorys",method:"get"})}
//! 获取镜像列表
function r(t){return Object(n.a)({url:"/api/v1/common/admin/images",method:"get",params:t})}function u(t){return Object(n.a)({url:"/api/v1/inf/admin/setting/challenge_store",method:"get",params:t})}function d(t,e){return Object(n.a)({url:"/api/v1/inf/admin/setting/challenge_store",method:"patch",params:t,data:e})}function p(t){return Object(n.a)({url:"/api/v1/inf/admin/setting/challenge_store/test_env/"+t,method:"post"})}function m(t){return Object(n.a)({url:"/api/v1/inf/admin/setting/challenge_store/test_env/"+t,method:"delete"})}function g(t){return Object(n.a)({url:"/api/v1/inf/admin/setting/challenge_store/test_env/"+t,method:"get"})}},Y5bG:function(t,e,a){"use strict";a.d(e,"a",function(){return i}),Math.easeInOutQuad=function(t,e,a,n){return(t/=n/2)<1?a/2*t*t+e:-a/2*(--t*(t-2)-1)+e};var n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};function i(t,e,a){var i=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,l=t-i,s=0;e=void 0===e?500:e;!function t(){s+=20,function(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}(Math.easeInOutQuad(s,i,l,e)),s<e?n(t):a&&"function"==typeof a&&a()}()}},ZySA:function(t,e,a){"use strict";var n=a("6ZY3"),i=a.n(n),l=(a("jUE0"),{bind:function(t,e){t.addEventListener("click",function(a){var n=i()({},e.value),l=i()({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},n),s=l.ele;if(s){s.style.position="relative",s.style.overflow="hidden";var o=s.getBoundingClientRect(),c=s.querySelector(".waves-ripple");switch(c?c.className="waves-ripple":((c=document.createElement("span")).className="waves-ripple",c.style.height=c.style.width=Math.max(o.width,o.height)+"px",s.appendChild(c)),l.type){case"center":c.style.top=o.height/2-c.offsetHeight/2+"px",c.style.left=o.width/2-c.offsetWidth/2+"px";break;default:c.style.top=(a.pageY-o.top-c.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",c.style.left=(a.pageX-o.left-c.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return c.style.backgroundColor=l.color,c.className="waves-ripple z-active",!1}},!1)}}),s=function(t){t.directive("waves",l)};window.Vue&&(window.waves=l,Vue.use(s)),l.install=s;e.a=l},hlwh:function(t,e,a){"use strict";a.r(e);var n=a("Mz3J"),i=a("Ibrk"),l=a("ZySA"),s=a("MD+q"),o={name:"TopicManagement",directives:{waves:l.a},components:{Pagination:n.a},data:function(){return{diaLogbool:!1,diaLogUrl:"",diaLogTitle:"",listSelect:{challenge_type:"",label:"",level:"",server_type:"",title:"",limit:10,offset:1},checkedlist:[],viewFlag:!1,viewFlagData:{},topicType:[],topicLabel:[],topicLevel:[{label:"初级",value:0},{label:"中级",value:1},{label:"高级",value:2}],topicServerType:[{label:"非跳板机",value:0},{label:"跳板机",value:1}],tableList:[],total:0,tagDlg:!1,tagtype:0,digTitle:"",tagDlgAry:[],tagQuery:{cn_name:"",content:""}}},created:function(){this.getList(this.listSelect),this.getTagsOptions(),this.getType()},methods:{getType:function(){var t=this;Object(s.i)().then(function(e){t.topicType=e.data})},checkTag:function(t){this.tagIds=t.map(function(t){return t.id})},removeTagType:function(t){var e=this,a={ids:[]};a.ids.push(t),a.ids.length<=0||this.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){1==e.tagtype&&Object(i.d)(a).then(function(t){t.data.success&&(e.$message.success("删除成功"),e.getType())}),2==e.tagtype&&Object(i.c)(a).then(function(t){t.data.success&&(e.$message.success("删除成功"),e.getTagsOptions())})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},addTagType:function(){var t=this;this.tagQuery.cn_name.length>30?this.$message.error("名称长度应限制在30字以内"):""!==this.tagQuery.cn_name?(1==this.tagtype&&Object(i.b)(this.tagQuery).then(function(e){e.data.success&&(t.tagQuery={cn_name:"",content:""},t.$message.success("新增成功"),t.getType())}),2==this.tagtype&&(this.tagQuery.type=4,Object(i.a)(this.tagQuery).then(function(e){e.data.success&&(t.tagQuery={cn_name:"",content:""},t.$message.success("新增成功"),t.getTagsOptions())}))):this.$message.error("请输入名称")},closetagDlg:function(){this.tagQuery={cn_name:"",content:""}},
//! 获取table中的数据
getList:function(t){var e=this;1===t&&(this.listSelect.offset=t),Object(s.e)(this.listSelect).then(function(t){e.total=t.data.total,e.tableList=t.data.rows})},getChallengeStoreFlag:function(t,e){var a=this;Object(s.d)(t).then(function(t){a.viewFlagData.static=t.data.static,a.viewFlagData.dynamic=t.data.dynamic,a.viewFlagData.title=e,a.viewFlag=!0})},getTagsOptions:function(){var t=this;Object(i.e)({type:4}).then(function(e){t.topicLabel=e.data,t.tagDlgAry=t.topicLabel})},showflag:function(t){this.getChallengeStoreFlag({challenge_id:t.id},t.title)},
//! 关闭查看flag
handleClose:function(){this.viewFlag=!1,this.viewFlagData={}},showTagDlg:function(t){this.tagtype=t,1==t?(this.digTitle="题目类型管理",this.tagDlgAry=this.topicType,this.getType()):(this.digTitle="题目标签管理",this.getTagsOptions()),this.tagDlg=!0},checkTable:function(t){var e=[];t.forEach(function(t){e.push(t.id)}),this.checkedlist=e},removeSub:function(){var t=this;0!==this.checkedlist.length&&this.$confirm("确认删除题目？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={ids:t.checkedlist};Object(s.f)(e).then(function(e){t.getList()})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},addTopic:function(){this.$router.push({path:"/itemBank/penetration/addpenetration",query:{type:this.$route.name}})},updateTopic:function(t){this.$router.push({path:"/itemBank/penetration/editpenetration",query:{type:this.$route.name,challenge_id:t}})},indexMethod:function(t){return(this.listSelect.offset-1)*this.listSelect.limit+t+1},handleTestChange:function(t,e){var a=this;t?Object(s.c)(e).then(function(t){t.data.success&&a.$message({type:"success",message:"启动成功"}),a.getList()}):Object(s.b)(e).then(function(t){t.data.success&&a.$message({type:"success",message:"销毁成功"}),a.getList()})},handleCheckTest:function(t){var e=this,a=t.id,n=t.title;Object(s.a)(a).then(function(t){var a=t.data;a.success&&(e.diaLogUrl=a.data.url,e.diaLogTitle=n,e.diaLogbool=!0)})}}},c=(a("m9wT"),a("ZrdR")),r=Object(c.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-select",{staticClass:"filter-item",attrs:{size:"mini",placeholder:"请选择题目类型",clearable:""},model:{value:t.listSelect.challenge_type,callback:function(e){t.$set(t.listSelect,"challenge_type",e)},expression:"listSelect.challenge_type"}},t._l(t.topicType,function(t){return a("el-option",{key:t.id,attrs:{label:t.content,value:t.id}})})),t._v(" "),a("el-select",{staticClass:"filter-item",attrs:{size:"mini",placeholder:"请选择题目标签",clearable:""},model:{value:t.listSelect.label,callback:function(e){t.$set(t.listSelect,"label",e)},expression:"listSelect.label"}},t._l(t.topicLabel,function(t){return a("el-option",{key:t.id,attrs:{label:t.cn_name,value:t.id}})})),t._v(" "),a("el-select",{staticClass:"filter-item",attrs:{size:"mini",placeholder:"请选择题目难度",clearable:""},model:{value:t.listSelect.level,callback:function(e){t.$set(t.listSelect,"level",e)},expression:"listSelect.level"}},t._l(t.topicLevel,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),a("el-select",{staticClass:"filter-item",attrs:{size:"mini",placeholder:"请选择题目属性",clearable:""},model:{value:t.listSelect.server_type,callback:function(e){t.$set(t.listSelect,"server_type",e)},expression:"listSelect.server_type"}},t._l(t.topicServerType,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请输入题目名称",clearable:""},model:{value:t.listSelect.title,callback:function(e){t.$set(t.listSelect,"title","string"==typeof e?e.trim():e)},expression:"listSelect.title"}}),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",size:"mini"},on:{click:function(e){t.getList(1)}}},[t._v("搜索\n    ")]),t._v(" "),a("div",{staticStyle:{float:"right"}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",size:"mini"},on:{click:function(e){t.showTagDlg(2)}}},[t._v("题目标签管理")])],1)],1),t._v(" "),a("div",{staticClass:"filter-container"},[a("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.addTopic}},[t._v(" 新增")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.removeSub}},[t._v(" 删除")])],1),t._v(" "),a("div",{staticClass:"filter-container"},[a("el-table",{attrs:{data:t.tableList,border:""},on:{"selection-change":t.checkTable}},[a("el-table-column",{attrs:{align:"center",type:"selection"}}),t._v(" "),a("el-table-column",{attrs:{index:t.indexMethod,align:"center",type:"index",width:"50",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"title",label:"题目名称"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"challenge_type_name",label:"题目类型"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"level_name",label:"题目难度"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"label_name",label:"题目标签"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"题目属性"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.server_type?a("span",[t._v("非跳板机")]):1==e.row.server_type?a("span",[t._v("跳板机")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"附件"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.attachment?a("a",{attrs:{href:e.row.attachment,download:""}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:"warning"}},[t._v("下载 ")])],1):a("span",[t._v("无")])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"image_name",label:"镜像名称"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"flag_numbers",label:"flag数量"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"查看flag"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.flag_numbers?a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){t.showflag(e.row)}}},[t._v("查看\n          ")]):a("span",[t._v("无")])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"WriteUp"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.wp_official?a("a",{attrs:{href:e.row.wp_official,download:""}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:"warning"}},[t._v("下载 ")])],1):a("span",[t._v("无")])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:"success"},on:{click:function(a){t.updateTopic(e.row.id)}}},[t._v("编辑\n          ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",width:"150px",label:"测试"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,size:"mini"},on:{change:function(a){t.handleTestChange(a,e.row.id)}},model:{value:e.row.test_status,callback:function(a){t.$set(e.row,"test_status",a)},expression:"scope.row.test_status"}}),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticStyle:{"margin-left":"10px"},attrs:{disabled:!e.row.test_status,size:"mini",type:"primary"},on:{click:function(a){t.handleCheckTest(e.row)}}},[t._v("查看")])]}}])})],1)],1),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{total:t.total,page:t.listSelect.offset,limit:t.listSelect.limit},on:{"update:page":function(e){t.$set(t.listSelect,"offset",e)},"update:limit":function(e){t.$set(t.listSelect,"limit",e)},pagination:t.getList}}),t._v(" "),a("el-dialog",{attrs:{visible:t.viewFlag,"before-close":t.handleClose,title:"查看题目Flag"},on:{"update:visible":function(e){t.viewFlag=e}}},[a("div",{staticStyle:{margin:"0  0 20px 30px"}},[t._v("题目名称:"+t._s(t.viewFlagData.title))]),t._v(" "),t._l(t.viewFlagData.static,function(e,n){return a("div",{key:n,staticStyle:{"margin-left":"30px"}},[a("span",[t._v("静态flag"+t._s(n+1)+":")]),a("span",{staticStyle:{"margin-left":"50px"}},[t._v(t._s(e))])])}),t._v(" "),a("br"),t._v(" "),t._l(t.viewFlagData.dynamic,function(e,n){return a("div",{key:n,staticStyle:{"margin-left":"30px"}},[a("span",[t._v("动态flag"+t._s(n+1)+":")]),a("span",{staticStyle:{"margin-left":"50px"}},[t._v(t._s(e))])])}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger"},on:{click:t.handleClose}},[t._v("关闭")])],1)],2),t._v(" "),a("el-dialog",{attrs:{title:t.digTitle,visible:t.tagDlg,width:"780px"},on:{"update:visible":function(e){t.tagDlg=e},close:t.closetagDlg}},[a("el-form",{ref:"form",attrs:{"label-width":"0px"}},[a("el-form-item",{attrs:{label:""}},[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入名称"},model:{value:t.tagQuery.cn_name,callback:function(e){t.$set(t.tagQuery,"cn_name","string"==typeof e?e.trim():e)},expression:"tagQuery.cn_name"}})],1),t._v(" "),a("el-col",{staticStyle:{"margin-left":"30px"},attrs:{span:4}},[a("el-button",{attrs:{type:"success"},on:{click:t.addTagType}},[t._v("新增")])],1)],1)],1),t._v(" "),a("div",{staticStyle:{border:"1px solid rgb(240, 249, 235)"}},t._l(t.tagDlgAry,function(e){return a("el-tag",{key:e.id,staticClass:"mytag",staticStyle:{margin:"8px 20px",background:"#fff","border-color":"rgb(220, 220, 220)","border-radius":"43px"},attrs:{closable:"",size:"mini"},on:{close:function(a){t.removeTagType(e.id)}}},[a("el-tooltip",{staticClass:"item",attrs:{content:e.cn_name,effect:"dark",placement:"top-start"}},[a("div",{staticStyle:{display:"inline-block",width:"80px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","font-size":"14px"}},[t._v("\n            "+t._s(e.cn_name)+"\n          ")])])],1)}))],1),t._v(" "),a("el-dialog",{attrs:{visible:t.diaLogbool,title:"题目测试信息",width:"600px"},on:{"update:visible":function(e){t.diaLogbool=e},close:t.diaLogClose}},[a("div",{staticStyle:{"font-size":"16px","margin-left":"50px"}},[a("div",[t._v("题目名称："+t._s(t.diaLogTitle))]),t._v(" "),a("div",{staticStyle:{"margin-top":"30px"}},[t._v("\n        地址：\n        "),a("a",{attrs:{href:t.diaLogUrl,target:"view_window"}},[a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{size:"mini",type:"primary"}},[t._v("登录控制台\n          ")])],1)])])])],1)},[],!1,null,"324faf7e",null);r.options.__file="index.vue";e.default=r.exports},jUE0:function(t,e,a){},m9wT:function(t,e,a){"use strict";var n=a("D542");a.n(n).a}}]);
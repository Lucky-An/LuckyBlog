(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-e977"],{"1EWs":function(t,e,n){"use strict";var a=n("ETHw");n.n(a).a},"7DFs":function(t,e,n){"use strict";var a=n("tMPC");n.n(a).a},DujS:function(t,e,n){"use strict";n.d(e,"i",function(){return i}),n.d(e,"d",function(){return s}),n.d(e,"a",function(){return r}),n.d(e,"b",function(){return l}),n.d(e,"c",function(){return o}),n.d(e,"g",function(){return c}),n.d(e,"h",function(){return u}),n.d(e,"f",function(){return d}),n.d(e,"e",function(){return g});var a=n("t3Un");function i(t){return Object(a.a)({url:"/api/v1/jad/admin/setting/challenge_store_list/",method:"get",params:t})}function s(t){return Object(a.a)({url:"/api/v1/jad/admin/setting/challenge_store/",method:"delete",data:t})}function r(t){return Object(a.a)({url:"/api/v1/jad/admin/setting/challenge_store_list/",method:"post",data:t})}function l(t){return Object(a.a)({url:"/api/v1/jad/admin/setting/challenge_store/",method:"get",params:t})}function o(t,e){return Object(a.a)({url:"/api/v1/jad/admin/setting/challenge_store/",method:"patch",params:t,data:e})}function c(){return"/api/v1/jad/admin/setting/challenge_store_writeup_download/"}function u(t){return Object(a.a)({url:"/api/v1/jad/admin/setting/challenge_store/test_env/"+t,method:"post"})}function d(t){return Object(a.a)({url:"/api/v1/jad/admin/setting/challenge_store/test_env/"+t,method:"delete"})}function g(t){return Object(a.a)({url:"/api/v1/jad/admin/setting/challenge_store/test_env/"+t,method:"get"})}},ETHw:function(t,e,n){},Ibrk:function(t,e,n){"use strict";n.d(e,"e",function(){return i}),n.d(e,"g",function(){return s}),n.d(e,"i",function(){return r}),n.d(e,"f",function(){return l}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return c}),n.d(e,"d",function(){return u}),n.d(e,"c",function(){return d}),n.d(e,"h",function(){return g});var a=n("t3Un");function i(t){return Object(a.a)({url:"/api/v1/common/admin/challenge/tags/",method:"get",params:t})}function s(){return Object(a.a)({url:"/api/v1/common/admin/flavors",method:"get",params:{per_page:9999}})}function r(){return Object(a.a)({url:"/api/v1/common/admin/images",method:"get"})}function l(t){return Object(a.a)({url:"/api/v1/common/admin/challenge/categorys/",method:"get",params:t})}function o(t){return Object(a.a)({url:"/api/v1/common/admin/challenge/tags/",method:"post",data:t})}function c(t){return Object(a.a)({url:"/api/v1/common/admin/challenge/categorys/",method:"post",data:t})}function u(t){return Object(a.a)({url:"/api/v1/common/admin/challenge/categorys/",method:"delete",data:t})}function d(t){return Object(a.a)({url:"/api/v1/common/admin/challenge/tags/",method:"delete",data:t})}function g(t){return Object(a.a)({url:"/api/v1/common/admin/flavors",method:"get",params:t})}},Olzj:function(t,e,n){"use strict";n.r(e);var a=n("Mz3J"),i=n("ZySA"),s=n("gyXm"),r=n("DujS"),l=n("Ibrk"),o=n("z0WU"),c=(n("jJIE"),{name:"TopicManagement",directives:{waves:i.a,clipboard:s.a},components:{Pagination:a.a},data:function(){return{diaLogbool:!1,diaLogUrl:"",diaLogTitle:"",tagDlg:!1,tagDlgAry:[],tagtype:1,tagIds:[],digTitle:"",subType:[],tagAry:[],matchList:[],ids:[],listTotal:0,listPage:1,listQuery:{offset:0,limit:this.$store.state.config.row,order:"asc",title:"",label:"",challenge_type:""},tagQuery:{cn_name:"",content:""}}},created:function(){this.getType(),this.getTag(),this.getList()},methods:{diaLogClose:function(){this.diaLogbool=!1,this.diaLogUrl="",this.diaLogTitle=""},removeTagType:function(t){var e=this,n={ids:[],type:2};n.ids.push(t),n.ids.length<=0||this.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){1==e.tagtype&&Object(l.d)(n).then(function(t){t.data.success&&(e.$message.success("删除成功"),e.getType())}),2==e.tagtype&&Object(l.c)(n).then(function(t){t.data.success&&(e.$message.success("删除成功"),e.getTag())})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},closetagDlg:function(){this.tagQuery={cn_name:"",content:""}},showTagDlg:function(t){this.tagtype=t,1==t?(this.digTitle="题目类型管理",this.tagDlgAry=this.subType,this.getType()):(this.digTitle="题目标签管理",this.tagDlgAry=this.tagAry,this.getTag()),this.tagDlg=!0},addTagType:function(){var t=this;this.tagQuery.cn_name.length>30?this.$message.error("名称长度应限制在30字以内"):""!==this.tagQuery.cn_name?(this.tagQuery.type=2,1==this.tagtype&&Object(l.b)(this.tagQuery).then(function(e){e.data.success&&(t.tagQuery={cn_name:"",content:""},t.$message.success("新增成功"),t.getType())}),2==this.tagtype&&Object(l.a)(this.tagQuery).then(function(e){e.data.success&&(t.tagQuery={cn_name:"",content:""},t.$message.success("新增成功"),t.getTag())})):this.$message.error("请输入名称")},getType:function(){var t=this;Object(l.f)({type:2}).then(function(e){t.subType=e.data,t.tagDlgAry=e.data})},getTag:function(){var t=this;Object(l.e)({type:2}).then(function(e){t.tagAry=e.data,t.tagDlgAry=e.data})},removeSub:function(){var t=this,e={};e.ids=this.ids,this.ids.length<=0||this.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r.d)(e).then(function(e){e.data.success&&(t.$message.success("操作成功"),t.getList())})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},addTopic:function(){this.$router.push({path:"/itemBank/NewAD/addNewAD"})},editTopic:function(t){this.$router.push({path:"/itemBank/NewAD/editNewAD",query:{task_id:t}})},getList:function(t){var e=this;1===t&&(this.listPage=t),this.listQuery.offset=(this.listPage-1)*this.listQuery.limit,Object(r.i)(this.listQuery).then(function(t){var n=t.data;e.matchList=n.rows,e.listTotal=n.total,e.listTotal<=e.listQuery.offset&&0!=e.listTotal&&(e.listQuery.offset=e.listQuery.offset-e.listQuery.limit,e.getList())})},checkTable:function(t){this.ids=t.map(function(t){return t.id})},checkTag:function(t){this.tagIds=t.map(function(t){return t.id})},indexMethod:function(t){return this.listQuery.offset+t+1},handleWp:function(t){var e=t.id;Object(o.c)({url:Object(r.g)(),query:{challenge_id:e}})},handleTestChange:function(t,e){var n=this;t?Object(r.h)(e).then(function(t){t.data.success&&n.$message({type:"success",message:"启动成功"}),n.getList()}):Object(r.f)(e).then(function(t){t.data.success&&n.$message({type:"success",message:"销毁成功"}),n.getList()})},handleCheckTest:function(t){var e=this,n=t.id;Object(r.e)(n).then(function(t){var n=t.data;n.success&&(n.data.url&&(e.diaLogUrl=t.data.data.url,e.diaLogTitle=t.data.data.challenge_name,e.diaLogbool=!0))})}}}),u=(n("1EWs"),n("7DFs"),n("ZrdR")),d=Object(u.a)(c,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("el-select",{staticClass:"filter-item",attrs:{clearable:"",size:"mini",placeholder:"请选择题目类型"},model:{value:t.listQuery.challenge_type,callback:function(e){t.$set(t.listQuery,"challenge_type",e)},expression:"listQuery.challenge_type"}},t._l(t.subType,function(t,e){return n("el-option",{key:e,attrs:{label:t.cn_name,value:t.id}})})),t._v(" "),n("el-select",{staticClass:"filter-item",attrs:{clearable:"",size:"mini",placeholder:"请选择题目标签"},model:{value:t.listQuery.label,callback:function(e){t.$set(t.listQuery,"label",e)},expression:"listQuery.label"}},t._l(t.tagAry,function(t,e){return n("el-option",{key:e,attrs:{label:t.cn_name,value:t.id}})})),t._v(" "),n("el-input",{staticClass:"filter-item",staticStyle:{width:"150px"},attrs:{placeholder:"请输入题目名称",size:"mini"},model:{value:t.listQuery.title,callback:function(e){t.$set(t.listQuery,"title","string"==typeof e?e.trim():e)},expression:"listQuery.title"}}),t._v(" "),n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",size:"mini"},on:{click:function(e){t.getList(1)}}},[t._v("搜索")]),t._v(" "),n("div",{staticStyle:{float:"right"}},[n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",size:"mini"},on:{click:function(e){t.showTagDlg(1)}}},[t._v("题目类型管理")]),t._v(" "),n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",size:"mini"},on:{click:function(e){t.showTagDlg(2)}}},[t._v("题目标签管理")])],1)],1),t._v(" "),n("div",{staticClass:"filter-container"},[n("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.addTopic}},[t._v("新增")]),t._v(" "),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.removeSub}},[t._v("删除")])],1),t._v(" "),n("div",{staticClass:"filter-container"},[n("el-table",{attrs:{data:t.matchList,border:""},on:{"selection-change":t.checkTable}},[n("el-table-column",{attrs:{align:"center",type:"selection"}}),t._v(" "),n("el-table-column",{attrs:{index:t.indexMethod,align:"center",type:"index",width:"50",label:"序号"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"title",label:"题目名称"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"challenge_name",label:"题目类型"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"label_name",label:"题目标签"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"image_name",label:"镜像名称"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"附件"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.zip_file_path?n("a",{attrs:{href:e.row.zip_file_path,download:""}},[n("el-button",{attrs:{type:"warning",size:"mini"}},[t._v("下载")])],1):n("span",[t._v("无")])]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"WriteUp"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.wp_official?n("a",{attrs:{href:e.row.wp_official,download:""}},[n("el-button",{attrs:{type:"warning",size:"mini"}},[t._v("下载")])],1):n("span",[t._v("无")])]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",width:"150px",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"mini",type:"success"},on:{click:function(n){t.editTopic(e.row.id)}}},[t._v("编辑")])]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",width:"150px",label:"测试"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-switch",{attrs:{size:"mini"},on:{change:function(n){t.handleTestChange(n,e.row.id)}},model:{value:e.row.test_status,callback:function(n){t.$set(e.row,"test_status",n)},expression:"scope.row.test_status"}}),t._v(" "),n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticStyle:{"margin-left":"10px"},attrs:{disabled:!e.row.test_status,size:"mini",type:"primary"},on:{click:function(n){t.handleCheckTest(e.row)}}},[t._v("查看")])]}}])})],1)],1),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.listTotal>0,expression:"listTotal > 0"}],attrs:{total:t.listTotal,page:t.listPage,limit:t.listQuery.limit},on:{"update:page":function(e){t.listPage=e},"update:limit":function(e){t.$set(t.listQuery,"limit",e)},pagination:t.getList}}),t._v(" "),n("el-dialog",{attrs:{title:t.digTitle,visible:t.tagDlg,width:"780px"},on:{"update:visible":function(e){t.tagDlg=e},close:t.closetagDlg}},[n("el-form",{ref:"form",attrs:{"label-width":"0px"}},[n("el-form-item",{attrs:{label:""}},[n("el-col",{attrs:{span:12}},[n("el-input",{attrs:{clearable:"",placeholder:"请输入名称"},model:{value:t.tagQuery.cn_name,callback:function(e){t.$set(t.tagQuery,"cn_name","string"==typeof e?e.trim():e)},expression:"tagQuery.cn_name"}})],1),t._v(" "),n("el-col",{staticStyle:{"margin-left":"30px"},attrs:{span:4}},[n("el-button",{attrs:{type:"success"},on:{click:t.addTagType}},[t._v("新增 ")])],1)],1)],1),t._v(" "),n("div",{staticStyle:{border:"1px solid rgb(240, 249, 235)"}},t._l(t.tagDlgAry,function(e){return n("el-tag",{key:e.id,staticClass:"mytag",staticStyle:{margin:"8px 20px",background:"#fff","border-color":"rgb(220, 220, 220)","border-radius":"43px"},attrs:{closable:"",size:"mini"},on:{close:function(n){t.removeTagType(e.id)}}},[n("el-tooltip",{staticClass:"item",attrs:{content:e.cn_name,effect:"dark",placement:"top-start"}},[n("div",{staticStyle:{display:"inline-block",width:"80px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","font-size":"14px"}},[t._v("\n            "+t._s(e.cn_name)+"\n          ")])])],1)}))],1),t._v(" "),n("el-dialog",{attrs:{visible:t.diaLogbool,title:"题目测试信息",width:"600px"},on:{"update:visible":function(e){t.diaLogbool=e},close:t.diaLogClose}},[n("div",{staticStyle:{"font-size":"16px","margin-left":"50px"}},[n("div",[t._v("题目名称："+t._s(t.diaLogTitle))]),t._v(" "),n("div",{staticStyle:{"margin-top":"30px"}},[t._v("\n        地址：\n        "),n("a",{attrs:{href:t.diaLogUrl,target:"view_window"}},[n("el-button",{staticStyle:{"margin-left":"30px"},attrs:{size:"mini",type:"primary"}},[t._v("登录控制台")])],1)])]),t._v(" "),n("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.diaLogClose}},[t._v("关闭")])],1)])],1)},[],!1,null,"cd0fd390",null);d.options.__file="index.vue";e.default=d.exports},tMPC:function(t,e,n){},z0WU:function(t,e,n){"use strict";n.d(e,"e",function(){return r}),n.d(e,"d",function(){return l}),n.d(e,"b",function(){return o}),n.d(e,"c",function(){return u}),n.d(e,"a",function(){return g});n("6ZY3"),n("+XIM"),n("LGhb");var a=n("Q2cO"),i=n.n(a),s=n("twWv");function r(t,e){if(0===arguments.length)return null;var n=e||"{y}-{m}-{d} {h}:{i}:{s}",a=void 0;"object"===(void 0===t?"undefined":i()(t))?a=t:("string"==typeof t&&/^[0-9]+$/.test(t)&&(t=parseInt(t)),"number"==typeof t&&10===t.toString().length&&(t*=1e3),a=new Date(t));var s={y:a.getFullYear(),m:a.getMonth()+1,d:a.getDate(),h:a.getHours(),i:a.getMinutes(),s:a.getSeconds(),a:a.getDay()};return n.replace(/{([ymdhisa])+}/g,function(t,e){var n=s[e];return"a"===e?["日","一","二","三","四","五","六"][n]:n.toString().padStart(2,"0")})}function l(t){var e=0;return t=t.split("."),e=256*Number(t[0])*256*256+256*Number(t[1])*256+256*Number(t[2])+Number(t[3]),e>>>=0}function o(t,e,n){var a,i,s;a=t.split("."),i=e.split("."),s=n.split(".");var r="",l="",o="",c=0;for(c=0;c<4;c++){var u,d,g;u=parseInt(a[c]).toString(2),d=parseInt(i[c]).toString(2),g=parseInt(s[c]).toString(2);var f=void 0;for(f=0;f<8-u.length;f++)r+="0";for(r+=u,f=0;f<8-d.length;f++)l+="0";for(l+=d,f=0;f<8-g.length;f++)o+="0";o+=g}var p,m,h,v=o.length;for(p=r.split(""),m=l.split(""),h=o.split(""),c=0;c<v;c++)if("1"===h[c]&&p[c]!==m[c])return!1;return!0}function c(t,e){var n=document.createElement("a");n.download=e||(new Date).getTime(),n.style.display="none",n.href=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}function u(t,e){c(function(t){var e=t.url,n=t.query;if(!e)return"";if(n){var a=[];for(var i in n)n.hasOwnProperty(i)&&a.push(i+"="+n[i]);e=-1!==e.indexOf("?")?e+"&"+a.join("&"):e+"?"+a.join("&")}return e}({url:t.url,query:t.query}),e)}function d(t,e){var n=t.headers["content-disposition"].split("="),a=n[n.length-1].replace(/"/g,"").replace(/UTF-8''/g,"");a=decodeURI(a);var i=URL.createObjectURL(t.data);c(i,e||a),URL.revokeObjectURL(i)}function g(t,e){var n=t.data,a=n.type.split("/");if("json"===a[a.length-1]){var i=new FileReader;i.readAsText(n),i.onload=function(){var n=JSON.parse(this.result);if(!1===n.success){var a=n.message||n.message_zh;Object(s.Message)({type:"error",message:a})}else d(t,e)}}else d(t,e)}}}]);
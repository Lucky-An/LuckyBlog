(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-e9db"],{"+f4d":function(t,e,a){},"/HCn":function(t,e,a){"use strict";a.r(e);var n=a("Mz3J"),i=a("ZySA"),s=a("CquO"),r={name:"TopicManagement",directives:{waves:i.a},components:{Pagination:n.a},data:function(){return{id:this.$route.query.id,newscore:"",subType:[],subTag:[],textarea:"",addDlg:!1,choseDown:!1,diaFlag:!1,fileList:[],flagList:[],downList:[],subData:[],matchList:[],ids:[],tableKey:0,listTotal:0,subTotal:0,listLoading:!1,topicQuery:{offset:1,limit:this.$store.state.config.row,tag:"",category:"",title:"",event:this.$route.query.id},importData:{event:this.$route.query.id,hashs:[]},listQuery:{offset:0,limit:this.$store.state.config.row,event:this.$route.query.id,search:"",public:"",type:""},showInput:-1,is_share:!1,integral_mode:""}},created:function(){var t=this;Object(s.U)({evt_hash:this.$route.query.hash}).then(function(e){t.is_share=e.data.is_share,t.integral_mode=e.data.integral_mode}),this.getList(),this.getType()},methods:{sureImportJeopardy:function(){var t=this;Object(s.eb)(this.importData).then(function(e){e.data.success&&(t.addDlg=!1,t.getList())})},handleChange:function(t){this.importData.hashs=t.map(function(t){return t.hash})},showtopic:function(){this.addDlg=!0,this.getTag(),this.getImportList()},getImportList:function(){var t=this;Object(s.w)(this.topicQuery).then(function(e){t.subData=e.data.rows,t.subTotal=e.data.total})},removeSub:function(){var t=this,e={};e.ids=this.ids,e.event=this.id,this.ids.length<=0||this.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.m)(e).then(function(e){e.data.success&&(t.$message.success("操作成功"),t.getList())})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},publicSub:function(){var t=this,e={};e.ids=this.ids,e.public=1,Object(s.Y)(e).then(function(e){e.data.success&&(t.$message.success("操作成功"),t.getList())})},hideSUb:function(){var t=this,e={};e.ids=this.ids,e.public=0,Object(s.Y)(e).then(function(e){e.data.success&&(t.$message.success("操作成功"),t.getList())})},closeDown:function(){this.fileList=[],this.downList=[]},showDownload:function(t){this.choseDown=!0,this.fileList=t},download:function(){this.downList.forEach(function(t){window.location.href=t}),this.choseDown=!1},addTopic:function(){this.$router.push({path:"/competition/jeopardy/operation/addTopic",query:{id:this.$route.query.id}})},editTopic:function(t){this.$router.push({path:"/competition/jeopardy/operation/editTopic",query:{id:this.$route.query.id,hash:this.$route.query.hash,task_id:t}})},getType:function(){var t=this;Object(s.H)().then(function(e){t.subType=e.data})},getTag:function(){var t=this;Object(s.A)().then(function(e){t.subTag=e.data})},getList:function(t){var e=this;Object(s.D)(this.listQuery).then(function(t){var a=t.data;e.matchList=a.rows,e.listTotal=a.total})},checkTable:function(t){this.ids=t.map(function(t){return t.id})}}},o=(a("V1+z"),a("ZrdR")),l=Object(o.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-select",{staticClass:"filter-item",attrs:{size:"mini",placeholder:"请选择题目类型",clearable:""},model:{value:t.listQuery.type,callback:function(e){t.$set(t.listQuery,"type",e)},expression:"listQuery.type"}},t._l(t.subType,function(t,e){return a("el-option",{key:e,attrs:{label:t.cn_name,value:t.id}})})),t._v(" "),a("el-select",{staticClass:"filter-item",attrs:{size:"mini",placeholder:"请选择题目状态",clearable:""},model:{value:t.listQuery.public,callback:function(e){t.$set(t.listQuery,"public",e)},expression:"listQuery.public"}},[a("el-option",{attrs:{value:1,label:"公开"}}),t._v(" "),a("el-option",{attrs:{value:0,label:"隐藏"}})],1),t._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"150px"},attrs:{placeholder:"请输入题目名称",size:"mini"},model:{value:t.listQuery.search,callback:function(e){t.$set(t.listQuery,"search","string"==typeof e?e.trim():e)},expression:"listQuery.search"}}),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",size:"mini"},on:{click:t.getList}},[t._v("搜索\n    ")])],1),t._v(" "),a("div",{staticClass:"filter-container"},[a("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.showtopic}},[t._v("\n      导入题目")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.removeSub}},[t._v(" 删除")]),t._v(" "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.publicSub}},[t._v("\n      题目公开")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.hideSUb}},[t._v("\n      题目隐藏")])],1),t._v(" "),a("div",{staticClass:"filter-container"},[a("el-table",{key:t.tableKey,ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.matchList,border:"",fit:"","highlight-current-row":"","tooltip-effect":"dark"},on:{"selection-change":t.checkTable}},[a("el-table-column",{attrs:{align:"center",type:"selection"}}),t._v(" "),a("el-table-column",{attrs:{index:(t.listQuery.offset-1)*t.listQuery.limit+1,align:"center",type:"index",width:"50",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"title",label:"题目名称"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"category_cn_name",label:"题目类型"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"score",label:"题目分值"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"附件"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.file.length>0?a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"mini",type:"warning"},on:{click:function(a){t.showDownload(e.row)}}},[t._v("下载附件\n          ")]):a("span",[t._v("无")])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"题目环境"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.is_dynamic_env?a("span",[0==e.row.is_share?a("span",[t._v("独享")]):t._e(),t._v(" "),1==e.row.is_share?a("span",[t._v("共享")]):t._e()]):a("span",[t._v("无")])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"public",label:"公开/隐藏"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.public?a("span",[t._v("隐藏")]):t._e(),t._v(" "),1==e.row.public?a("span",[t._v("公开")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"solved_count",label:"解题次数"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"mini",type:"success"},on:{click:function(a){t.editTopic(e.row.id)}}},[t._v("编辑\n          ")])]}}])})],1)],1),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.listTotal>0,expression:"listTotal > 0"}],attrs:{total:t.listTotal,page:t.listQuery.offset,limit:t.listQuery.limit},on:{"update:page":function(e){t.$set(t.listQuery,"offset",e)},"update:limit":function(e){t.$set(t.listQuery,"limit",e)},pagination:t.getList}}),t._v(" "),a("el-dialog",{staticClass:"addsub",attrs:{visible:t.addDlg,title:"加入题目",width:"900px"},on:{"update:visible":function(e){t.addDlg=e}}},[a("div",{staticStyle:{"margin-bottom":"20px"}},[a("el-select",{staticClass:"filter-item",attrs:{size:"mini",placeholder:"请选择题目标签"},model:{value:t.topicQuery.tag,callback:function(e){t.$set(t.topicQuery,"tag",e)},expression:"topicQuery.tag"}},t._l(t.subTag,function(t,e){return a("el-option",{key:e,attrs:{label:t.cn_name,value:t.id}})})),t._v(" "),a("el-select",{staticClass:"filter-item",attrs:{size:"mini",placeholder:"请选择题目类型"},model:{value:t.topicQuery.category,callback:function(e){t.$set(t.topicQuery,"category",e)},expression:"topicQuery.category"}},t._l(t.subType,function(t,e){return a("el-option",{key:e,attrs:{label:t.cn_name,value:t.id}})})),t._v(" "),a("div",{staticStyle:{float:"right"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"150px"},attrs:{placeholder:"请输入题目名称",size:"mini"},model:{value:t.topicQuery.title,callback:function(e){t.$set(t.topicQuery,"title","string"==typeof e?e.trim():e)},expression:"topicQuery.title"}}),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",size:"mini"},on:{click:t.getImportList}},[t._v("搜索\n        ")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.subData,border:""},on:{"selection-change":t.handleChange}},[a("el-table-column",{attrs:{align:"center",type:"selection"}}),t._v(" "),a("el-table-column",{attrs:{index:(t.topicQuery.offset-1)*t.topicQuery.limit+1,align:"center",type:"index",width:"50",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",align:"center",label:"题目名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"tag_cn_name",align:"center",label:"题目标签"}}),t._v(" "),a("el-table-column",{attrs:{prop:"category_cn_name",align:"center",label:"题目类型"}})],1),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.subTotal>0,expression:"subTotal > 0"}],attrs:{total:t.subTotal,page:t.topicQuery.offset,limit:t.topicQuery.limit},on:{"update:page":function(e){t.$set(t.topicQuery,"offset",e)},"update:limit":function(e){t.$set(t.topicQuery,"limit",e)},pagination:t.getImportList}}),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.sureImportJeopardy}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:function(e){t.addDlg=!1}}},[t._v("取 消")])],1)],1),t._v(" "),a("el-dialog",{staticClass:"addsub",attrs:{visible:t.choseDown,title:"下载附件",width:"900px"},on:{"update:visible":function(e){t.choseDown=e},close:t.closeDown}},[t.fileList.file?[a("el-row",{staticStyle:{"padding-left":"50px","font-size":"18px"}},[a("el-col",{attrs:{span:3}},[t._v(" 题目名称： ")]),t._v(" "),a("el-col",{attrs:{span:8}},[t._v("\n          "+t._s(t.fileList.title)+"\n        ")])],1),t._v(" "),t.fileList.file.length<2?a("el-row",{staticStyle:{"padding-left":"50px","font-size":"18px",margin:"50px 0","line-height":"28px"}},[a("el-col",{attrs:{span:3}},[t._v(" 附件名称： ")]),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{content:t.fileList.file[0].split("/")[t.fileList.file[0].split("/").length-1],effect:"dark",placement:"top-start"}},[a("el-col",{staticClass:"threePoint",attrs:{span:6}},[t._v("\n            "+t._s(t.fileList.file[0].split("/")[t.fileList.file[0].split("/").length-1])+"\n          ")])],1),t._v(" "),a("a",{staticStyle:{"margin-left":"50px"},attrs:{href:t.fileList.file[0],download:""}},[a("el-button",{attrs:{type:"primary",size:"mini"}},[t._v(" 下载 ")])],1)],1):t._l(t.fileList.file,function(e,n){return a("el-row",{key:n,staticStyle:{"padding-left":"50px","font-size":"18px",margin:"30px 0","line-height":"28px"}},[a("el-col",{attrs:{span:3}},[t._v(" 附件"+t._s(n+1)+"名称： ")]),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{content:e.split("/")[e.split("/").length-1],effect:"dark",placement:"top-start"}},[a("el-col",{staticClass:"threePoint",attrs:{span:6}},[t._v("\n            "+t._s(e.split("/")[e.split("/").length-1])+"\n          ")])],1),t._v(" "),a("a",{staticStyle:{"margin-left":"50px"},attrs:{href:e,download:""}},[a("el-button",{attrs:{type:"primary",size:"mini"}},[t._v(" 下载 ")])],1)],1)})]:t._e()],2),t._v(" "),a("el-dialog",{staticClass:"addsub",attrs:{visible:t.diaFlag,title:"查看flag",width:"900px"},on:{"update:visible":function(e){t.diaFlag=e},close:t.closeDown}},t._l(t.flagList,function(e){return a("p",{key:e},[t._v(t._s(e))])}))],1)},[],!1,null,"120f991a",null);l.options.__file="index.vue";var c=l.exports,u=a("2cRn"),d={name:"MatchStatus",data:function(){return{matchStatus:{1:"未开始",2:"暂停中",3:"进行中",4:"已结束"},id:this.$route.query.id,hash:this.$route.query.hash,matchInfo:{},process:"",is_share:"",query:{vpn_status:1,status:1},event_mode:""}},created:function(){var t=this;this.getList(),Object(s.x)(this.$route.query.id).then(function(e){t.event_mode=e.data.event_mode})},methods:{handleRemovevpnDeploy:function(){var t=this;this.$confirm("确定回收VPN吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(u.e)(t.$route.query.id).then(function(e){e.data.success&&(t.$message.success("回收成功"),t.getList())})}).catch(function(){t.$message({type:"info",message:"已取消回收"})})},handlevpnDeploy:function(){var t=this;Object(u.g)(this.$route.query.id).then(function(e){e.data.success&&(t.$message.success("部署成功"),t.matchInfo.vpn_deploy_status=!1,t.getList())})},handleApply:function(){var t=this;Object(u.h)(this.$route.query.id).then(function(e){e.data.success&&(t.$message.success("证书申请成功"),t.getList())})},vpnfun:function(){var t=this;Object(u.a)(this.$route.query.id,this.matchInfo.vpn_status).then(function(e){e.data.success&&t.getList()})},clearData:function(){var t=this;this.$confirm("确定要清除比赛数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.f)({evt_hash:t.hash}).then(function(e){e.data.success&&t.$message.success("操作成功")})}).catch(function(){t.$message({type:"info",message:"已取消清除"})})},initFictitious:function(){var t=this;this.$confirm("确定要初始化虚拟数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.Q)({event_id:t.id}).then(function(e){e.data.success&&t.$message.success("操作成功")})}).catch(function(){t.$message({type:"info",message:"已取消清除"})})},initNet:function(){var t=this;Object(s.R)(this.id).then(function(e){e.data.success&&t.$message.success("操作成功")})},getList:function(){var t=this;Object(s.U)({evt_hash:this.hash}).then(function(e){for(var a in t.query)t.query[a]=e.data.data[a];t.matchInfo=e.data.data,t.process=e.data.data.process})},submitForm:function(){var t=this;Object(s.ib)({evt_hash:this.hash},this.query).then(function(e){e.data.success&&(t.$message.success("操作成功"),t.getList())})},handleSwitch:function(t,e){var a=this;this.$confirm("确定要"+e+"吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.query.status=t,a.submitForm()}).catch(function(){a.$message({type:"info",message:"已取消清除"})})},taskControl:function(t){var e=this;this.$confirm("确定要"+t+"吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={};"开始比赛"===t?a.start=1:a.end=1,Object(s.ib)({evt_hash:e.hash},a).then(function(t){t.data.success&&(e.$message.success("操作成功"),e.getList())})}).catch(function(){e.$message({type:"info",message:"已取消清除"})})}}},p=(a("DSSf"),Object(o.a)(d,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-form",{attrs:{"label-width":"190px"}},[a("el-form-item",{attrs:{label:"竞赛状态"}},[1===t.matchInfo.process?a("span",[t._v("未开始")]):t._e(),t._v(" "),0===t.matchInfo.process?a("span",[t._v("\n        "+t._s(t.matchStatus[t.matchInfo.status])+"\n      ")]):t._e(),t._v(" "),2===t.matchInfo.process?a("span",[t._v("已结束")]):t._e()]),t._v(" "),1==t.event_mode?a("el-form-item",{attrs:{label:"VPN部署"}},[1==t.matchInfo.vpn_deploy_status?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.handlevpnDeploy}},[t._v("部署")]):t._e(),t._v(" "),1!=t.matchInfo.vpn_deploy_status?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.handleRemovevpnDeploy}},[t._v("回收")]):t._e(),t._v(" "),1!=t.matchInfo.vpn_deploy_status?a("el-switch",{on:{change:function(e){t.vpnfun()}},model:{value:t.matchInfo.vpn_join,callback:function(e){t.$set(t.matchInfo,"vpn_join",e)},expression:"matchInfo.vpn_join"}}):t._e(),t._v(" "),2==t.matchInfo.vpn_deploy_status?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleApply}},[t._v("申请证书")]):t._e()],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"竞赛控制"}},[1==t.process?a("span",[2==t.query.status?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){t.taskControl("开始比赛")}}},[t._v("开始比赛")]):a("span",[t._v("未开始")])],1):0==t.process?a("span",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:2==t.query.status,expression:"query.status==2"}],attrs:{type:"success",size:"mini"},on:{click:function(e){t.handleSwitch(1,"继续比赛")}}},[t._v("继续比赛")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:3==t.query.status,expression:"query.status==3"}],attrs:{type:"danger",size:"mini"},on:{click:function(e){t.handleSwitch(2,"暂停比赛")}}},[t._v("暂停比赛")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){t.taskControl("结束比赛")}}},[t._v("结束比赛")])],1):a("span",[t._v("已结束")])]),t._v(" "),a("el-form-item",{attrs:{label:"网络控制"}},[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.initNet}},[t._v("初始化网络")]),t._v("\n       竞赛开始前，一定要先初始化网络，否则无法正常比赛。\n    ")],1),t._v(" "),a("el-form-item",{attrs:{label:"竞赛数据管理"}},[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.clearData}},[t._v("清除比赛数据")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.initFictitious}},[t._v("初始化虚拟数据")])],1)],1)],1)},[],!1,null,"764052d8",null));p.options.__file="matchStatus.vue";var v=p.exports,m={name:"Index",directives:{waves:i.a},components:{Pagination:n.a},data:function(){return{params:{event_id:this.$route.query.id},monitorData:{evt_hash:this.$route.query.hash,id:"",task_id:"",search:"",per_page:10,page:1},matchList:[],teamList:[],topicList:[],listTotal:0,listPage:1,scorePage:1,scoreQuery:{order:"asc",event:"",user:""},listQuery:{offset:0,limit:this.$store.state.config.row,search:"",order:"asc",event:this.$route.query.id},lookFlagData:{name:"",flag:""},showFlag:!1}},created:function(){this.getList(),this.getTopic(),this.getTeam()},methods:{resetFlag:function(){this.lookFlagData={name:"",flag:""}},lookFlag:function(t){this.showFlag=!0,this.lookFlagData.name=t.title,this.lookFlagData.flag=t.flag},lookRemote:function(t){window.open(t.lvp_remote_desktop)},getTopic:function(){var t=this;Object(s.J)({evt_hash:this.$route.query.hash}).then(function(e){t.topicList=e.data.data})},getTeam:function(){var t=this;Object(s.I)({evt_hash:this.$route.query.hash}).then(function(e){t.teamList=e.data.data})},indexMethod:function(t){return(this.listPage-1)*this.listQuery.limit+t+1},handleSelectionChange:function(t){this.userId=t},getList:function(t){var e=this;"number"==typeof t&&(this.monitorData.page=t),Object(s.K)(this.monitorData).then(function(t){!1!==t.data.success&&(e.matchList=t.data.data)})}}},h=(a("ruBo"),Object(o.a)(m,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-select",{staticStyle:{"vertical-align":"top"},attrs:{clearable:"",size:"mini",placeholder:"请选择题目名称"},model:{value:t.monitorData.task_id,callback:function(e){t.$set(t.monitorData,"task_id",e)},expression:"monitorData.task_id"}},t._l(t.topicList,function(t){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.title}})})),t._v(" "),a("el-select",{staticStyle:{"vertical-align":"top"},attrs:{clearable:"",size:"mini",placeholder:"请选择选手名称"},model:{value:t.monitorData.id,callback:function(e){t.$set(t.monitorData,"id",e)},expression:"monitorData.id"}},t._l(t.teamList,function(t,e){return a("el-option",{key:e,attrs:{value:t.obj_id,label:t.obj_name}})})),t._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入选手名称",size:"mini"},model:{value:t.monitorData.search,callback:function(e){t.$set(t.monitorData,"search","string"==typeof e?e.trim():e)},expression:"monitorData.search"}}),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",size:"mini"},on:{click:function(e){t.getList(1)}}},[t._v("搜索\n    ")])],1),t._v(" "),a("div",{staticClass:"filter-container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.matchList,border:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{index:t.indexMethod,align:"center",width:"50px",label:"序号",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"name",label:"选手名称"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"title",label:"题目名称"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"image_name",label:"题目镜像"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"expose_ip",width:"100",label:"题目IP"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"solved_count",label:"Flag类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(0==e.row.flag_type?"静态":1==e.row.flag_type?"动态":"随机"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"solved_count",label:"Flag查看"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{disabled:!e.row.flag,size:"mini",type:"success"},on:{click:function(a){t.lookFlag(e.row)}}},[t._v("查看")])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"is_solved",width:"100",label:"解答状态"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"solved_count",label:"远程监控"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{disabled:!e.row.lvp_remote_desktop,size:"mini",type:"primary"},on:{click:function(a){t.lookRemote(e.row)}}},[t._v("查看")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"footer"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.listTotal>0,expression:"listTotal > 0"}],attrs:{total:t.listTotal,page:t.monitorData.page,limit:t.monitorData.per_page},on:{"update:page":function(e){t.$set(t.monitorData,"page",e)},"update:limit":function(e){t.$set(t.monitorData,"per_page",e)},pagination:t.getList}})],1),t._v(" "),a("el-dialog",{attrs:{visible:t.showFlag,title:"查看Flag",width:"30%"},on:{"update:visible":function(e){t.showFlag=e},close:t.resetFlag}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"题目名称:"}},[a("span",[t._v(t._s(t.lookFlagData.name))])]),t._v(" "),a("el-form-item",{attrs:{label:"Flag:"}},[a("span",[t._v(t._s(t.lookFlagData.flag))])])],1)],1)],1)},[],!1,null,"4d258c12",null));h.options.__file="index.vue";var f=h.exports,b={name:"MatchNotice",directives:{waves:i.a},components:{Pagination:n.a},data:function(){return{addQuery:{event_id:this.$route.query.id,notice:""},event_task:[],task_id:"",diaTitle:"",noticeId:!1,addDlg:!1,ids:[],matchList:[],topicList:[],topic:"",noiceType:1,tableKey:0,total:1,page:1,listQuery:{page:0,per_page:this.$store.state.config.row,evt_hash:this.$route.query.hash}}},created:function(){this.getList()},methods:{topJeopardyNoice:function(t){var e=this;if(0==this.ids.length)return!1;var a={ids:this.ids,is_topped:t};1===this.noiceType?Object(s.fb)(a).then(function(t){t.data.success&&(e.$message.success("操作成功"),e.getList(),e.ids=[])}):Object(s.gb)(a).then(function(t){t.data.success&&(e.$message.success("操作成功"),e.getList(),e.ids=[])})},romoveNoice:function(){var t=this,e={ids:this.ids};this.ids.length<=0||this.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){1===t.noiceType?Object(s.Z)(e).then(function(e){e.data.success&&(t.$message.success("删除成功"),t.getList(),t.ids=[])}):Object(s.ab)(e).then(function(e){e.data.success&&(t.$message.success("删除成功"),t.getList(),t.ids=[])})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleType:function(){this.ids=[],this.listQuery.page=1,this.getList()},submitNotice:function(){this.noticeId?1===this.noiceType?this.updateJeopardyNoice():this.updateJeopardyTIP():1===this.noiceType?this.addJeopardyNoice():this.addJeopardyTIP()},updateJeopardyNoice:function(){var t=this;Object(s.hb)({notice_id:this.noticeId},this.addQuery).then(function(e){e.data.success&&(t.$message.success("修改成功"),t.getList(),t.addDlg=!1,t.noticeId="")})},updateJeopardyTIP:function(){var t=this;Object(s.jb)({notice_id:this.noticeId},this.addQuery).then(function(e){e.data.success&&(t.$message.success("修改成功"),t.getList(),t.addDlg=!1,t.noticeId="")})},addJeopardyTIP:function(){var t=this,e=this.addQuery;e.task_id=this.task_id,Object(s.d)(e).then(function(e){e.data.success&&(t.$message.success("新增成功"),t.getList(),t.addDlg=!1)})},addJeopardyNoice:function(){var t=this;Object(s.c)(this.addQuery).then(function(e){e.data.success&&(t.$message.success("新增成功"),t.getList(),t.addDlg=!1)})},showDlg:function(){this.diaTitle="新增公告",2!==this.noiceType||this.task_id?(2===this.noiceType&&(this.diaTitle="新增题目提示"),this.addDlg=!0):this.$alert("请选择题目","警告",{confirmButtonText:"确定"})},getList:function(){1===this.noiceType?this.getNoiceList():(this.getTopicList(),this.getTipList())},remove:function(t){this.ids=[t.id],this.romoveNoice()},editNoice:function(t){this.noticeId=t.id,1===this.noiceType?(this.diaTitle="编辑公告",this.addQuery.notice=t.notice,this.addQuery.event_id=t.event_id):(this.diaTitle="编辑题目提示",this.addQuery.notice=t.notice,this.addQuery.event_id=t.event_id),this.addDlg=!0},getTopicList:function(){var t=this;Object(s.J)({evt_hash:this.$route.query.hash}).then(function(e){t.topicList=e.data.data})},getNoiceList:function(){var t=this;Object(s.z)(this.listQuery).then(function(e){var a=e.data;t.matchList=a.data,t.total=a.total})},getTipList:function(){var t=this;Object(s.C)(this.listQuery).then(function(e){t.matchList=e.data.data,t.total=e.data.total})},checkTable:function(t){this.ids=t.map(function(t){return t.id})},closeDiglog:function(){this.textarea="",this.noticeId="",this.addQuery.notice=""},indexMethod:function(t){return(this.listQuery.page-1)*this.listQuery.per_page+t+1}}},_=(a("VNI4"),Object(o.a)(b,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-select",{attrs:{size:"mini",placeholder:"竞赛公告"},on:{change:t.handleType},model:{value:t.noiceType,callback:function(e){t.noiceType=e},expression:"noiceType"}},[a("el-option",{attrs:{value:1,label:"竞赛公告"}}),t._v(" "),a("el-option",{attrs:{value:2,label:"题目提示"}})],1),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:2===t.noiceType,expression:"noiceType === 2"}],staticStyle:{display:"inline-block","margin-left":"10px","font-size":"14px"}},[t._v("\n      请选择题目:\n      "),a("el-select",{attrs:{size:"mini",placeholder:"请选择题目名称"},model:{value:t.task_id,callback:function(e){t.task_id=e},expression:"task_id"}},t._l(t.topicList,function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}))],1)],1),t._v(" "),a("div",{staticClass:"filter-container"},[a("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.showDlg}},[t._v(" 新增")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.romoveNoice}},[t._v("\n      删除")]),t._v(" "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){t.topJeopardyNoice(1)}}},[t._v("\n      置顶")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){t.topJeopardyNoice(0)}}},[t._v("\n      取消置顶")])],1),t._v(" "),a("div",{staticClass:"filter-container"},[a("el-table",{key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.matchList,border:""},on:{"selection-change":t.checkTable}},[a("el-table-column",{attrs:{align:"center",type:"selection"}}),t._v(" "),a("el-table-column",{attrs:{index:t.indexMethod,align:"center",type:"index",width:"50",label:"序号"}}),t._v(" "),2===t.noiceType?a("el-table-column",{attrs:{align:"center",prop:"event_task",label:"题目名称",width:"200"}}):t._e(),t._v(" "),a("el-table-column",{attrs:{label:2===t.noiceType?"题目提示":"竞赛公告",prop:"notice"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"jointype",label:"是否置顶",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(0==e.row.is_topped?"否":"是"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"create_time",label:"发布时间",width:"200px"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:"success"},on:{click:function(a){t.editNoice(e.row)}}},[t._v("编辑\n          ")]),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:"danger"},on:{click:function(a){t.remove(e.row)}}},[t._v("删除\n          ")])]}}])})],1)],1),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.per_page},on:{"update:page":function(e){t.$set(t.listQuery,"page",e)},"update:limit":function(e){t.$set(t.listQuery,"per_page",e)},pagination:t.getList}}),t._v(" "),a("el-dialog",{attrs:{visible:t.addDlg},on:{"update:visible":function(e){t.addDlg=e},close:t.closeDiglog}},[a("span",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.diaTitle))]),t._v(" "),a("el-input",{attrs:{rows:4,type:"textarea",placeholder:"请输入内容"},model:{value:t.addQuery.notice,callback:function(e){t.$set(t.addQuery,"notice",e)},expression:"addQuery.notice"}}),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.submitNotice}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:function(e){t.addDlg=!1}}},[t._v("取 消")])],1)],1)],1)},[],!1,null,"21ca7ccd",null));_.options.__file="matchNoice.vue";var g=_.exports,y=a("z0WU"),w={name:"UserManagement",directives:{waves:i.a},components:{Pagination:n.a},data:function(){return{banDia:!1,reason:"",form:{cheat_log:"",id:""},banRules:{cheat_log:[{max:500,message:"最长为500个字",trigger:"blur"}]},scoreDlg:!1,playerName:"",reward_score:{reward_reason:"",reward_score:0,obj_id:"",evt_hash:this.$route.query.hash},reasonDlg:!1,id:this.$route.query.id,scoreDig:!1,scoreList:[],matchList:[],rewardScoreList:[],userId:[],listTotal:0,mode:null,scoreQuery:{evt_hash:this.$route.query.hash,obj_id:""},groupList:[],usergroups:[],listQuery:{page:0,per_page:this.$store.state.config.row,search:"",evt_hash:this.$route.query.hash},isToekn:!1,Token:""}},created:function(){this.getList()},methods:{showToken:function(t){this.isToekn=!0,this.Token=t},close:function(){this.form={cheat_log:"",id:""},this.banDia=!1},showBanDia:function(t){this.banDia=!0,this.form.id=t.signup_id},showRewardScore:function(t){var e=this,a={obj_id:t.obj_id||this.reward_score.obj_id,evt_hash:this.listQuery.evt_hash};Object(s.F)(a).then(function(a){a.data.success&&(e.scoreDlg=!0,e.playerName=t.obj_name,e.reward_score.obj_id=t.obj_id||e.reward_score.obj_id,e.rewardScoreList=a.data.data)})},submitScore:function(){var t=this;Object(s.db)(this.reward_score).then(function(e){e.data.success&&(t.reward_score.reward_reason="",t.reward_score.reward_score=0,t.$message.success("操作成功"),t.showRewardScore(1))})},showResion:function(t){this.reason=t,this.reasonDlg=!0},indexMethod:function(t){return(this.listQuery.page-1)*this.listQuery.per_page+t+1},handleSelectionChange:function(t){this.userId=t},showScore:function(t){var e=this;t&&(this.scoreQuery.obj_id=t.obj_id),Object(s.M)(this.scoreQuery).then(function(t){e.scoreList=t.data.data,e.scoreDig=!0})},invalid:function(t,e){var a=this,n={status:e,answer_id:t};Object(s.T)(n).then(function(t){a.showScore()})},banMatch:function(t,e){var a=this,n={status:e,sign_id:t,evt_hash:this.listQuery.evt_hash};2==e&&(""==this.form.cheat_log&&(this.form.cheat_log="未添加禁赛原因"),n.cheat_log=this.form.cheat_log),Object(s.e)(n).then(function(t){a.close(),a.listTotal=1,a.getList()})},getList:function(){var t=this;Object(s.L)(this.listQuery).then(function(e){t.matchList=e.data.data,t.listTotal=e.data.total})},checkTable:function(){},handleExport:function(){Object(s.s)({evt_hash:this.listQuery.evt_hash}).then(function(t){Object(y.a)(t)})}}},j=(a("wxWJ"),Object(o.a)(w,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"150px"},attrs:{placeholder:"请输入选手名称",size:"mini"},model:{value:t.listQuery.search,callback:function(e){t.$set(t.listQuery,"search","string"==typeof e?e.trim():e)},expression:"listQuery.search"}}),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",size:"mini"},on:{click:t.getList}},[t._v("搜索")]),t._v(" "),a("div",{staticClass:"fr"},[a("el-button",{attrs:{type:"warning",size:"mini"},on:{click:t.handleExport}},[t._v("导出全部WP")])],1)],1),t._v(" "),a("div",{staticClass:"filter-container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.matchList,border:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{index:t.indexMethod,align:"center",width:"50px",label:"序号",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"obj_name",label:"选手名称"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"solved_count",label:"解题数"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"status",label:"账户状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(1==e.row.status?"正常":"禁赛"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",width:"100",label:"WP上传状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.writeup?"已上传":"未上传")+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",width:"160",label:"WriteUp"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.writeup?a("div",[a("a",{staticClass:"filter-item",attrs:{href:e.row.writeup,download:""}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:"primary"}},[t._v(" 下载 ")])],1)]):a("div",[t._v("无")])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"status",label:"作弊信息"},scopedSlots:t._u([{key:"default",fn:function(e){return[1!=e.row.status?a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){t.showResion(e.row.cheat_log)}}},[t._v("\n            查看\n          ")]):a("span",[t._v("暂无")])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"270px"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:"danger"},on:{click:function(a){t.showBanDia(e.row)}}},[t._v("禁赛\n          ")]):a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:"success"},on:{click:function(a){t.banMatch(e.row.signup_id,1)}}},[t._v("解禁\n          ")]),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){t.showRewardScore(e.row)}}},[t._v("奖罚分数\n          ")])]}}])})],1)],1),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.listTotal>0,expression:"listTotal > 0"}],attrs:{total:t.listTotal,page:t.listQuery.page,limit:t.listQuery.per_page},on:{"update:page":function(e){t.$set(t.listQuery,"page",e)},"update:limit":function(e){t.$set(t.listQuery,"per_page",e)},pagination:t.getList}}),t._v(" "),a("el-dialog",{attrs:{visible:t.scoreDig,title:"成绩管理"},on:{"update:visible":function(e){t.scoreDig=e}}},[a("el-table",{attrs:{data:t.scoreList,border:""}},[a("el-table-column",{attrs:{align:"center",width:"50px",label:"序号",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"title",label:"题目"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"score",label:"分值"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.status?a("span",[t._v("未解出")]):t._e(),t._v(" "),1==e.row.status?a("span",[t._v("解出")]):t._e(),t._v(" "),2==e.row.status?a("span",[t._v("无效")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"title_dsc",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:"danger"},on:{click:function(a){t.invalid(e.row.id,2)}}},[t._v("标记无效\n          ")]):t._e(),t._v(" "),2==e.row.status?a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){t.invalid(e.row.id,1)}}},[t._v("恢复分数\n          ")]):t._e()]}}])})],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.reasonDlg,title:"作弊信息"},on:{"update:visible":function(e){t.reasonDlg=e}}},[a("el-table",{attrs:{data:t.reason,border:""}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"时间",width:"170",prop:"create_time"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"原因",prop:"remark"}})],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.isToekn,title:"Token"},on:{"update:visible":function(e){t.isToekn=e}}},[t._v("\n    "+t._s(t.Token)+"\n  ")]),t._v(" "),a("el-dialog",{attrs:{visible:t.scoreDlg,title:"奖罚分数",width:"900px"},on:{"update:visible":function(e){t.scoreDlg=e}}},[a("el-form",{ref:"form",attrs:{model:t.reward_score,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"选手名称"}},[t._v("\n        "+t._s(t.playerName)+"\n      ")]),t._v(" "),a("el-form-item",{attrs:{label:"奖罚分数"}},[a("el-input-number",{attrs:{min:-1e5,max:1e6,size:"mini"},model:{value:t.reward_score.reward_score,callback:function(e){t.$set(t.reward_score,"reward_score",e)},expression:"reward_score.reward_score"}})],1),t._v(" "),a("el-form-item",{attrs:{rules:{required:!0,message:"请填写奖惩原因",trigger:"blur"},prop:"reward_reason",label:"奖惩原因"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.reward_score.reward_reason,callback:function(e){t.$set(t.reward_score,"reward_reason","string"==typeof e?e.trim():e)},expression:"reward_score.reward_reason"}})],1),t._v(" "),a("el-form-item",[a("div",{staticClass:"fr"},[a("el-button",{attrs:{type:"primary"},on:{click:t.submitScore}},[t._v("确定")]),t._v(" "),a("el-button",{on:{click:function(e){t.scoreDlg=!1}}},[t._v("取消")])],1)])],1),t._v(" "),a("el-alert",{attrs:{closable:!1,title:"奖惩分详情",type:"success",center:""}}),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.rewardScoreList,border:"",height:"250"}},[a("el-table-column",{attrs:{align:"center",width:"50px",label:"序号",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"reward_score",label:"奖罚分数"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"content",label:"奖惩原因"}})],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.banDia,title:"填写禁赛原因"},on:{"update:visible":function(e){t.banDia=e},close:t.close}},[a("el-form",{attrs:{modal:t.form,rules:t.banRules}},[a("el-form-item",{attrs:{label:"禁赛原因","label-width":"100px",prop:"cheat_log"}},[a("el-input",{model:{value:t.form.cheat_log,callback:function(e){t.$set(t.form,"cheat_log","string"==typeof e?e.trim():e)},expression:"form.cheat_log"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.banMatch(t.form.id,2)}}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:function(e){t.banDia=!1}}},[t._v("取 消")])],1)],1)],1)},[],!1,null,"2a522963",null));j.options.__file="userManagement.vue";var k=j.exports,x={name:"UserManagement",directives:{waves:i.a},components:{Pagination:n.a},data:function(){return{scoreDig:!1,scoreList:[],matchList:[],listTotal:0,listQuery:{page:0,per_page:this.$store.state.config.row,search:"",evt_hash:this.$route.query.hash},detailTotal:0,detailQuery:{page:0,per_page:this.$store.state.config.row,evt_hash:this.$route.query.hash,obj_id:""}}},created:function(){this.getList()},methods:{closeScore:function(){this.detailPage=1},indexMethod:function(t){return(this.listQuery.page-1)*this.listQuery.per_page+t+1},showScore:function(t){var e=this;t.obj_id&&(this.detailQuery.obj_id=t.obj_id),Object(s.a)(this.detailQuery).then(function(t){t.data.success&&(e.scoreDig=!0,e.scoreList=t.data.data,e.detailTotal=t.data.total)})},getList:function(t){var e=this;1===t&&(this.listQuery.page=t),Object(s.N)(this.listQuery).then(function(t){e.matchList=t.data.data,e.listTotal=t.data.total})},checkTable:function(){},handleExport:function(){Object(s.t)({evt_hash:this.listQuery.evt_hash}).then(function(t){Object(y.a)(t)})}}},O=(a("I8P0"),Object(o.a)(x,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"150px"},attrs:{placeholder:"请输入选手名称",size:"mini"},model:{value:t.listQuery.search,callback:function(e){t.$set(t.listQuery,"search","string"==typeof e?e.trim():e)},expression:"listQuery.search"}}),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",size:"mini"},on:{click:function(e){t.getList(1)}}},[t._v("搜索\n    ")]),t._v(" "),a("div",{staticClass:"fr"},[a("a",{attrs:{href:"/api/v1/jeopardy/admin/event/data/export?evt_hash="+t.listQuery.evt_hash,download:""}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"warning",size:"mini"}},[t._v("竞赛数据导出")])],1)])],1),t._v(" "),a("div",{staticClass:"filter-container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.matchList,border:""}},[a("el-table-column",{attrs:{index:t.indexMethod,align:"center",width:"50px",label:"名次",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"选手名称",align:"center",prop:"obj_name"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"max_time",label:"最后提交时间"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"sum_scores",label:"总积分"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"sum_score",label:"题目分数"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"rank",label:"奖罚分数"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.reward_score?e.row.reward_score:0)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){t.showScore(e.row)}}},[t._v("查看详情\n          ")])]}}])})],1)],1),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.listTotal>0,expression:"listTotal > 0"}],attrs:{total:t.listTotal,page:t.listQuery.page,limit:t.listQuery.per_page},on:{"update:page":function(e){t.$set(t.listQuery,"page",e)},"update:limit":function(e){t.$set(t.listQuery,"per_page",e)},pagination:t.getList}}),t._v(" "),a("el-dialog",{attrs:{visible:t.scoreDig,title:"成绩管理"},on:{"update:visible":function(e){t.scoreDig=e},close:t.closeScore}},[a("el-table",{attrs:{data:t.scoreList,border:""}},[a("el-table-column",{attrs:{index:t.indexMethod,align:"center",width:"50px",label:"序号",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"name",label:"选手名称"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"title",label:"题目"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"time",label:"解题时间"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"score",label:"解题分数"}})],1),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.detailTotal>0,expression:"detailTotal > 0"}],attrs:{total:t.detailTotal,page:t.detailQuery.page,limit:t.detailQuery.per_page},on:{"update:page":function(e){t.$set(t.detailQuery,"page",e)},"update:limit":function(e){t.$set(t.detailQuery,"per_page",e)},pagination:t.showScore}})],1)],1)},[],!1,null,"3429b778",null));O.options.__file="index.vue";var T=O.exports,L={name:"MatchStatus",data:function(){return{params:{evt_hash:this.$route.query.hash},query:{can_submit_writeup:1,public_rank:1},sisdk:""}},created:function(){this.getList()},methods:{initSence:function(){var t=this;this.$confirm("确定要场景初始化吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.S)(t.params).then(function(e){e.data.success&&(t.$message.success("操作成功"),t.getList())})}).catch(function(){t.$message({type:"info",message:"已取消初始化"})})},getList:function(){var t=this;Object(s.P)(this.params).then(function(e){for(var a in t.query)t.query[a]=e.data.data[a];t.sisdk=e.data.data.sisdk})},submitForm:function(){var t=this;Object(s.q)(this.params,this.query).then(function(e){e.data.success&&(t.$message.success("操作成功"),t.getList())})}}},$=(a("ciPJ"),Object(o.a)(L,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-form",{attrs:{"label-width":"190px"}},[a("el-form-item",{attrs:{label:"是否显示排名"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:t.submitForm},model:{value:t.query.public_rank,callback:function(e){t.$set(t.query,"public_rank",e)},expression:"query.public_rank"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"20px"}},[t._v("提示:开启后选手能看到排行榜, 关闭后选手看不到排行榜")])],1),t._v(" "),a("el-form-item",{attrs:{label:"是否开放上传WP"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:t.submitForm},model:{value:t.query.can_submit_writeup,callback:function(e){t.$set(t.query,"can_submit_writeup",e)},expression:"query.can_submit_writeup"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"态势展示"}},[a("a",{attrs:{href:t.sisdk,download:""}},[a("el-button",{attrs:{type:"warning",size:"mini"}},[t._v("客户端下载")])],1),t._v(" "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.initSence}},[t._v("场景初始化")])],1)],1)],1)},[],!1,null,"d7784e6a",null));$.options.__file="index.vue";var Q={name:"Index",components:{topic:c,matchStatus:v,monitor:f,result:T,matchNoice:g,userManagement:k,show:$.exports,vpn:a("xk3Q").a},data:function(){return{mode:null,activeName:"status",event_mode:""}},created:function(){var t=this;Object(s.x)(this.$route.query.id).then(function(e){t.event_mode=e.data.event_mode}),Object(s.U)({evt_hash:this.$route.query.hash}).then(function(e){t.mode=e.data.mode,t.$store.dispatch("changeMatchName",e.data.name_zh)});var e=this.$route.query.activeName;e&&(this.activeName=e)},beforeDestroy:function(){this.$store.dispatch("changeMatchName","")},methods:{changeTab:function(t){this.$refs[this.activeName].getList()}}},S=(a("8O9i"),Object(o.a)(Q,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-tabs",{staticStyle:{"margin-top":"15px"},attrs:{type:"border-card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{key:"status",attrs:{label:"任务状态",name:"status"}},["status"==t.activeName?a("matchStatus",{ref:"status"}):t._e()],1),t._v(" "),a("el-tab-pane",{key:"topic",attrs:{label:"题目运维",name:"topic"}},["topic"==t.activeName?a("topic",{ref:"topic"}):t._e()],1),t._v(" "),a("el-tab-pane",{key:"monitor",attrs:{label:"实例运维",name:"monitor"}},["monitor"==t.activeName?a("monitor",{ref:"monitor"}):t._e()],1),t._v(" "),a("el-tab-pane",{key:"noice",attrs:{label:"公告管理",name:"noice"}},["noice"==t.activeName?a("matchNoice",{ref:"noice"}):t._e()],1),t._v(" "),a("el-tab-pane",{key:"user",attrs:{label:"选手管理",name:"user"}},["user"==t.activeName?a("userManagement",{ref:"user"}):t._e()],1),t._v(" "),a("el-tab-pane",{key:"result",attrs:{label:"比赛结果",name:"result"}},["result"==t.activeName?a("result",{ref:"result"}):t._e()],1),t._v(" "),a("el-tab-pane",{key:"show",attrs:{label:"展示管理",name:"show"}},["show"==t.activeName?a("show",{ref:"show"}):t._e()],1),t._v(" "),1==t.event_mode?a("el-tab-pane",{key:"vpn",attrs:{label:"VPN管理",name:"vpn"}},["vpn"==t.activeName?a("vpn",{ref:"vpn"}):t._e()],1):t._e()],1)],1)},[],!1,null,"6a36302e",null));S.options.__file="index.vue";e.default=S.exports},"1GCc":function(t,e,a){},"2cRn":function(t,e,a){"use strict";a.d(e,"a",function(){return i}),a.d(e,"g",function(){return s}),a.d(e,"h",function(){return r}),a.d(e,"e",function(){return o}),a.d(e,"b",function(){return l}),a.d(e,"d",function(){return c}),a.d(e,"c",function(){return u}),a.d(e,"f",function(){return d});var n=a("t3Un");function i(t){return Object(n.a)({url:"/api/v1/common/admin/vpn/"+t+"/vpn/join",method:"post"})}function s(t){return Object(n.a)({url:"/api/v1/common/admin/vpn/"+t+"/vpn_server/deploy",method:"post"})}function r(t){return Object(n.a)({url:"/api/v1/common/admin/vpn/"+t+"/vpn_ca/deploy",method:"post"})}function o(t){return Object(n.a)({url:"/api/v1/common/admin/vpn/"+t+"/vpn_server/deploy",method:"delete"})}function l(t){return Object(n.a)({url:"/api/v1/common/admin/vpn/"+t+"/server/list",method:"get"})}function c(t,e){return Object(n.a)({url:"/api/v1/common/admin/vpn/"+t+"/user/list",method:"get",params:e})}function u(t,e){return Object(n.a)({url:"/api/v1/common/admin/vpn/"+t+"/vpn_server/deploy",method:"get",params:e})}function d(t,e){return Object(n.a)({url:"/api/v1/common/admin/vpn/"+t+"/vpn_reset/"+e+"/deploy",method:"post"})}},"6DOF":function(t,e,a){"use strict";var n=a("nMsD");a.n(n).a},"6yly":function(t,e,a){},"8O9i":function(t,e,a){"use strict";var n=a("fdW+");a.n(n).a},"9ZKK":function(t,e,a){},CquO:function(t,e,a){"use strict";a.d(e,"y",function(){return i}),a.d(e,"l",function(){return s}),a.d(e,"X",function(){return r}),a.d(e,"x",function(){return o}),a.d(e,"j",function(){return l}),a.d(e,"p",function(){return c}),a.d(e,"g",function(){return u}),a.d(e,"B",function(){return d}),a.d(e,"cb",function(){return p}),a.d(e,"J",function(){return v}),a.d(e,"I",function(){return m}),a.d(e,"U",function(){return h}),a.d(e,"V",function(){return f}),a.d(e,"ib",function(){return b}),a.d(e,"Q",function(){return _}),a.d(e,"R",function(){return g}),a.d(e,"f",function(){return y}),a.d(e,"w",function(){return w}),a.d(e,"eb",function(){return j}),a.d(e,"A",function(){return k}),a.d(e,"H",function(){return x}),a.d(e,"D",function(){return O}),a.d(e,"O",function(){return T}),a.d(e,"r",function(){return L}),a.d(e,"m",function(){return $}),a.d(e,"bb",function(){return Q}),a.d(e,"h",function(){return S}),a.d(e,"o",function(){return D}),a.d(e,"E",function(){return N}),a.d(e,"k",function(){return C}),a.d(e,"Y",function(){return z}),a.d(e,"K",function(){return q}),a.d(e,"z",function(){return I}),a.d(e,"C",function(){return F}),a.d(e,"c",function(){return P}),a.d(e,"d",function(){return M}),a.d(e,"hb",function(){return R}),a.d(e,"jb",function(){return V}),a.d(e,"Z",function(){return B}),a.d(e,"ab",function(){return E}),a.d(e,"fb",function(){return J}),a.d(e,"gb",function(){return U}),a.d(e,"u",function(){return W}),a.d(e,"G",function(){return A}),a.d(e,"b",function(){return K}),a.d(e,"W",function(){return Y}),a.d(e,"v",function(){return Z}),a.d(e,"n",function(){return G}),a.d(e,"i",function(){return H}),a.d(e,"L",function(){return X}),a.d(e,"e",function(){return tt}),a.d(e,"M",function(){return et}),a.d(e,"T",function(){return at}),a.d(e,"F",function(){return nt}),a.d(e,"db",function(){return it}),a.d(e,"N",function(){return st}),a.d(e,"a",function(){return rt}),a.d(e,"P",function(){return ot}),a.d(e,"q",function(){return lt}),a.d(e,"S",function(){return ct}),a.d(e,"t",function(){return ut}),a.d(e,"s",function(){return dt});var n=a("t3Un");function i(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/events",method:"get",params:t})}function s(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/events/batch_destroy",method:"delete",data:t})}function r(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/events/batch_public",method:"patch",data:t})}function o(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/events/"+t,method:"get"})}function l(t,e){return Object(n.a)({url:"/api/v1/jeopardy/admin/events/"+t,method:"delete",data:e})}function c(t,e){return Object(n.a)({url:"/api/v1/jeopardy/admin/events/"+t,method:"patch",data:e})}function u(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/events",method:"post",data:t})}function d(t,e){return Object(n.a)({url:"/api/v1/jeopardy/admin/events/"+t+"/users",method:"get"})}function p(t,e){return Object(n.a)({url:"/api/v1/jeopardy/admin/events/"+t+"/users",method:"post",data:e})}function v(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/tasks",method:"get",params:t})}function m(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/users",method:"get",params:t})}function h(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/state",method:"get",params:t})}function f(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event_mode/"+t,method:"get"})}function b(t,e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/state",method:"patch",params:t,data:e})}function _(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/init_env/",method:"post",data:t})}function g(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/"+t+"/networks",method:"post"})}function y(t,e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/data/clear",method:"delete",params:t})}function w(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/import_tasks_details",method:"get",params:t})}function j(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event_tasks/batch_create",method:"post",data:t})}function k(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/task_tags",method:"get"})}function x(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/task_categorys",method:"get"})}function O(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event_tasks",method:"get",params:t})}function T(t,e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/"+t+"/tasks/scores",method:"post",data:e})}function L(t,e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/"+t+"/tasks/scores",method:"patch",data:e})}function $(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event_tasks/batch_destroy",method:"delete",data:t})}
//! 解题赛 创建竞赛  编辑题目回显
function Q(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event_tasks/"+t,method:"get"})}function S(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event_tasks",method:"post",data:t})}
//! 解题赛 创建竞赛  保存编辑题目
function D(t,e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event_tasks/"+t,method:"patch",data:e})}function N(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/task_categorys",method:"get"})}function C(t,e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event_tasks/"+t,method:"delete",data:{index:e}})}function z(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event_tasks/batch_public",method:"patch",data:t})}function q(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/instances",method:"get",params:t})}function I(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/notices",method:"get",params:t})}function F(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/task/notices",method:"get",params:t})}function P(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/notices",method:"post",data:t})}function M(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/task/notices",method:"post",data:t})}function R(t,e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/notices",method:"patch",params:t,data:e})}function V(t,e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/task/notices",method:"patch",params:t,data:e})}function B(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/notices",method:"delete",data:t})}function E(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/task/notices",method:"delete",data:t})}function J(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/notices/top",method:"patch",data:t})}function U(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/task/notices/top",method:"patch",data:t})}function W(t,e){return Object(n.a)({method:"get",url:"/api/v1/jeopardy/admin/event/"+t+"/networks",params:e})}function A(t){return Object(n.a)({method:"get",url:"/api/v1/jeopardy/admin/event/"+t+"/groups"})}function K(t,e){return Object(n.a)({method:"post",url:"/api/v1/jeopardy/admin/event/"+t+"/networks",data:e})}function Y(t){return Object(n.a)({method:"get",url:"/api/v1/jeopardy/admin/event/check_network/"+t})}function Z(t,e,a){return Object(n.a)({method:"get",url:"/api/v1/jeopardy/admin/event/"+t+"/networks/"+e,data:a})}function G(t,e,a){return Object(n.a)({method:"patch",url:"/api/v1/jeopardy/admin/event/"+t+"/networks/"+e,data:a})}function H(t,e){return Object(n.a)({method:"delete",url:"/api/v1/jeopardy/admin/event/"+t+"/networks",data:e})}function X(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/players",method:"get",params:t})}function tt(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/player/bans",method:"PATCH",data:t})}function et(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/player/score",method:"get",params:t})}function at(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/player/score",method:"patch",data:t})}function nt(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/player/reward",method:"get",params:t})}function it(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/player/reward",method:"post",data:t})}function st(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/scores",method:"get",params:t})}function rt(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/score/player",method:"get",params:t})}function ot(t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/view",method:"get",params:t})}function lt(t,e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/view",method:"patch",params:t,data:e})}function ct(t){return Object(n.a)({method:"patch",url:"/api/v1/jeopardy/admin/event/init_scene",params:t})}function ut(t){return Object(n.a)({method:"get",url:"/api/v1/jeopardy/admin/event/data/export",params:t,responseType:"blob"})}function dt(t){return Object(n.a)({method:"get",url:"/api/v1/jeopardy/admin/event/wps/export",params:t,responseType:"blob"})}},DSSf:function(t,e,a){"use strict";var n=a("Q6mP");a.n(n).a},ERlS:function(t,e,a){},I8P0:function(t,e,a){"use strict";var n=a("YB/k");a.n(n).a},Q6mP:function(t,e,a){},"V1+z":function(t,e,a){"use strict";var n=a("+f4d");a.n(n).a},VNI4:function(t,e,a){"use strict";var n=a("6yly");a.n(n).a},Y5bG:function(t,e,a){"use strict";a.d(e,"a",function(){return i}),Math.easeInOutQuad=function(t,e,a,n){return(t/=n/2)<1?a/2*t*t+e:-a/2*(--t*(t-2)-1)+e};var n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};function i(t,e,a){var i=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,s=t-i,r=0;e=void 0===e?500:e;!function t(){r+=20,function(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}(Math.easeInOutQuad(r,i,s,e)),r<e?n(t):a&&"function"==typeof a&&a()}()}},"YB/k":function(t,e,a){},ZySA:function(t,e,a){"use strict";var n=a("6ZY3"),i=a.n(n),s=(a("jUE0"),{bind:function(t,e){t.addEventListener("click",function(a){var n=i()({},e.value),s=i()({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},n),r=s.ele;if(r){r.style.position="relative",r.style.overflow="hidden";var o=r.getBoundingClientRect(),l=r.querySelector(".waves-ripple");switch(l?l.className="waves-ripple":((l=document.createElement("span")).className="waves-ripple",l.style.height=l.style.width=Math.max(o.width,o.height)+"px",r.appendChild(l)),s.type){case"center":l.style.top=o.height/2-l.offsetHeight/2+"px",l.style.left=o.width/2-l.offsetWidth/2+"px";break;default:l.style.top=(a.pageY-o.top-l.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",l.style.left=(a.pageX-o.left-l.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return l.style.backgroundColor=s.color,l.className="waves-ripple z-active",!1}},!1)}}),r=function(t){t.directive("waves",s)};window.Vue&&(window.waves=s,Vue.use(r)),s.install=r;e.a=s},ciPJ:function(t,e,a){"use strict";var n=a("1GCc");a.n(n).a},"fdW+":function(t,e,a){},jUE0:function(t,e,a){},nMsD:function(t,e,a){},ruBo:function(t,e,a){"use strict";var n=a("ERlS");a.n(n).a},wxWJ:function(t,e,a){"use strict";var n=a("9ZKK");a.n(n).a},xk3Q:function(t,e,a){"use strict";var n=a("2cRn"),i={name:"IndexVue",components:{Pagination:a("Mz3J").a},data:function(){return{id:this.$route.query.id,server:[],total:0,listQuery:{server_id:"",name_param:"",per_page:this.$store.state.config.row,status_param:"",page:1},matchList:[],ids:[],log:"",dialogTableVisible:!1,gridData:[],dialogTableLoading:!1,dialogFlowsVisible:!1,flowsData:[],dialogFlowsLoading:!1}},created:function(){this.getServer(),this.getList()},methods:{getServer:function(){var t=this;Object(n.b)(this.id).then(function(e){t.server=e.data.data})},getList:function(t){var e=this;1===t&&(this.listQuery.offset=t),Object(n.d)(this.id,this.listQuery).then(function(t){e.matchList=t.data.data,e.total=t.data.total||e.total,e.log=t.data.log_path})},operation:function(t){},indexMethod:function(t){return(this.listQuery.page-1)*this.listQuery.per_page+t+1},handleClose:function(t){"servers"===t?(this.gridData=[],this.dialogTableLoading=!1):"servers"===t&&(this.flowsData=[])},showVpnServers:function(){this.dialogTableVisible=!0,this.handleGetVpnServers()},handleGetVpnServers:function(t){var e=this;return t||(this.dialogTableLoading=!0),Object(n.c)(this.id).then(function(a){var n=a.data;n.success&&(e.gridData=n.data,t||(e.dialogTableLoading=!1))})},showFlowTable:function(t){var e=this,a=t.uuid;this.dialogFlowsVisible=!0,this.dialogFlowsLoading=!0,this.handleGetVpnServers(!0).then(function(){e.flowsData=e.gridData.find(function(t){return t.uuid===a}).flows,e.dialogFlowsLoading=!1})},handleReset:function(t){var e=this,a=t.uuid;Object(n.f)(this.id,a).then(function(t){t.data.success&&(e.$message({type:"success",message:"操作成功"}),e.handleGetVpnServers())})}}},s=(a("6DOF"),a("ZrdR")),r=Object(s.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container competition_box"},[a("div",{staticClass:"filter-container"},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择VPN服务器",clearable:"",size:"mini"},model:{value:t.listQuery.server_id,callback:function(e){t.$set(t.listQuery,"server_id",e)},expression:"listQuery.server_id"}},t._l(t.server,function(t,e){return a("el-option",{key:e,attrs:{label:t.server_name,value:t.id}})})),t._v(" "),a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择用户拨入状态",clearable:"",size:"mini"},model:{value:t.listQuery.status_param,callback:function(e){t.$set(t.listQuery,"status_param",e)},expression:"listQuery.status_param"}},[a("el-option",{attrs:{value:1,label:"在线"}}),t._v(" "),a("el-option",{attrs:{value:2,label:"离线"}})],1),t._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"请输入账户名",size:"mini"},model:{value:t.listQuery.name_param,callback:function(e){t.$set(t.listQuery,"name_param","string"==typeof e?e.trim():e)},expression:"listQuery.name_param"}}),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"mini"},on:{click:function(e){t.getList(1)}}},[t._v("搜索")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"mini"},on:{click:t.getList}},[t._v("刷新")]),t._v(" "),a("div",{staticClass:"fr"},[""!=t.listQuery.server_id?a("a",{staticClass:"filter-item",attrs:{href:"/api/v1/common/admin/vpn/"+t.id+"/vpn_log/"+t.listQuery.server_id+"/download",download:""}},[a("el-button",{attrs:{type:"warning",size:"mini"}},[t._v("VPN日志下载")])],1):t._e(),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"warning",size:"mini"},on:{click:t.showVpnServers}},[t._v("VPN服务器管理")])],1)],1),t._v(" "),a("el-table",{ref:"multipleTable",attrs:{data:t.matchList,border:""}},[a("el-table-column",{attrs:{index:t.indexMethod,align:"center",width:"50px",label:"序号",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"user_name",label:"账户名"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"vpn_server_name",label:"VPN服务器"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"user_status",label:"拨入状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(1===e.row.user_status?"在线":"离线")+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"证书申请状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(1===e.row.ca_apply_status?"成功":"失败")+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"virtual_address",label:"虚拟地址"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"entry_time",label:"接入时间"}}),t._v(" "),a("el-table-column",{attrs:{label:"密钥管理",align:"center",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{attrs:{href:"/api/v1/common/admin/vpn/"+t.id+"/vpn_ca/"+e.row.user_id+"/download",download:""}},[a("el-button",{attrs:{size:"mini",type:"warning"}},[t._v("下载 ")])],1)]}}])})],1),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.per_page},on:{"update:page":function(e){t.$set(t.listQuery,"page",e)},"update:limit":function(e){t.$set(t.listQuery,"per_page",e)},pagination:t.getList}}),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogTableVisible,title:"VPN 服务器管理",width:"1200px"},on:{"update:visible":function(e){t.dialogTableVisible=e},close:function(e){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];t.handleClose.apply(void 0,n.concat(["servers"]))}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dialogTableLoading,expression:"dialogTableLoading"}],attrs:{data:t.gridData,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"vpn_server_name",label:"VPN 服务器",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"monitor_port",label:"映射端口",align:"center",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{property:"external_access",label:"外部访问IP/域名",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"网络信息",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.network,function(e,n){return a("div",{key:n,staticStyle:{"text-align":"left"}},[a("span",[t._v(t._s(n+": "+e))])])})}}])}),t._v(" "),a("el-table-column",{attrs:{label:"相关流表信息",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.showFlowTable(e.row)}}},[t._v("查看")])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"status",label:"状态",align:"center",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"重置管理",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){t.handleReset(e.row)}}},[t._v("重置")])]}}])})],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogFlowsVisible,title:"相关流表信息",width:"800px"},on:{"update:visible":function(e){t.dialogFlowsVisible=e},close:function(e){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];t.handleClose.apply(void 0,n.concat(["flows"]))}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dialogFlowsLoading,expression:"dialogFlowsLoading"}],attrs:{data:t.flowsData,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"内容"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row))])]}}])})],1)],1)],1)},[],!1,null,"c197fb08",null);r.options.__file="index.vue";e.a=r.exports},z0WU:function(t,e,a){"use strict";a.d(e,"e",function(){return r}),a.d(e,"d",function(){return o}),a.d(e,"b",function(){return l}),a.d(e,"c",function(){return u}),a.d(e,"a",function(){return p});a("6ZY3"),a("+XIM"),a("LGhb");var n=a("Q2cO"),i=a.n(n),s=a("twWv");function r(t,e){if(0===arguments.length)return null;var a=e||"{y}-{m}-{d} {h}:{i}:{s}",n=void 0;"object"===(void 0===t?"undefined":i()(t))?n=t:("string"==typeof t&&/^[0-9]+$/.test(t)&&(t=parseInt(t)),"number"==typeof t&&10===t.toString().length&&(t*=1e3),n=new Date(t));var s={y:n.getFullYear(),m:n.getMonth()+1,d:n.getDate(),h:n.getHours(),i:n.getMinutes(),s:n.getSeconds(),a:n.getDay()};return a.replace(/{([ymdhisa])+}/g,function(t,e){var a=s[e];return"a"===e?["日","一","二","三","四","五","六"][a]:a.toString().padStart(2,"0")})}function o(t){var e=0;return t=t.split("."),e=256*Number(t[0])*256*256+256*Number(t[1])*256+256*Number(t[2])+Number(t[3]),e>>>=0}function l(t,e,a){var n,i,s;n=t.split("."),i=e.split("."),s=a.split(".");var r="",o="",l="",c=0;for(c=0;c<4;c++){var u,d,p;u=parseInt(n[c]).toString(2),d=parseInt(i[c]).toString(2),p=parseInt(s[c]).toString(2);var v=void 0;for(v=0;v<8-u.length;v++)r+="0";for(r+=u,v=0;v<8-d.length;v++)o+="0";for(o+=d,v=0;v<8-p.length;v++)l+="0";l+=p}var m,h,f,b=l.length;for(m=r.split(""),h=o.split(""),f=l.split(""),c=0;c<b;c++)if("1"===f[c]&&m[c]!==h[c])return!1;return!0}function c(t,e){var a=document.createElement("a");a.download=e||(new Date).getTime(),a.style.display="none",a.href=t,document.body.appendChild(a),a.click(),document.body.removeChild(a)}function u(t,e){c(function(t){var e=t.url,a=t.query;if(!e)return"";if(a){var n=[];for(var i in a)a.hasOwnProperty(i)&&n.push(i+"="+a[i]);e=-1!==e.indexOf("?")?e+"&"+n.join("&"):e+"?"+n.join("&")}return e}({url:t.url,query:t.query}),e)}function d(t,e){var a=t.headers["content-disposition"].split("="),n=a[a.length-1].replace(/"/g,"").replace(/UTF-8''/g,"");n=decodeURI(n);var i=URL.createObjectURL(t.data);c(i,e||n),URL.revokeObjectURL(i)}function p(t,e){var a=t.data,n=a.type.split("/");if("json"===n[n.length-1]){var i=new FileReader;i.readAsText(a),i.onload=function(){var a=JSON.parse(this.result);if(!1===a.success){var n=a.message||a.message_zh;Object(s.Message)({type:"error",message:n})}else d(t,e)}}else d(t,e)}}}]);
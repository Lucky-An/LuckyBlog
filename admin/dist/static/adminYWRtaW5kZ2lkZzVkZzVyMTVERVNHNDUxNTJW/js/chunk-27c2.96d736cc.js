(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-27c2"],{TEjo:function(e,t,n){"use strict";n.d(t,"f",function(){return a}),n.d(t,"b",function(){return o}),n.d(t,"a",function(){return r}),n.d(t,"c",function(){return s}),n.d(t,"d",function(){return l}),n.d(t,"e",function(){return c}),n.d(t,"j",function(){return u}),n.d(t,"g",function(){return d}),n.d(t,"h",function(){return m}),n.d(t,"i",function(){return p});var i=n("t3Un");function a(e){return Object(i.a)({url:"/api/v1/common/admin/images",method:"get",params:e})}function o(e){return Object(i.a)({url:"/api/v1/common/admin/images",method:"delete",data:e})}function r(e){return Object(i.a)({url:"/api/v1/common/admin/images",method:"post",data:e})}function s(e,t){return Object(i.a)({url:"/api/v1/common/admin/images/"+e,method:"patch",data:t})}function l(e){return Object(i.a)({url:"/api/v1/common/admin/images/"+e,method:"get"})}function c(){return Object(i.a)({url:"/api/v1/common/admin/images/tags",method:"get"})}function u(e){return Object(i.a)({url:"/api/v1/common/admin/images/tags",method:"post",data:e})}function d(e,t){return Object(i.a)({url:"/api/v1/common/admin/images/tags/"+e,method:"put",data:t})}function m(e){return Object(i.a)({url:"/api/v1/common/admin/images/tags/"+e,method:"delete"})}function p(e,t,n){return Object(i.a)({url:"/api/v1/common/admin/images/"+e+"/instance",method:"post",data:{operation:t,save:n}})}},XINx:function(e,t,n){"use strict";var i={bind:function(e,t,n){var i=e.querySelector(".el-dialog__header"),a=e.querySelector(".el-dialog");i.style.cssText+=";cursor:move;",a.style.cssText+=";top:0px;";var o=window.document.currentStyle?function(e,t){return e.currentStyle[t]}:function(e,t){return getComputedStyle(e,!1)[t]};i.onmousedown=function(e){var t=e.clientX-i.offsetLeft,r=e.clientY-i.offsetTop,s=a.offsetWidth,l=a.offsetHeight,c=document.body.clientWidth,u=document.body.clientHeight,d=a.offsetLeft,m=c-a.offsetLeft-s,p=a.offsetTop,f=u-a.offsetTop-l,g=o(a,"left"),v=o(a,"top");g.includes("%")?(g=+document.body.clientWidth*(+g.replace(/\%/g,"")/100),v=+document.body.clientHeight*(+v.replace(/\%/g,"")/100)):(g=+g.replace(/\px/g,""),v=+v.replace(/\px/g,"")),document.onmousemove=function(e){var i=e.clientX-t,o=e.clientY-r;-i>d?i=-d:i>m&&(i=m),-o>p?o=-p:o>f&&(o=f),a.style.cssText+=";left:"+(i+g)+"px;top:"+(o+v)+"px;",n.child.$emit("dragDialog")},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}},a=function(e){e.directive("el-drag-dialog",i)};window.Vue&&(window["el-drag-dialog"]=i,Vue.use(a)),i.install=a;t.a=i},Y5bG:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),Math.easeInOutQuad=function(e,t,n,i){return(e/=i/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t};var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};function a(e,t,n){var a=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,o=e-a,r=0;t=void 0===t?500:t;!function e(){r+=20,function(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}(Math.easeInOutQuad(r,a,o,t)),r<t?i(e):n&&"function"==typeof n&&n()}()}},ZySA:function(e,t,n){"use strict";var i=n("6ZY3"),a=n.n(i),o=(n("jUE0"),{bind:function(e,t){e.addEventListener("click",function(n){var i=a()({},t.value),o=a()({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},i),r=o.ele;if(r){r.style.position="relative",r.style.overflow="hidden";var s=r.getBoundingClientRect(),l=r.querySelector(".waves-ripple");switch(l?l.className="waves-ripple":((l=document.createElement("span")).className="waves-ripple",l.style.height=l.style.width=Math.max(s.width,s.height)+"px",r.appendChild(l)),o.type){case"center":l.style.top=s.height/2-l.offsetHeight/2+"px",l.style.left=s.width/2-l.offsetWidth/2+"px";break;default:l.style.top=(n.pageY-s.top-l.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",l.style.left=(n.pageX-s.left-l.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return l.style.backgroundColor=o.color,l.className="waves-ripple z-active",!1}},!1)}}),r=function(e){e.directive("waves",o)};window.Vue&&(window.waves=o,Vue.use(r)),o.install=r;t.a=o},hgQt:function(e,t,n){"use strict";n.r(t);var i=n("6ZY3"),a=n.n(i),o=n("TEjo"),r=n("ZySA"),s=n("Mz3J"),l=n("7Qib"),c=n("XINx"),u=n("z0WU"),d=[{key:"yes",display_name:"纯净镜像"},{key:"no",display_name:"自定义镜像"}],m={name:"List",components:{Pagination:s.a},directives:{waves:r.a,elDragDialog:c.a},data:function(){return{infoVisible:!1,indexMethod:l.c,tableKey:0,listLoading:!1,matchStatus:d,systemType:[{key:"linux",display_name:"linux"},{key:"windows",display_name:"windows"}],listQuery:{per_page:this.$store.state.config.row,page:1,search:"",image_type:"",total:0},image_name:"",isName:!1,itemDescribe:"测试描述",matchList:[],ids:[]}},created:function(){this.getList()},methods:{parseTime:u.e,checkboxT:function(e){return e.can_edit},lookDescribe:function(e){this.itemDescribe=e,this.infoVisible=!0},lookName:function(e){this.image_name=e,this.isName=!0},to_add:function(){this.$router.push({path:"/image/virtual/create"})},removeMatch:function(){var e=this,t={image_ids:this.ids};this.ids.length<=0||this.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.b)(t).then(function(t){t.data.success&&(e.$message.success("操作成功"),e.getList())})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},getList:function(e,t){var n=this,i="start"===e?a()(this.listQuery,{page:t}):this.listQuery;Object(o.f)(i).then(function(e){var t=e.data;t.success&&(n.matchList=t.data,n.listQuery.total=t.total)})},checkTable:function(e){this.ids=e.map(function(e){return e.uuid})},editMatch:function(e){this.$router.push({path:"/image/virtual/edit",query:{id:e}})}}},p=n("ZrdR"),f=Object(p.a)(m,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container competition_box"},[n("div",{staticClass:"container_bg"},[n("div",{staticClass:"filter-container"},[n("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择镜像类型",clearable:"",size:"mini"},model:{value:e.listQuery.image_type,callback:function(t){e.$set(e.listQuery,"image_type",t)},expression:"listQuery.image_type"}},[n("el-option",{attrs:{value:"kvm",label:"kvm"}}),e._v(" "),n("el-option",{attrs:{value:"docker",label:"docker"}})],1),e._v(" "),n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"请输入镜像名称",size:"mini"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getList(t):null}},model:{value:e.listQuery.search,callback:function(t){e.$set(e.listQuery,"search","string"==typeof t?t.trim():t)},expression:"listQuery.search"}}),e._v(" "),n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",size:"mini"},on:{click:e.getList}},[e._v("搜索")])],1),e._v(" "),n("div",{staticClass:"filter-container"},[n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"success",size:"mini"},on:{click:e.to_add}},[e._v("新增")]),e._v(" "),n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"danger",size:"mini"},on:{click:e.removeMatch}},[e._v("删除")])],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.matchList,fit:"","highlight-current-row":"","tooltip-effect":"dark",border:""},on:{"selection-change":e.checkTable}},[n("el-table-column",{attrs:{selectable:e.checkboxT,align:"center",type:"selection"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",prop:"name",label:"序号",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.indexMethod(e.listQuery.page,e.listQuery.per_page,t.$index)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",prop:"name",label:"镜像名称","min-width":"250"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",width:"80",prop:"image_type",label:"镜像类型"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",width:"110",prop:"os_type",label:"操作系统类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.os_type?t.row.os_type:"-"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",width:"120",prop:"description",label:"镜像描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){e.lookDescribe(t.row.description)}}},[e._v("查看")])]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",width:"120",prop:"description",label:"仓库名称"},scopedSlots:e._u([{key:"default",fn:function(t){return["docker"===t.row.image_type?n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){e.lookName(t.row.image_name)}}},[e._v("查看")]):n("span",[e._v("-")])]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",prop:"create_user",label:"创建人"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",width:"120",prop:"status",label:"镜像状态"}}),e._v(" "),n("el-table-column",{attrs:{align:"center","min-width":"160",label:"编辑时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.parseTime(new Date(t.row.updated_at))))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.can_edit?n("span",[t.row.info_button?n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){e.editMatch(t.row.uuid)}}},[e._v("编辑")]):e._e()],1):n("span",[n("el-button",{attrs:{disabled:"",type:"primary",size:"mini"}},[e._v("编辑")])],1)]}}])})],1),e._v(" "),n("pagination",{attrs:{total:e.listQuery.total,page:e.listQuery.page,limit:e.listQuery.per_page},on:{"update:page":function(t){e.$set(e.listQuery,"page",t)},"update:limit":function(t){e.$set(e.listQuery,"per_page",t)},pagination:e.getList}}),e._v(" "),n("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{visible:e.infoVisible,title:"镜像描述",width:"30%"},on:{"update:visible":function(t){e.infoVisible=t}}},[n("span",[e._v(e._s(e.itemDescribe))])]),e._v(" "),n("el-dialog",{attrs:{visible:e.isName,title:"仓库名称"},on:{"update:visible":function(t){e.isName=t}}},[n("div",{staticClass:"filter-container"},[e._v("\n        "+e._s(e.image_name)+"\n      ")])])],1)])},[],!1,null,null,null);f.options.__file="index.vue";t.default=f.exports},jUE0:function(e,t,n){},z0WU:function(e,t,n){"use strict";n.d(t,"e",function(){return r}),n.d(t,"d",function(){return s}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return u}),n.d(t,"a",function(){return m});n("6ZY3"),n("+XIM"),n("LGhb");var i=n("Q2cO"),a=n.n(i),o=n("twWv");function r(e,t){if(0===arguments.length)return null;var n=t||"{y}-{m}-{d} {h}:{i}:{s}",i=void 0;"object"===(void 0===e?"undefined":a()(e))?i=e:("string"==typeof e&&/^[0-9]+$/.test(e)&&(e=parseInt(e)),"number"==typeof e&&10===e.toString().length&&(e*=1e3),i=new Date(e));var o={y:i.getFullYear(),m:i.getMonth()+1,d:i.getDate(),h:i.getHours(),i:i.getMinutes(),s:i.getSeconds(),a:i.getDay()};return n.replace(/{([ymdhisa])+}/g,function(e,t){var n=o[t];return"a"===t?["日","一","二","三","四","五","六"][n]:n.toString().padStart(2,"0")})}function s(e){var t=0;return e=e.split("."),t=256*Number(e[0])*256*256+256*Number(e[1])*256+256*Number(e[2])+Number(e[3]),t>>>=0}function l(e,t,n){var i,a,o;i=e.split("."),a=t.split("."),o=n.split(".");var r="",s="",l="",c=0;for(c=0;c<4;c++){var u,d,m;u=parseInt(i[c]).toString(2),d=parseInt(a[c]).toString(2),m=parseInt(o[c]).toString(2);var p=void 0;for(p=0;p<8-u.length;p++)r+="0";for(r+=u,p=0;p<8-d.length;p++)s+="0";for(s+=d,p=0;p<8-m.length;p++)l+="0";l+=m}var f,g,v,h=l.length;for(f=r.split(""),g=s.split(""),v=l.split(""),c=0;c<h;c++)if("1"===v[c]&&f[c]!==g[c])return!1;return!0}function c(e,t){var n=document.createElement("a");n.download=t||(new Date).getTime(),n.style.display="none",n.href=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)}function u(e,t){c(function(e){var t=e.url,n=e.query;if(!t)return"";if(n){var i=[];for(var a in n)n.hasOwnProperty(a)&&i.push(a+"="+n[a]);t=-1!==t.indexOf("?")?t+"&"+i.join("&"):t+"?"+i.join("&")}return t}({url:e.url,query:e.query}),t)}function d(e,t){var n=e.headers["content-disposition"].split("="),i=n[n.length-1].replace(/"/g,"").replace(/UTF-8''/g,"");i=decodeURI(i);var a=URL.createObjectURL(e.data);c(a,t||i),URL.revokeObjectURL(a)}function m(e,t){var n=e.data,i=n.type.split("/");if("json"===i[i.length-1]){var a=new FileReader;a.readAsText(n),a.onload=function(){var n=JSON.parse(this.result);if(!1===n.success){var i=n.message||n.message_zh;Object(o.Message)({type:"error",message:i})}else d(e,t)}}else d(e,t)}}}]);
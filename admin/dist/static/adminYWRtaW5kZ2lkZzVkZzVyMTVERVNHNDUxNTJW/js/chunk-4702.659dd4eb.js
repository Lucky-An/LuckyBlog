(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4702"],{Ec4f:function(e,t,i){"use strict";var a=i("bXrP");i.n(a).a},GW8g:function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i.d(t,"g",function(){return s}),i.d(t,"f",function(){return o}),i.d(t,"e",function(){return r}),i.d(t,"d",function(){return l}),i.d(t,"c",function(){return c}),i.d(t,"b",function(){return u});var a=i("t3Un");function n(e){return Object(a.a)({url:"/api/v1/jeopardy/admin/user_invite_codes",method:"post",data:e})}function s(e,t){return Object(a.a)({url:"/api/v1/jeopardy/admin/user_invite_code/"+e,method:"patch",data:t})}function o(e,t){return Object(a.a)({url:"/api/v1/jeopardy/admin/team_invite_code/"+e,method:"patch",data:t})}function r(e,t){return Object(a.a)({url:"/api/v1/jeopardy/admin/user_invite_code/"+e,method:"delete"})}function l(e,t){return Object(a.a)({url:"/api/v1/jeopardy/admin/team_invite_code/"+e,method:"delete"})}function c(e){return Object(a.a)({url:"/api/v1/jeopardy/admin/user_invite_codes",method:"get",params:e})}function u(e){return Object(a.a)({url:"/api/v1/jeopardy/admin/team_invite_codes",method:"get",params:e})}},Y5bG:function(e,t,i){"use strict";i.d(t,"a",function(){return n}),Math.easeInOutQuad=function(e,t,i,a){return(e/=a/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t};var a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};function n(e,t,i){var n=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,s=e-n,o=0;t=void 0===t?500:t;!function e(){o+=20,function(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}(Math.easeInOutQuad(o,n,s,t)),o<t?a(e):i&&"function"==typeof i&&i()}()}},ZySA:function(e,t,i){"use strict";var a=i("6ZY3"),n=i.n(a),s=(i("jUE0"),{bind:function(e,t){e.addEventListener("click",function(i){var a=n()({},t.value),s=n()({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},a),o=s.ele;if(o){o.style.position="relative",o.style.overflow="hidden";var r=o.getBoundingClientRect(),l=o.querySelector(".waves-ripple");switch(l?l.className="waves-ripple":((l=document.createElement("span")).className="waves-ripple",l.style.height=l.style.width=Math.max(r.width,r.height)+"px",o.appendChild(l)),s.type){case"center":l.style.top=r.height/2-l.offsetHeight/2+"px",l.style.left=r.width/2-l.offsetWidth/2+"px";break;default:l.style.top=(i.pageY-r.top-l.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",l.style.left=(i.pageX-r.left-l.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return l.style.backgroundColor=s.color,l.className="waves-ripple z-active",!1}},!1)}}),o=function(e){e.directive("waves",s)};window.Vue&&(window.waves=s,Vue.use(o)),s.install=o;t.a=s},bXrP:function(e,t,i){},jUE0:function(e,t,i){},wkbf:function(e,t,i){"use strict";i.r(t);var a=i("ZySA"),n=i("Mz3J"),s=i("GW8g"),o={name:"Idnex",components:{Pagination:n.a},directives:{waves:a.a},data:function(){return{mode:this.$route.query.mode,editForm:{},teamMembers:[],teamDlg:!1,editDlg:!1,tableKey:0,total:0,listLoading:!1,page:1,listQuery:{event:this.$route.query.id,offset:0,limit:this.$store.state.config.row,search:"",status:"",order:"asc"},checkAry:[],generateval:"",accreditList:[]}},created:function(){this.getList()},methods:{indexMethod:function(e){return(this.page-1)*this.listQuery.limit+e+1},changeNum:function(e,t){1*this.generateval<0&&(this.generateval=0),1==this.mode?1*this.generateval+this.total>2e3&&(this.generateval=2e3-this.total):1*this.generateval+this.total>500&&(this.generateval=500-this.total)},submitForm:function(){var e=this;if(1==this.mode){var t={};t.nickname=this.editForm.nickname,t.user_id=this.editForm.user_id,Object(s.g)(this.editForm.id,t).then(function(t){t.data.success&&(e.editDlg=!1,e.getList())})}else{var i={};i.team_name=this.editForm.nickname,i.team=this.editForm.team_id,i.event=Number(this.$route.query.id),Object(s.f)(this.editForm.id,i).then(function(t){t.data.success&&(e.editDlg=!1,e.$message.success("操作成功"),e.getList())})}},showDialog:function(e){this.editDlg=!0,1==this.mode?(this.editForm.nickname=e.nickname,this.editForm.invite_code=e.invite_code,this.editForm.id=e.id,this.editForm.user_id=e.user_id):(this.editForm.nickname=e.team_name,this.editForm.id=e.id,this.editForm.invite_code=e.invite_code,this.editForm.team_id=e.team_id)},handleChange:function(e){this.checkAry=e.map(function(e){return e.id})},getList:function(){1==this.mode?this.getUserList():this.getTeamList()},remove:function(e){var t=this;this.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){1==t.mode?Object(s.e)(e).then(function(e){e.data.success&&(t.$message.success("删除成功"),t.getList())}):Object(s.d)(e).then(function(e){e.data.success&&(t.$message.success("删除成功"),t.getList())})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},getUserList:function(){var e=this;this.listQuery.offset=(this.page-1)*this.listQuery.limit,Object(s.c)(this.listQuery).then(function(t){e.accreditList=t.data.rows,e.total=t.data.total})},getTeamList:function(){var e=this;this.listQuery.offset=(this.page-1)*this.listQuery.limit,Object(s.b)(this.listQuery).then(function(t){e.accreditList=t.data.rows,e.total=t.data.total})},showTeamUser:function(e){this.teamDlg=!0,this.teamMembers=e},generate:function(){var e=this;if(""!=this.generateval){var t={num:Number(this.generateval),event:this.$route.query.id};Object(s.a)(t).then(function(t){t.data.success&&(e.$message.success("生成成功"),e.generateval="",e.getList())})}else this.$message.error("请输入生成数量")},download:function(){0!=this.checkAry.length?window.open("/api/ad_event/user_invite_code/down_excel?ids=["+this.checkAry+"]"):this.$message.error("请选择下载项")}}},r=(i("Ec4f"),i("ZrdR")),l=Object(r.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"250px","margin-right":"10px"},attrs:{type:"number",placeholder:"批量生成账号和邀请码"},on:{change:e.changeNum},model:{value:e.generateval,callback:function(t){e.generateval="string"==typeof t?t.trim():t},expression:"generateval"}}),e._v(" "),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary"},on:{click:e.generate}},[e._v("生成")]),e._v(" "),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"warning"},on:{click:e.download}},[e._v("下载")])],1),e._v(" "),i("div",{staticClass:"filter-container"},[1==e.mode?i("el-select",{staticClass:"filter-item",staticStyle:{width:"130px"},attrs:{placeholder:"使用状态",clearable:""},model:{value:e.listQuery.status,callback:function(t){e.$set(e.listQuery,"status",t)},expression:"listQuery.status"}},[i("el-option",{attrs:{label:"全部状态",value:""}}),e._v(" "),i("el-option",{attrs:{value:1,label:"已使用"}}),e._v(" "),i("el-option",{attrs:{value:0,label:"未使用"}})],1):e._e(),e._v(" "),i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"请输入名称"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleFilter(t):null}},model:{value:e.listQuery.search,callback:function(t){e.$set(e.listQuery,"search","string"==typeof t?t.trim():t)},expression:"listQuery.search"}}),e._v(" "),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary"},on:{click:e.getList}},[e._v("搜索")])],1),e._v(" "),1==e.mode?i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.accreditList},on:{"selection-change":e.handleChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),i("el-table-column",{attrs:{index:e.indexMethod,label:"序号",align:"center",type:"index"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"invite_code",label:"邀请码"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"nickname",label:"用户姓名"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"email",label:"攻防世界账号"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"jointype",label:"使用状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.status?"已使用":"未使用"))])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作",width:"280px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status?i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary"},on:{click:function(i){e.showDialog(t.row)}}},[e._v("\n          编辑\n        ")]):e._e(),e._v(" "),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"danger"},on:{click:function(i){e.remove(t.row.id)}}},[e._v("删除")])]}}])})],1):e._e(),e._v(" "),2==e.mode?i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.accreditList},on:{"selection-change":e.handleChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),i("el-table-column",{attrs:{index:e.indexMethod,label:"序号",align:"center",type:"index",width:"50"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"invite_code",label:"邀请码"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"team_name",label:"队伍姓名"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"matchType",label:"队伍LOGO"},scopedSlots:e._u([{key:"default",fn:function(e){return[i("img",{attrs:{src:e.row.team_logo,alt:""}})]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"user_count",label:"队伍成员"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.user_count?i("el-button",{attrs:{type:"success"},on:{click:function(i){e.showTeamUser(t.row.nickname)}}},[e._v(e._s(t.row.user_count)+"\n        ")]):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作",width:"280px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.team_name?i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary"},on:{click:function(i){e.showDialog(t.row)}}},[e._v("编辑\n        ")]):e._e(),e._v(" "),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"danger"},on:{click:function(i){e.remove(t.row.id)}}},[e._v("删除")])]}}])})],1):e._e(),e._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.page,limit:e.listQuery.limit},on:{"update:page":function(t){e.page=t},"update:limit":function(t){e.$set(e.listQuery,"limit",t)},pagination:e.getList}}),e._v(" "),i("el-dialog",{attrs:{visible:e.editDlg,title:"编辑"},on:{"update:visible":function(t){e.editDlg=t}}},[i("el-form",{attrs:{model:e.editForm,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"邀请码"}},[i("el-input",{attrs:{disabled:""},model:{value:e.editForm.invite_code,callback:function(t){e.$set(e.editForm,"invite_code","string"==typeof t?t.trim():t)},expression:"editForm.invite_code"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"名称"}},[i("el-input",{model:{value:e.editForm.nickname,callback:function(t){e.$set(e.editForm,"nickname","string"==typeof t?t.trim():t)},expression:"editForm.nickname"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),e._v(" "),i("el-button",{on:{click:function(t){e.editDlg=!1}}},[e._v("取 消")])],1)],1),e._v(" "),i("el-dialog",{attrs:{visible:e.teamDlg,title:"团队成员"},on:{"update:visible":function(t){e.teamDlg=t}}},e._l(e.teamMembers,function(t){return i("p",[e._v(e._s(t))])}))],1)},[],!1,null,"153ffcfd",null);l.options.__file="index.vue";t.default=l.exports}}]);
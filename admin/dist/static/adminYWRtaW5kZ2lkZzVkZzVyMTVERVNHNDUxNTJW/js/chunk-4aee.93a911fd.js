(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4aee"],{"6Ef1":function(t,e,i){},C58x:function(t,e,i){"use strict";i.d(e,"k",function(){return s}),i.d(e,"d",function(){return o}),i.d(e,"t",function(){return r}),i.d(e,"q",function(){return a}),i.d(e,"j",function(){return c}),i.d(e,"c",function(){return l}),i.d(e,"f",function(){return u}),i.d(e,"b",function(){return m}),i.d(e,"m",function(){return p}),i.d(e,"e",function(){return d}),i.d(e,"x",function(){return h}),i.d(e,"a",function(){return _}),i.d(e,"h",function(){return v}),i.d(e,"i",function(){return f}),i.d(e,"l",function(){return b}),i.d(e,"v",function(){return g}),i.d(e,"n",function(){return y}),i.d(e,"w",function(){return w}),i.d(e,"u",function(){return x}),i.d(e,"r",function(){return k}),i.d(e,"o",function(){return S}),i.d(e,"p",function(){return F}),i.d(e,"g",function(){return j}),i.d(e,"s",function(){return L});var n=i("t3Un");function s(t){return Object(n.a)({url:"/api/v1/theory/admin/evts/",method:"get",params:t})}function o(t){return Object(n.a)({url:"/api/v1/theory/admin/evts/",method:"delete",data:t})}function r(t){return Object(n.a)({url:"/api/v1/theory/admin/evts/",method:"patch",data:t})}function a(){return Object(n.a)({url:"/api/v1/theory/admin/evts/teachers/",method:"get"})}function c(t){return Object(n.a)({url:"/api/v1/theory/admin/evts/"+t+"/",method:"get"})}function l(t,e){return Object(n.a)({url:"/api/v1/theory/admin/evts/"+t+"/",method:"delete",data:e})}function u(t,e){return Object(n.a)({url:"/api/v1/theory/admin/evts/"+t+"/",method:"patch",data:e})}function m(t){return Object(n.a)({url:"/api/v1/theory/admin/evts/",method:"post",data:t})}function p(t,e){return Object(n.a)({url:"/api/v1/theory/admin/evts/"+t+"/tasks/",method:"get",params:e})}function d(t,e){return Object(n.a)({url:"/api/v1/theory/admin/evts/"+t+"/tasks/",method:"delete",data:e})}function h(t,e){return Object(n.a)({url:"/api/v1/theory/admin/evts/"+t+"/tasks/preview/",method:"get"})}function _(t){return Object(n.a)({url:"/api/v1/theory/admin/evts/"+t+"/tasks/import/status/",method:"get"})}function v(t,e){return Object(n.a)({url:"/api/v1/theory/admin/evts/"+t+"/tasks/import/",method:"get",params:e})}function f(t){return Object(n.a)({url:"/api/v1/theory/admin/evts/"+t+"/tasks/imported/",method:"get"})}function b(t,e,i){return Object(n.a)({url:"/api/v1/theory/admin/evts/"+t+"/tasks/import/preview/",method:"post",params:e,data:i})}function g(t,e){return Object(n.a)({url:"/api/v1/theory/admin/evts/"+t+"/tasks/import/",method:"post",data:e})}function y(t,e){return Object(n.a)({url:"/api/v1/theory/admin/evts/"+t+"/users/",method:"get"})}function w(t,e){return Object(n.a)({url:"/api/v1/theory/admin/evts/"+t+"/users/",method:"patch",data:e})}function x(t,e){return Object(n.a)({url:"/api/v1/theory/admin/evts/"+t+"/scores/",method:"get",params:e})}function k(t,e,i){return Object(n.a)({url:"/api/v1/theory/admin/evts/"+t+"/scores/users/"+e+"/check/",method:"get"})}function S(t){return Object(n.a)({url:"/api/v1/theory/admin/evts/"+t+"/scores/users/submission/",method:"post"})}function F(t){return Object(n.a)({url:"/api/v1/theory/admin/evts/"+t+"/scores/users/generation/",method:"post"})}function j(t,e){return Object(n.a)({url:"/api/v1/theory/admin/evts/"+t+"/scores/users/export/pdf/",method:"get",params:e})}function L(t){return Object(n.a)({url:"/api/v1/theory/admin/evts/"+t+"/scores/users/pdf/download/",method:"get"})}},L0LS:function(t,e,i){},Mt2a:function(t,e,i){},RyQl:function(t,e,i){"use strict";var n=i("Mt2a");i.n(n).a},Ux6x:function(t,e,i){"use strict";var n=i("6Ef1");i.n(n).a},Y5bG:function(t,e,i){"use strict";i.d(e,"a",function(){return s}),Math.easeInOutQuad=function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e};var n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};function s(t,e,i){var s=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,o=t-s,r=0;e=void 0===e?500:e;!function t(){r+=20,function(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}(Math.easeInOutQuad(r,s,o,e)),r<e?n(t):i&&"function"==typeof i&&i()}()}},YBzE:function(t,e,i){"use strict";var n=i("lVcU");i.n(n).a},ZySA:function(t,e,i){"use strict";var n=i("6ZY3"),s=i.n(n),o=(i("jUE0"),{bind:function(t,e){t.addEventListener("click",function(i){var n=s()({},e.value),o=s()({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},n),r=o.ele;if(r){r.style.position="relative",r.style.overflow="hidden";var a=r.getBoundingClientRect(),c=r.querySelector(".waves-ripple");switch(c?c.className="waves-ripple":((c=document.createElement("span")).className="waves-ripple",c.style.height=c.style.width=Math.max(a.width,a.height)+"px",r.appendChild(c)),o.type){case"center":c.style.top=a.height/2-c.offsetHeight/2+"px",c.style.left=a.width/2-c.offsetWidth/2+"px";break;default:c.style.top=(i.pageY-a.top-c.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",c.style.left=(i.pageX-a.left-c.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return c.style.backgroundColor=o.color,c.className="waves-ripple z-active",!1}},!1)}}),r=function(t){t.directive("waves",o)};window.Vue&&(window.waves=o,Vue.use(r)),o.install=r;e.a=o},aFNf:function(t,e,i){var n=i("c01Q"),s=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(t){return s.stringify.apply(s,arguments)}},ccHD:function(t,e,i){"use strict";var n=i("lGHA");i.n(n).a},jUE0:function(t,e,i){},jb7o:function(t,e,i){"use strict";var n=i("L0LS");i.n(n).a},lGHA:function(t,e,i){},lVcU:function(t,e,i){},n6DN:function(t,e,i){},omC7:function(t,e,i){t.exports={default:i("aFNf"),__esModule:!0}},tD5v:function(t,e,i){"use strict";var n=i("v0Se");i.n(n).a},tKd7:function(t,e,i){"use strict";var n=i("ZySA"),s=(i("n6DN"),{name:"Index",directives:{waves:n.a},props:{judgeList:Array,radioList:Array,checkBoxList:Array,judgeScore:Number,radioScore:Number,checkBoxScore:Number,sum_score:Number,username:String,hash:String,edit:{default:!1,type:Boolean},showUser:{default:!1,type:Boolean}},methods:{deleteTopic:function(t){this.$emit("deleteTopic",t)},handleChange:function(t){1===t.type_id&&this.$emit("getSore",this.radioList,"radioScore"),2===t.type_id&&this.$emit("getSore",this.checkBoxList,"checkBoxScore"),3===t.type_id&&this.$emit("getSore",this.judgeList,"judgeScore")},submitPaper:function(){this.$emit("submitPaper")}}}),o=(i("YBzE"),i("jb7o"),i("ZrdR")),r=Object(o.a)(s,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:" paper"},[i("nav",{},[i("div",{staticClass:"paper_info"},[!t.edit&&t.showUser?i("span",[t._v("\n        姓名："+t._s(t.username)+"\n              \n        得分："+t._s(t.sum_score)+"分\n      ")]):t._e(),t._v(" "),i("span",[t._v("\n        题目总数量："+t._s(t.radioList.length+t.checkBoxList.length+t.judgeList.length)+"\n              \n        试卷总分："+t._s(Number.parseFloat((t.judgeScore+t.radioScore+t.checkBoxScore).toPrecision(12)))+"分\n      ")]),t._v(" "),t.edit?i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{float:"right"},attrs:{type:"primary",size:"mini"},on:{click:t.submitPaper}},[t._v("保存\n      ")]):t._e()],1)]),t._v(" "),i("div",{staticClass:"sub_box"},[i("div",{staticClass:"title"},[t._v("\n      一、单选题（共 "+t._s(t.radioList.length)+" 题，共 "+t._s(Number.parseFloat(t.radioScore.toPrecision(12)))+" 分）\n    ")]),t._v(" "),t._l(t.radioList,function(e,n){return i("div",{staticClass:"content clearfix"},[i("div",{staticClass:"topic"},[i("div",{staticClass:"sub_title clearfix"},[i("span",[t._v(t._s(n+1)+"、[ 单选 ]\n            "),t.showUser?i("span",[i("b",[t._v(" 用户答案：")]),t._v(t._s(e.question)+"  \n              "),i("b",[t._v("正确答案：")]),t._v(t._s(e.answer)+"\n            ")]):t._e()]),t._v(" "),i("span",{staticClass:"sub_score"},[t._v("\n            本题 "),t.edit?i("el-input-number",{attrs:{min:1,max:100,precision:1,size:"mini",label:"描述文字"},on:{change:function(i){t.handleChange(e)}},model:{value:e.point,callback:function(i){t.$set(e,"point",i)},expression:"v.point"}}):i("span",[t._v(t._s(e.point))]),t._v(" 分\n            "),t.edit?i("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(i){t.deleteTopic(e)}}}):t._e()],1)]),t._v(" "),i("div",{staticClass:"ql-snow"},[i("span",{staticClass:"topic_content ql-editor",domProps:{innerHTML:t._s(e.content_html)}})]),t._v(" "),t._l(e.option_html,function(e,n){return i("p",{staticClass:"opation"},[i("el-tag",{attrs:{size:"mini",effect:"plain"}},[t._v("\n            选项"+t._s(n)+"\n          ")]),t._v("  \n          "),i("span",{staticClass:"ql-snow"},[i("span",{staticClass:"ql-editor",domProps:{innerHTML:t._s(e)}})])],1)})],2)])})],2),t._v(" "),i("div",{staticClass:"sub_box"},[i("div",{staticClass:"title"},[t._v("\n      二、多选题（共 "+t._s(t.checkBoxList.length)+" 题，共 "+t._s(Number.parseFloat(t.checkBoxScore.toPrecision(12)))+" 分）\n    ")]),t._v(" "),t._l(t.checkBoxList,function(e,n){return i("div",{staticClass:"content clearfix"},[i("div",{staticClass:"topic"},[i("div",{staticClass:"sub_title clearfix"},[i("span",[t._v(t._s(n+1)+"、[ 多选 ]\n            "),t.showUser?i("span",[i("b",[t._v(" 用户答案：")]),t._v(t._s(e.question)+"  \n              "),i("b",[t._v("正确答案：")]),t._v(t._s(e.answer)+"\n            ")]):t._e()]),t._v(" "),i("span",{staticClass:"sub_score"},[t._v("\n            本题 "),t.edit?i("el-input-number",{attrs:{min:1,max:100,precision:1,size:"mini",label:"描述文字"},on:{change:function(i){t.handleChange(e)}},model:{value:e.point,callback:function(i){t.$set(e,"point",i)},expression:"v.point"}}):i("span",[t._v(t._s(e.point))]),t._v(" 分\n            "),t.edit?i("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(i){t.deleteTopic(e)}}}):t._e()],1)]),t._v(" "),i("div",{staticClass:"ql-snow"},[i("span",{staticClass:"topic_content ql-editor",domProps:{innerHTML:t._s(e.content_html)}})]),t._v(" "),t._l(e.option_html,function(e,n){return i("p",{staticClass:"opation"},[i("el-tag",{attrs:{size:"mini",effect:"plain"}},[t._v("\n            选项"+t._s(n)+"\n          ")]),t._v("  \n          "),i("span",{staticClass:"ql-snow"},[i("span",{staticClass:"ql-editor",domProps:{innerHTML:t._s(e)}})])],1)})],2)])})],2),t._v(" "),i("div",{staticClass:"sub_box"},[i("div",{staticClass:"title"},[t._v("\n      三、判断题（共 "+t._s(t.judgeList.length)+" 题，共 "+t._s(Number.parseFloat(t.judgeScore.toPrecision(12)))+" 分）\n    ")]),t._v(" "),t._l(t.judgeList,function(e,n){return i("div",{staticClass:"content clearfix"},[i("div",{staticClass:"topic"},[i("div",{staticClass:"sub_title clearfix"},[i("span",[t._v(t._s(n+1)+"、[ 判断 ]\n            "),t.showUser?i("span",[i("b",[t._v(" 用户答案：")]),t._v(t._s(e.question)+"  \n              "),i("b",[t._v("正确答案：")]),t._v(t._s(e.answer)+"\n            ")]):t._e()]),t._v(" "),i("span",{staticClass:"sub_score"},[t._v("\n            本题 "),t.edit?i("el-input-number",{attrs:{min:1,max:100,precision:1,size:"mini",label:"描述文字"},on:{change:function(i){t.handleChange(e)}},model:{value:e.point,callback:function(i){t.$set(e,"point",i)},expression:"v.point"}}):i("span",[t._v(t._s(e.point))]),t._v(" 分\n            "),t.edit?i("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(i){t.deleteTopic(e)}}}):t._e()],1)]),t._v(" "),i("div",{staticClass:"ql-snow"},[i("span",{staticClass:"topic_content ql-editor",domProps:{innerHTML:t._s(e.content_html)}})]),t._v(" "),t._l(e.option_html,function(e,n){return i("p",{staticClass:"opation"},[i("el-tag",{attrs:{size:"mini",effect:"plain"}},[t._v("\n            选项"+t._s(n)+"\n          ")]),t._v("  \n          "),i("span",{staticClass:"ql-snow"},[i("span",{staticClass:"ql-editor",domProps:{innerHTML:t._s(e)}})])],1)})],2)])})],2)])},[],!1,null,"15f725f4",null);r.options.__file="index.vue";e.a=r.exports},v0Se:function(t,e,i){},"zoc+":function(t,e,i){"use strict";i.r(e);var n=i("omC7"),s=i.n(n),o=i("uTCP"),r=i("tBjE"),a=i("C58x"),c=i("Y5bG"),l={components:{QuillEditor:o.a,UploadFile:r.a},data:function(){return{userList:[],fileList:[],step:!0,showEn:!0,competition_typeList:[{label:"标准赛制",value:1},{label:"灵活赛制",value:2}],startEndTime:[],
//! 数据表单
ruleForm:{name_zh:"",start_time:"",end_time:"",competition_type:"",competition_time:"",description_zh:"",description_html_zh:"",public:!0,is_review:!0,is_review_shows:!0,is_show_score:!0,user_ids:[],competition_guide_zh:"",competition_guide_html_zh:"",competition_rule_zh:"",competition_rule_html_zh:"",matters_needing_attention_zh:"",matters_needing_attention_html_zh:"",score_ranking_zh:"",score_ranking_html_zh:"",reward_zh:"",reward_html_zh:"",contact_way_zh:"",contact_way_html_zh:"",logo:"",cover:"",competition_company_url:"",name_en:"",description_en:"",description_html_en:"",competition_guide_en:"",competition_guide_html_en:"",competition_rule_en:"",competition_rule_html_en:"",matters_needing_attention_en:"",matters_needing_attention_html_en:"",score_ranking_en:"",score_ranking_html_en:"",reward_en:"",reward_html_en:"",contact_way_en:"",contact_way_html_en:""},rules:{description_zh:[{required:!0,message:"请填写竞赛简介",trigger:"blur"},{min:3,max:100,message:"长度在 3 到 100 个字",trigger:"blur"}],competition_type:[{required:!0,message:"请选择竞赛形式",trigger:"change"}],competition_time:[{required:!0,message:"请填写竞赛时长",trigger:"blur"},{validator:function(t,e,i){/(^[1-9]\d*$)/.test(e)?i():i(new Error("请输入正整数"))},trigger:"blur"}],name_zh:[{required:!0,message:"请填写竞赛名称",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字",trigger:"blur"}]},hash:this.$route.query.hash,process:null,imgUrl:{logo:"",cover:"",competition_company_url:""}}},created:function(){this.getUser(),this.hash&&(this.getInfo(),this.step=!1)},mounted:function(){var t=this;setTimeout(function(){t.showEn=!1},200)},methods:{goBottom:function(){Object(c.a)(1e5,100)},getUser:function(){var t=this;Object(a.q)().then(function(e){t.userList=e.data})},nextStep:function(){this.$emit("nextStep",this.step)},getInfo:function(){var t=this;Object(a.j)(this.hash).then(function(e){for(var i in t.ruleForm)t.ruleForm[i]=e.data[i];t.startEndTime=[e.data.start_time,e.data.end_time],t.process=e.data.process,setTimeout(function(){Object(c.a)(0,0)},50)})},deleteImg:function(t){var e=this;this.$confirm("此操作会删除服务器中的图片，确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.c)(e.hash,{img:t}).then(function(i){i.data.success&&(e.$message.success("删除成功"),e.ruleForm[t]="")})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},clearImg:function(t){this.imgUrl[t]="",this.$refs[t].value=""},handleImage:function(t){var e=this,i=this.$refs[t].files[0];if(i){var n=new FileReader;n.readAsDataURL(i),n.onload=function(i){e.imgUrl[t]=n.result}}else this.imgUrl[t]=""},onSubmit:function(){var t=this,e=new FormData;this.ruleForm.start_time=this.startEndTime[0],this.ruleForm.end_time=this.startEndTime[1];var i=new Date(this.$store.state.config.time),n=new Date(this.ruleForm.start_time),o=new Date(this.ruleForm.end_time);if(i.getTime()>n.getTime()&&0!==this.process)this.$message.error("开始时间不能早于当前时间");else if(i.getTime()>o.getTime())this.$message.error("结束时间不能早于当前时间");else if(this.ruleForm.start_time!==this.ruleForm.end_time){var r=this.ruleForm;for(var c in r)"user_ids"==c?e.append("user_ids",s()(r.user_ids)):e.append(c,r[c]);this.hash?Object(a.f)(this.hash,e).then(function(e){e.data.success&&t.nextStep()}):Object(a.b)(e).then(function(e){e.data.success&&(sessionStorage.setItem("hash",e.data.hash),t.$router.push({path:"/competition/theory/editMatch/editMatch",query:{hash:e.data.hash,step:1}}))})}else this.$message.error("开始时间和结束时间不能相同")},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return e.$message.error("填写信息有误"),!1;e.onSubmit()})}}},u=(i("RyQl"),i("ZrdR")),m=Object(u.a)(l,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container create_match"},[i("div",{staticClass:"goBottom"},[i("el-button",{attrs:{type:"warning"},on:{click:t.goBottom}},[t._v("直达底部")])],1),t._v(" "),i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"150px"}},[i("el-form-item",{attrs:{label:"竞赛名称",prop:"name_zh"}},[i("el-input",{attrs:{clearable:"",placeholder:"请填写竞赛名称"},model:{value:t.ruleForm.name_zh,callback:function(e){t.$set(t.ruleForm,"name_zh","string"==typeof e?e.trim():e)},expression:"ruleForm.name_zh"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"竞赛形式",prop:"competition_type"}},[i("el-select",{attrs:{placeholder:"请选择竞赛形式",clearable:""},model:{value:t.ruleForm.competition_type,callback:function(e){t.$set(t.ruleForm,"competition_type",e)},expression:"ruleForm.competition_type"}},t._l(t.competition_typeList,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),2==t.ruleForm.competition_type?i("el-form-item",{attrs:{label:"竞赛时长",prop:"competition_time"}},[i("el-input",{attrs:{clearable:"",placeholder:"请填写竞赛时长,以分钟为单位。"},model:{value:t.ruleForm.competition_time,callback:function(e){t.$set(t.ruleForm,"competition_time","string"==typeof e?e.trim():e)},expression:"ruleForm.competition_time"}})],1):t._e(),t._v(" "),i("el-form-item",{attrs:{label:"起止时间",required:""}},[i("el-date-picker",{attrs:{disabled:0===t.process,clearable:!1,type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.startEndTime,callback:function(e){t.startEndTime=e},expression:"startEndTime"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"竞赛封面"}},[i("UploadFile",{attrs:{file:t.ruleForm.cover,"file-type":["jpg","png"],"list-type":"picture-card","file-size":2097152},on:{"update:file":function(e){t.$set(t.ruleForm,"cover",e)}}}),t._v("\n      （请上传PNG、JPG格式文件，大小不超过2M）\n    ")],1),t._v(" "),i("el-form-item",{attrs:{label:"竞赛简介",prop:"description_zh"}},[i("el-input",{attrs:{rows:8,prop:"description_zh",type:"textarea",placeholder:"请输入竞赛简介"},model:{value:t.ruleForm.description_zh,callback:function(e){t.$set(t.ruleForm,"description_zh",e)},expression:"ruleForm.description_zh"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"公开/隐藏"}},[i("el-switch",{attrs:{"active-value":!0,"inactive-value":!1,"active-text":"公开","inactive-text":"隐藏"},model:{value:t.ruleForm.public,callback:function(e){t.$set(t.ruleForm,"public",e)},expression:"ruleForm.public"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"是否允许回顾"}},[i("el-switch",{attrs:{"active-value":!0,"inactive-value":!1,"active-text":"允许","inactive-text":"禁止"},model:{value:t.ruleForm.is_review,callback:function(e){t.$set(t.ruleForm,"is_review",e)},expression:"ruleForm.is_review"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"答案显示"}},[i("el-radio-group",{model:{value:t.ruleForm.is_review_shows,callback:function(e){t.$set(t.ruleForm,"is_review_shows",e)},expression:"ruleForm.is_review_shows"}},[i("el-radio",{attrs:{label:!0,border:""}},[t._v("竞赛回顾显示答案和分数")]),t._v(" "),i("el-radio",{attrs:{label:!1,border:""}},[t._v("竞赛回顾不显示答案和分数")])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"分数显示"}},[i("el-radio-group",{model:{value:t.ruleForm.is_show_score,callback:function(e){t.$set(t.ruleForm,"is_show_score",e)},expression:"ruleForm.is_show_score"}},[i("el-radio",{attrs:{label:!0,border:""}},[t._v("交卷时显示分数")]),t._v(" "),i("el-radio",{attrs:{label:!1,border:""}},[t._v("交卷时不显示分数")])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"竞赛logo"}},[i("UploadFile",{attrs:{file:t.ruleForm.logo,"file-type":["jpg","png"],"list-type":"picture-card","file-size":2097152},on:{"update:file":function(e){t.$set(t.ruleForm,"logo",e)}}}),t._v("\n      （请上传PNG、JPG格式文件，大小不超过2M）\n    ")],1),t._v(" "),i("el-form-item",{attrs:{label:"参赛指南",prop:"competition_guide_zh"}},[i("quill-editor",{attrs:{holder:"请输入参赛指南"},model:{value:t.ruleForm.competition_guide_html_zh,callback:function(e){t.$set(t.ruleForm,"competition_guide_html_zh",e)},expression:"ruleForm.competition_guide_html_zh"}})],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showEn,expression:"showEn"}]},[i("p",{staticStyle:{"text-align":"center","font-weight":"bold","font-size":"20px"}},[t._v("下方为英文信息")]),t._v(" "),i("el-form-item",{attrs:{label:"竞赛名称英文",prop:"name_en"}},[i("el-input",{attrs:{placeholder:"请填写竞赛英文名称第一行"},model:{value:t.ruleForm.name_en,callback:function(e){t.$set(t.ruleForm,"name_en","string"==typeof e?e.trim():e)},expression:"ruleForm.name_en"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"竞赛简介英文",prop:"description_en"}},[i("el-input",{attrs:{rows:8,type:"textarea",placeholder:"请输入竞赛简介"},model:{value:t.ruleForm.description_en,callback:function(e){t.$set(t.ruleForm,"description_en","string"==typeof e?e.trim():e)},expression:"ruleForm.description_en"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"参赛指南英文",prop:"competition_guide_en"}},[i("quill-editor",{attrs:{holder:"请输入参赛指南英文"},model:{value:t.ruleForm.competition_guide_html_en,callback:function(e){t.$set(t.ruleForm,"competition_guide_html_en",e)},expression:"ruleForm.competition_guide_html_en"}})],1)],1),t._v(" "),i("el-form-item",[i("span",{staticStyle:{color:"red","font-size":"18px"}},[t._v("如果竞赛信息有所更改，一定要先点击保存，否则修改的信息会丢失。")])]),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"success"},on:{click:function(e){t.showEn=!t.showEn}}},[t._v(t._s(t.showEn?"关闭填写英文信息":"显示填写英文信息"))]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保存")]),t._v(" "),i("el-button",{attrs:{disabled:t.step,type:"primary"},on:{click:function(e){t.nextStep("ruleForm")}}},[t._v("下一步")])],1)],1)],1)},[],!1,null,null,null);m.options.__file="index.vue";var p=m.exports,d={data:function(){return{data:[],value:[],hash:this.$route.query.hash}},created:function(){this.getTeamList()},methods:{getTeamList:function(){var t=this;Object(a.n)(this.hash).then(function(e){t.data=e.data.teams,t.value=e.data.team_ids})},submitForm:function(){var t=this,e={ids:this.value};Object(a.w)(this.hash,e).then(function(e){e.data.success&&(t.$router.push({path:"/competition/theory/index"}),t.$message.success("操作成功"))})},nextStep:function(){this.$emit("nextStep")},backStep:function(){this.$emit("backStep")}}},h=(i("ccHD"),Object(u.a)(d,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"transfer_box"},[i("el-transfer",{attrs:{titles:["所有选手","参赛选手"],props:{key:"id",label:"name"},data:t.data,"filter-placeholder":"请输入选手名称",filterable:""},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t._v(" "),i("span",{staticStyle:{color:"red","font-size":"18px","margin-top":"20px"}},[t._v("如果竞赛信息有所更改，一定要先点击保存，否则修改的信息会丢失。")]),t._v(" "),i("div",{staticClass:"btn_box"},[i("el-button",{attrs:{type:"primary"},on:{click:t.backStep}},[t._v("上一步")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保存")]),t._v("  \n    ")],1)],1)},[],!1,null,"7bc15c4d",null));h.options.__file="index.vue";var _=h.exports,v=i("Mz3J"),f=i("ZySA"),b=i("tKd7"),g={name:"TopicManagement",directives:{waves:f.a},components:{Pagination:v.a,paper:b.a},data:function(){return{matchList:[],ids:[],tableKey:0,listTotal:0,listLoading:!1,listPage:1,listQuery:{offset:0,limit:this.$store.state.config.row,evt_hash:this.$route.query.hash},showView:!1,judgeList:[],radioList:[],checkBoxList:[],judgeScore:0,radioScore:0,checkBoxScore:0}},created:function(){this.getList()},methods:{goImport:function(){var t=this;Object(a.a)(this.listQuery.evt_hash).then(function(e){e.data.success&&t.$router.push({path:"/competition/theory/editMatch/importTopic",query:{hash:t.listQuery.evt_hash}})})},viewPaper:function(){var t=this;Object(a.x)(this.listQuery.evt_hash).then(function(e){t.radioList=e.data[1],t.judgeList=e.data[3],t.checkBoxList=e.data[2],t.getSore(t.judgeList,"judgeScore"),t.getSore(t.radioList,"radioScore"),t.getSore(t.checkBoxList,"checkBoxScore"),t.showView=!0})},getSore:function(t,e){this[e]=t.reduce(function(t,e){return t+e.point},0)},nextStep:function(){this.$emit("nextStep")},indexMethod:function(t){return(this.listQuery.offset-1)*this.listQuery.limit+t+1},backStep:function(){this.$emit("backStep")},removeSub:function(){var t=this,e={};e.ids=this.ids,this.ids.length<=0||this.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.e)(t.listQuery.evt_hash,e).then(function(e){e.data.success&&(t.$message.success("操作成功"),t.getList())})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},getList:function(t){var e=this;this.listQuery.offset=this.listPage,Object(a.m)(this.listQuery.evt_hash,this.listQuery).then(function(t){var i=t.data;e.matchList=i.rows,e.listTotal=i.total,e.listTotal<=(e.listQuery.offset-1)*e.listQuery.limit&&0!=e.listTotal&&(e.listQuery.offset=e.listQuery.offset-1,e.getList())})},checkTable:function(t){this.ids=t.map(function(t){return t.id})}}},y=(i("tD5v"),Object(u.a)(g,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.goImport}},[t._v(" 导入题目")]),t._v(" "),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.removeSub}},[t._v(" 删除")]),t._v(" "),i("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.viewPaper}},[t._v("试卷预览")])],1),t._v(" "),i("div",{staticClass:"filter-container"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.matchList,border:"",fit:"","highlight-current-row":"","tooltip-effect":"dark"},on:{"selection-change":t.checkTable}},[i("el-table-column",{attrs:{align:"center",type:"selection"}}),t._v(" "),i("el-table-column",{attrs:{align:"center",prop:"title",label:"题目名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.row.title.length>20?e.row.title.substr(0,20)+"...":e.row.title))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",prop:"type_name",label:"题目类型"}}),t._v(" "),i("el-table-column",{attrs:{align:"center",prop:"category_name",label:"题目方向"}}),t._v(" "),i("el-table-column",{attrs:{align:"center",prop:"tag_name",label:"题目标签"}})],1)],1),t._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:t.listTotal>0,expression:"listTotal>0"}],attrs:{total:t.listTotal,page:t.listPage,limit:t.listQuery.limit},on:{"update:page":function(e){t.listPage=e},"update:limit":function(e){t.$set(t.listQuery,"limit",e)},pagination:t.getList}}),t._v(" "),i("div",{staticClass:"btn_box topicStep_box"},[i("el-button",{attrs:{type:"primary"},on:{click:t.backStep}},[t._v("上一步")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.nextStep}},[t._v("下一步")])],1),t._v(" "),i("el-dialog",{attrs:{visible:t.showView,title:"试卷预览",width:"80%"},on:{"update:visible":function(e){t.showView=e}}},[i("paper",{attrs:{"judge-list":t.judgeList,"check-box-list":t.checkBoxList,"radio-list":t.radioList,"judge-score":t.judgeScore,"radio-score":t.radioScore,"check-box-score":t.checkBoxScore,"show-user":!1},on:{"update:judgeList":function(e){t.judgeList=e},"update:checkBoxList":function(e){t.checkBoxList=e},"update:radioList":function(e){t.radioList=e}}})],1)],1)},[],!1,null,"66f5fd40",null));y.options.__file="index.vue";var w={name:"Index",components:{createMatch:p,user:_,topic:y.exports},data:function(){return{tabMapOptions:[{label:"基本信息",key:"status"},{label:"用户",key:"user"},{label:"题目",key:"sub"}],activeName:"status",active:1*this.$route.query.step||0}},created:function(){var t=this;this.$route.query.hash&&Object(a.j)(this.$route.query.hash).then(function(e){t.$store.dispatch("changeMatchName",e.data.name_zh)})},beforeDestroy:function(){this.$store.dispatch("changeMatchName","")},methods:{nextStep:function(){this.active++>3&&(this.active=0),this.$route.query.step=this.active},backStep:function(){this.active--<0&&(this.active=0),this.$route.query.step=this.active}}},x=(i("Ux6x"),Object(u.a)(w,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("el-steps",{staticStyle:{"margin-top":"20px"},attrs:{active:t.active,"finish-status":"success",simple:""}},[i("el-step",{attrs:{title:"基本信息"}}),t._v(" "),i("el-step",{attrs:{title:"题目"}}),t._v(" "),i("el-step",{attrs:{title:"选择选手"}})],1)],1),t._v(" "),0==t.active?i("div",[i("createMatch",{on:{nextStep:t.nextStep}})],1):t._e(),t._v(" "),1==t.active?i("div",[i("topic",{on:{nextStep:t.nextStep,backStep:t.backStep}})],1):t._e(),t._v(" "),2==t.active?i("div",[i("user",{on:{nextStep:t.nextStep,backStep:t.backStep}})],1):t._e()])},[],!1,null,"c83c8b20",null));x.options.__file="index.vue";e.default=x.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0c46"],{"+Wop":function(t,e,a){"use strict";var n=a("ENH3");a.n(n).a},"2cRn":function(t,e,a){"use strict";a.d(e,"a",function(){return i}),a.d(e,"g",function(){return s}),a.d(e,"h",function(){return o}),a.d(e,"e",function(){return r}),a.d(e,"b",function(){return c}),a.d(e,"d",function(){return l}),a.d(e,"c",function(){return u}),a.d(e,"f",function(){return d});var n=a("t3Un");function i(t){return Object(n.a)({url:"/api/v1/common/admin/vpn/"+t+"/vpn/join",method:"post"})}function s(t){return Object(n.a)({url:"/api/v1/common/admin/vpn/"+t+"/vpn_server/deploy",method:"post"})}function o(t){return Object(n.a)({url:"/api/v1/common/admin/vpn/"+t+"/vpn_ca/deploy",method:"post"})}function r(t){return Object(n.a)({url:"/api/v1/common/admin/vpn/"+t+"/vpn_server/deploy",method:"delete"})}function c(t){return Object(n.a)({url:"/api/v1/common/admin/vpn/"+t+"/server/list",method:"get"})}function l(t,e){return Object(n.a)({url:"/api/v1/common/admin/vpn/"+t+"/user/list",method:"get",params:e})}function u(t,e){return Object(n.a)({url:"/api/v1/common/admin/vpn/"+t+"/vpn_server/deploy",method:"get",params:e})}function d(t,e){return Object(n.a)({url:"/api/v1/common/admin/vpn/"+t+"/vpn_reset/"+e+"/deploy",method:"post"})}},"63ea":function(t,e,a){"use strict";var n=a("hqvf");a.n(n).a},"6DOF":function(t,e,a){"use strict";var n=a("nMsD");a.n(n).a},"6M+K":function(t,e,a){},"6Szu":function(t,e,a){},BpP4:function(t,e,a){"use strict";var n=a("6Szu");a.n(n).a},"E+Qz":function(t,e,a){"use strict";a.d(e,"a",function(){return i}),a.d(e,"b",function(){return s});var n=a("t3Un");function i(t){return Object(n.a)({url:"/api/v1/common/admin/delete_event_logo/",method:"post",data:t})}function s(t){return Object(n.a)({url:"/api/v1/att_def/admin/deploy/tasks/",method:"get",params:t})}},ENH3:function(t,e,a){},FMtV:function(t,e,a){"use strict";var n=a("W4Sk");a.n(n).a},IuWY:function(t,e,a){"use strict";var n=a("fyhJ");a.n(n).a},IyF6:function(t,e,a){"use strict";a.d(e,"N",function(){return i}),a.d(e,"G",function(){return s}),a.d(e,"X",function(){return o}),a.d(e,"d",function(){return r}),a.d(e,"R",function(){return c}),a.d(e,"cb",function(){return l}),a.d(e,"S",function(){return u}),a.d(e,"L",function(){return d}),a.d(e,"db",function(){return m}),a.d(e,"H",function(){return p}),a.d(e,"t",function(){return f}),a.d(e,"u",function(){return h}),a.d(e,"g",function(){return v}),a.d(e,"B",function(){return _}),a.d(e,"M",function(){return g}),a.d(e,"J",function(){return b}),a.d(e,"T",function(){return w}),a.d(e,"U",function(){return y}),a.d(e,"b",function(){return k}),a.d(e,"I",function(){return x}),a.d(e,"F",function(){return j}),a.d(e,"Q",function(){return O}),a.d(e,"ab",function(){return L}),a.d(e,"eb",function(){return S}),a.d(e,"a",function(){return $}),a.d(e,"c",function(){return T}),a.d(e,"P",function(){return N}),a.d(e,"s",function(){return I}),a.d(e,"Z",function(){return Q}),a.d(e,"E",function(){return C}),a.d(e,"V",function(){return z}),a.d(e,"f",function(){return D}),a.d(e,"C",function(){return P}),a.d(e,"h",function(){return F}),a.d(e,"W",function(){return M}),a.d(e,"q",function(){return q}),a.d(e,"e",function(){return V}),a.d(e,"z",function(){return E}),a.d(e,"A",function(){return R}),a.d(e,"r",function(){return U}),a.d(e,"v",function(){return W}),a.d(e,"Y",function(){return B}),a.d(e,"j",function(){return J}),a.d(e,"w",function(){return Y}),a.d(e,"i",function(){return A}),a.d(e,"l",function(){return K}),a.d(e,"m",function(){return Z}),a.d(e,"bb",function(){return G}),a.d(e,"k",function(){return H}),a.d(e,"n",function(){return X}),a.d(e,"D",function(){return tt}),a.d(e,"x",function(){return et}),a.d(e,"o",function(){return at}),a.d(e,"p",function(){return nt}),a.d(e,"y",function(){return it}),a.d(e,"O",function(){return st}),a.d(e,"K",function(){return ot});var n=a("t3Un");function i(t){return Object(n.a)({method:"get",url:"/api/v1/att_def/admin/setting/event_list/",params:t})}function s(t){return Object(n.a)({url:"/api/v1/att_def/admin/setting/event_delete/",method:"post",data:t})}function o(t){return Object(n.a)({url:"/api/v1/att_def/admin/setting/event_public/",method:"post",data:t})}function r(t){return Object(n.a)({url:"/api/v1/att_def/admin/setting/event_list/",method:"post",data:t})}function c(t){return Object(n.a)({url:"/api/v1/att_def/admin/setting/team_or_user_select",method:"get",params:t})}function l(t,e){return Object(n.a)({url:"/api/v1/att_def/admin/setting/team_or_user_list",method:"post",params:t,data:e})}function u(t){return Object(n.a)({url:"/api/v1/att_def/admin/setting/challenge_list/",method:"get",params:t})}function d(t){return Object(n.a)({url:"/api/v1/att_def/admin/setting/challenge_store_select/",method:"get",params:t})}function m(t,e){return Object(n.a)({url:"/api/v1/att_def/admin/setting/challenge_list/",method:"post",params:t,data:e})}function p(t,e){return Object(n.a)({url:"/api/v1/att_def/admin/setting/challenge/",method:"post",params:t,data:e})}function f(t,e){return Object(n.a)({url:"/api/v1/att_def/admin/setting/challenge/",method:"get",params:t})}function h(t,e){return Object(n.a)({url:"/api/v1/att_def/admin/setting/challenge/",method:"patch",params:t,data:e})}function v(t,e){return Object(n.a)({url:"/api/v1/att_def/admin/setting/change_score?event_id="+t,method:"post",data:e})}function _(t,e){return Object(n.a)({url:"/api/v1/att_def/admin/setting/change_score?event_id="+t,method:"put",data:e})}function g(t){return Object(n.a)({method:"get",url:"/api/v1/att_def/admin/setting/event_list/"+t+"/"})}function b(t,e){return Object(n.a)({method:"patch",url:"/api/v1/att_def/admin/setting/event_list/"+t+"/",data:e})}function w(t){return Object(n.a)({method:"get",url:"/api/v1/att_def/admin/setting/network_list/",params:t})}function y(t){return Object(n.a)({method:"get",url:"/api/v1/att_def/admin/setting/team_count/",params:t})}function k(t,e){return Object(n.a)({method:"post",url:"/api/v1/att_def/admin/setting/network_list/",params:t,data:e})}function x(t,e){return Object(n.a)({method:"patch",url:"/api/v1/att_def/admin/setting/network_list/",params:t,data:e})}function j(t){return Object(n.a)({method:"delete",url:"/api/v1/att_def/admin/setting/network_list/",params:t})}function O(t){return Object(n.a)({method:"get",url:"/api/v1/att_def/admin/operation/notice_list/",params:t})}function L(t,e){return Object(n.a)({method:"post",url:"/api/v1/att_def/admin/operation/notice_delete/",params:t,data:e})}function S(t,e){return Object(n.a)({method:"post",url:"/api/v1/att_def/admin/operation/notice_top/",params:t,data:e})}function $(t,e){return Object(n.a)({method:"post",url:"/api/v1/att_def/admin/operation/notice_list/",params:t,data:e})}function T(t,e){return Object(n.a)({method:"patch",url:"/api/v1/att_def/admin/operation/notice_list/",params:t,data:e})}function N(t){return Object(n.a)({method:"get",url:"/api/v1/att_def/admin/operation/operation_data/",params:t})}function I(t,e){return Object(n.a)({method:"post",url:"/api/v1/att_def/admin/operation/show_rank/",params:t,data:e})}function Q(t){return Object(n.a)({method:"post",url:"/api/v1/att_def/admin/operation/upload_pushflag_file/",params:t})}function C(t,e){return Object(n.a)({method:"post",url:"/api/v1/att_def/admin/operation/use_vis/",params:t,data:e})}function z(t,e){return Object(n.a)({method:"post",url:"/api/v1/att_def/admin/operation/init_scene/",params:t,data:e})}function D(t,e){return Object(n.a)({method:"post",url:"/api/v1/att_def/admin/operation/write_up/",params:t,data:e})}function P(t,e){return Object(n.a)({method:"post",url:"/api/v1/att_def/admin/operation/time_change/",params:t,data:e})}function F(t,e){return Object(n.a)({method:"post",url:"/api/v1/att_def/admin/operation/event_control/",params:t,data:e})}function M(t){return Object(n.a)({method:"post",url:"/api/v1/att_def/admin/operation/init_virtual/",params:t})}function q(t){return Object(n.a)({method:"get",url:"/api/v1/att_def/admin/operation/operation_team_data/",params:t})}function V(t,e){return Object(n.a)({method:"post",url:"/api/v1/att_def/admin/operation/team_status/",params:t,data:e})}function E(t,e){return Object(n.a)({method:"post",url:"/api/v1/att_def/admin/operation/reward_score/",params:t,data:e})}function R(t,e){return Object(n.a)({method:"get",url:"/api/v1/att_def/admin/operation/reward_score/",params:t})}function U(t){return Object(n.a)({method:"get",url:"/api/v1/att_def/admin/operation/challenge_operation_data/",params:t})}function W(t,e){return Object(n.a)({method:"post",url:"/api/v1/att_def/admin/operation/challenge_status/",params:t,data:e})}function B(t,e){return Object(n.a)({method:"post",url:"/api/v1/att_def/admin/operation/pull_image/",params:t,data:e})}function J(t){return Object(n.a)({method:"post",url:"/api/v1/att_def/admin/deploy/init_env/",params:t})}function Y(t){return Object(n.a)({method:"get",url:"/api/v1/att_def/admin/deploy/task_progress/",params:t})}function A(t){return Object(n.a)({method:"post",url:"/api/v1/att_def/admin/deploy/init_network/",params:t})}function K(t){return Object(n.a)({method:"post",url:"/api/v1/att_def/admin/deploy/init_team/",params:t})}function Z(t){return Object(n.a)({method:"post",url:"/api/v1/att_def/admin/deploy/init_challenge_env/",params:t})}function G(t){return Object(n.a)({method:"get",url:"/api/v1/att_def/admin/operation/deploy_status/",params:t})}function H(t,e){return Object(n.a)({method:"post",url:"/api/v1/att_def/admin/operation/challenge_env_control/",params:t,data:e})}function X(t,e){return Object(n.a)({method:"post",url:"/api/v1/att_def/admin/operation/upload_pushflag/",params:t,data:e})}function tt(t,e){return Object(n.a)({method:"post",url:"/api/v1/att_def/admin/operation/check_scripts/",params:t,data:e})}function et(t,e){return Object(n.a)({method:"post",url:"/api/v1/att_def/admin/operation/push_scripts/",params:t,data:e})}function at(t,e){return Object(n.a)({method:"get",url:"/api/v1/att_def/admin/operation/operation_monitor/",params:t,data:e})}function nt(t,e){return Object(n.a)({method:"get",url:"/api/v1/att_def/admin/operation/event_statistic/",params:t})}function it(t,e){return Object(n.a)({method:"get",url:"/api/v1/att_def/admin/operation/event_statistic/"+e,params:t})}function st(t){return Object(n.a)({method:"get",url:"/api/v1/att_def/admin/operation/show_panel",params:t})}function ot(t){return Object(n.a)({method:"get",url:"/api/v1/att_def/admin/operation/operation_writeup_download_all",params:t,responseType:"blob"})}},"Mp1/":function(t,e,a){"use strict";a.r(e);var n=a("omC7"),i=a.n(n),s=a("Mz3J"),o=a("ZySA"),r=a("IyF6"),c=a("E+Qz"),l={name:"Index",directives:{waves:o.a},components:{Pagination:s.a},data:function(){return{params:{event_id:this.$route.query.id},message:[],matchList:[{model:"环境模块",progress:0,id:1,status:"success",statusText:""},{model:"队伍模块",progress:0,id:2,status:"success",statusText:""},{model:"网络模块",progress:0,id:3,status:"success",statusText:""},{model:"题目环境模块",progress:0,id:4,status:"success",statusText:""}],is_disabled:!1,intervalId:null,id:this.$route.query.id}},created:function(){this.getList()},methods:{getList:function(){var t=this;Object(c.b)({event_id:this.id}).then(function(e){var a=e.data;!1===a.deploy_env?(t.matchList[0].progress=100,t.matchList[0].status="exception"):a.deploy_env&&(t.matchList[0].progress=100),!1===a.deploy_team?(t.matchList[1].progress=100,t.matchList[1].status="exception"):a.deploy_team&&(t.matchList[1].progress=100),!1===a.deploy_network?(t.matchList[2].progress=100,t.matchList[2].status="exception"):a.deploy_network&&(t.matchList[2].progress=100),!1===a.deploy_challenge?(t.matchList[3].progress=100,t.matchList[3].status="exception"):a.deploy_challenge&&(t.matchList[3].progress=100)})},startDeloy:function(t){var e=this;1==t&&Object(r.j)(this.params).then(function(a){a.data.success&&e.showProgress("deploy_env",t-1)}),2==t&&Object(r.l)(this.params).then(function(a){a.data.success&&e.showProgress("deploy_team",t-1)}),3==t&&Object(r.i)(this.params).then(function(a){a.data.success&&e.showProgress("deploy_network",t-1)}),4==t&&Object(r.m)(this.params).then(function(a){a.data.success&&e.showProgress("deploy_challenge",t-1)})},showLog:function(){},showProgress:function(t,e){var a=this;this.matchList[e].status="success",this.is_disabled=!0;var n=JSON.parse(i()(this.params));n.task_type=t,this.intervalId=setInterval(function(){Object(r.w)(n).then(function(t){var n=t.data;n.success?(a.matchList[e].progress=1*n.progress,a.message=n.message):(clearInterval(a.intervalId),a.intervalId=null,a.is_disabled=!1),n.progress>=100&&(clearInterval(a.intervalId),a.intervalId=null,a.is_disabled=!1),n.fail_task?(a.matchList[e].status="exception",a.matchList[e].statusText="失败"):100===n.progress&&(a.matchList[e].status="success",a.matchList[e].statusText="成功")})},1e3)}}},u=(a("IuWY"),a("ZrdR")),d=Object(u.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.matchList,border:""}},[a("el-table-column",{attrs:{align:"center",prop:"model",width:"100",label:"模块"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"solved_count",label:"进度"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{position:"relative"}},[a("el-progress",{staticStyle:{width:"90%"},attrs:{"text-inside":!0,"stroke-width":24,percentage:e.row.progress,status:e.row.status}}),t._v(" "),a("span",{staticStyle:{position:"absolute",right:"0",top:"0"}},[t._v(t._s(e.row.statusText))])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{disabled:t.is_disabled,size:"mini",type:"success"},on:{click:function(a){t.startDeloy(e.row.id)}}},[t._v("开始部署")])]}}])})],1)],1),t._v(" "),t.message.length>0?a("div",{staticClass:"filter-container dev_info"},t._l(t.message,function(e){return a("p",[t._v(t._s(e))])})):t._e()])},[],!1,null,"6d9eff1c",null);d.options.__file="index.vue";var m=d.exports,p={name:"Index",directives:{waves:o.a},components:{Pagination:s.a},data:function(){return{value1:0,params:{event_id:this.$route.query.id},challenge_id:"",matchList:[],deployList:[],step:1,listTotal:0,listPage:1,scorePage:1,scoreQuery:{order:"asc",event:"",user:""},listQuery:{offset:0,limit:this.$store.state.config.row,search:"",order:"asc",event:this.$route.query.id}}},created:function(){this.getList()},methods:{pullImage:function(t){var e=this;Object(r.Y)(this.params,{challenge_id:t.challenge_id}).then(function(t){t.data.success&&(e.$message.success("操作成功"),e.getList())})},upLoadFlag:function(t){var e=this,a={team_id:t.team_id||0,challenge_id:t.challenge_id||this.challenge_id};Object(r.n)(this.params,a).then(function(t){t.data.success&&(e.$message.success("操作成功"),e.getList())})},deployStatus:function(t,e){var a=this,n={team_id:t.team_id||0,challenge_id:t.challenge_id||this.challenge_id,action:e};Object(r.k)(this.params,n).then(function(t){t.data.success&&(a.$message.success("操作成功"),a.getList())})},showDeploy:function(t){var e=this;t&&(this.challenge_id=t.challenge_id),Object(r.bb)({event_id:this.params.event_id,challenge_id:this.challenge_id}).then(function(t){e.step=2,e.deployList=t.data})},opentTopic:function(t){var e=this;Object(r.v)(this.params,{challenge_id:t.challenge_id,action:t.status}).then(function(t){t.data.success&&(e.$message.success("操作成功"),e.getList())})},indexMethod:function(t){return(this.listPage-1)*this.listQuery.limit+t+1},handleSelectionChange:function(t){this.userId=t},getList:function(){var t=this;Object(r.r)(this.params).then(function(e){t.matchList=e.data}),2==this.step&&this.showDeploy()},checkTable:function(){}}},f=(a("jPes"),a("BpP4"),Object(u.a)(p,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ad_topic app-container"},[a("div",[a("div",{staticClass:"filter-container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.matchList,border:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{index:t.indexMethod,align:"center",width:"50px",label:"序号",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"title",label:"题目名称"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"image_name",label:"镜像名称"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"题目部署",width:"300px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"mini",type:"success"},on:{click:function(a){t.deployStatus(e.row,1)}}},[t._v("开机\n            ")]),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"mini",type:"danger"},on:{click:function(a){t.deployStatus(e.row,2)}}},[t._v("关机\n            ")]),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"mini",type:"primary"},on:{click:function(a){t.deployStatus(e.row,3)}}},[t._v("重置\n            ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"部署情况"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"mini",type:"primary"},on:{click:function(a){t.showDeploy(e.row)}}},[t._v("查看\n            ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"开题部署",width:"140px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-value":2,"inactive-value":1,"active-text":"开题","inactive-text":"关题"},on:{change:function(a){t.opentTopic(e.row)}},model:{value:e.row.status,callback:function(a){t.$set(e.row,"status",a)},expression:"scope.row.status"}})]}}])})],1)],1),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),2==t.step?a("div",[a("el-alert",{attrs:{title:"题目部署情况运维",type:"info",effect:"dark"},on:{close:function(e){t.step=1}}},[a("div",{staticClass:"filter-container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.deployList,border:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{index:t.indexMethod,align:"center",width:"50px",label:"序号",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"team_name",label:"选手名称"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"challenge_name",label:"题目名称"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"status",label:"部署状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?a("span",[t._v("未创建")]):t._e(),t._v(" "),2==e.row.status?a("span",[t._v("创建失败")]):t._e(),t._v(" "),3==e.row.status?a("span",[t._v("创建成功")]):t._e(),t._v(" "),4==e.row.status?a("span",[t._v("运行中")]):t._e(),t._v(" "),5==e.row.status?a("span",[t._v("关闭")]):t._e(),t._v(" "),6==e.row.status?a("span",[t._v("错误")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"重新部署",width:"230"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.deployStatus(e.row,3)}}},[t._v("重新部署")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"footer"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.listTotal>0,expression:"listTotal>0"}],attrs:{total:t.listTotal,page:t.listPage,limit:t.listQuery.limit},on:{"update:page":function(e){t.listPage=e},"update:limit":function(e){t.$set(t.listQuery,"limit",e)},pagination:t.getList}})],1)])],1):t._e()])},[],!1,null,"20c47270",null));f.options.__file="index.vue";var h=f.exports,v=a("2cRn"),_={name:"MatchStatus",data:function(){return{id:this.$route.query.id,matchStatus:{1:"未开始",2:"暂停中",3:"进行中",4:"已结束"},process:1,competition_type:1,params:{event_id:this.$route.query.id},matchInfo:{},event_mode:""}},created:function(){var t=this;this.getList(),Object(r.M)(this.$route.query.id).then(function(e){t.event_mode=e.data.event_mode})},methods:{pushflag:function(){var t=this;Object(r.Z)({event_id:this.$route.query.id}).then(function(e){e.data.success&&(t.$message.success("操作成功"),t.getList())})},removeDeploy:function(){var t=this;this.$confirm("确定回收VPN吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(v.e)(t.id).then(function(e){e.data.success&&(t.$message.success("操作成功"),t.getList())})}).catch(function(){t.$message({type:"info",message:"已取消回收"})})},vnpDeploy:function(){var t=this;Object(v.g)(this.id).then(function(e){e.data.success&&(t.matchInfo.vpn_deploy_status=!1,t.$message.success("操作成功"),t.getList())})},vpnCaDeploy:function(){var t=this;Object(v.h)(this.id).then(function(e){e.data.success&&(t.$message.success("操作成功"),t.getList())})},vpnfun:function(){var t=this;Object(v.a)(this.id).then(function(e){e.data.success&&(t.$message.success("操作成功"),t.getList())})},initVirtual:function(){var t=this;this.$confirm("确定要初始化虚拟数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r.W)(t.params).then(function(e){e.data.success&&(t.$message.success("操作成功"),t.getList())})}).catch(function(){t.$message({type:"info",message:"已取消初始化"})})},initSence:function(){var t=this;this.$confirm("确定要场景初始化吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r.V)(t.params).then(function(e){e.data.success&&(t.$message.success("操作成功"),t.getList())})}).catch(function(){t.$message({type:"info",message:"已取消初始化"})})},sureEdit:function(){var t=this;Object(r.C)(this.params,{time:this.matchInfo.round_time}).then(function(e){e.data.success&&(t.$message.success("操作成功"),t.getList())})},getList:function(){var t=this;Object(r.P)(this.params).then(function(e){t.matchInfo=e.data})},defenseUse_vis:function(t){var e=this;Object(r.E)(this.params,{use_vis:t}).then(function(t){t.data.success&&(e.$message.success("操作成功"),e.getList())})},isShowRank:function(t){var e=this;Object(r.s)(this.params,{show_rank:t}).then(function(t){t.data.success&&(e.$message.success("操作成功"),e.getList())})},canUploadWP:function(t){var e=this;Object(r.f)(this.params,{writeup:t}).then(function(t){t.data.success&&(e.$message.success("操作成功"),e.getList())})},handleSwitch:function(t){var e=this;this.$confirm("确定要执行该操作吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r.h)(e.params,{action:t}).then(function(t){t.data.success&&(e.$message.success("操作成功"),e.getList())})}).catch(function(){e.$message({type:"info",message:"已取消操作"})})}}},g=(a("+Wop"),Object(u.a)(_,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-form",{attrs:{"label-width":"130px"}},[a("el-form-item",{attrs:{label:"竞赛状态"}},[t._v("\n      "+t._s(t.matchStatus[t.matchInfo.status])+"\n    ")]),t._v(" "),1==t.event_mode?a("el-form-item",{attrs:{label:"VPN部署"}},[1===t.matchInfo.vpn_deploy_status?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.vnpDeploy}},[t._v("部署")]):a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.removeDeploy}},[t._v("回收")]),t._v(" "),1!==t.matchInfo.vpn_deploy_status?a("el-switch",{on:{change:function(e){t.vpnfun()}},model:{value:t.matchInfo.vpn_join,callback:function(e){t.$set(t.matchInfo,"vpn_join",e)},expression:"matchInfo.vpn_join"}}):t._e(),t._v(" "),2===t.matchInfo.vpn_deploy_status?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.vpnCaDeploy}},[t._v("申请证书")]):t._e()],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"开始时间"}},[a("span",[t._v(t._s(t.matchInfo.start_time))])]),t._v(" "),a("el-form-item",{attrs:{label:"结束时间"}},[a("span",[t._v(t._s(t.matchInfo.end_time))])]),t._v(" "),a("el-form-item",{attrs:{label:"当前轮次"}},[t._v(t._s(t.matchInfo.round))]),t._v(" "),a("el-form-item",{attrs:{label:"回合结束时间"}},[t._v(t._s(t.matchInfo.round_end_time))]),t._v(" "),a("el-form-item",{attrs:{label:"当前服务器时间"}},[t._v(t._s(t.matchInfo.time))]),t._v(" "),a("el-form-item",{attrs:{label:"比赛控制"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.matchInfo.status||4==t.matchInfo.status,expression:"matchInfo.status == 1 || matchInfo.status == 4"}],attrs:{type:"success",size:"mini"},on:{click:function(e){t.handleSwitch(0)}}},[t._v("开始比赛")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:2==t.matchInfo.status,expression:"matchInfo.status == 2"}],attrs:{type:"success",size:"mini"},on:{click:function(e){t.handleSwitch(2)}}},[t._v("恢复比赛")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:3==t.matchInfo.status,expression:"matchInfo.status == 3"}],attrs:{type:"warning",size:"mini"},on:{click:function(e){t.handleSwitch(1)}}},[t._v("暂停比赛")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1!=t.matchInfo.status&&4!=t.matchInfo.status&&0!=t.matchInfo.status,expression:"\n          matchInfo.status != 1 &&\n            matchInfo.status != 4 &&\n            matchInfo.status != 0\n        "}],attrs:{type:"danger",size:"mini"},on:{click:function(e){t.handleSwitch(3)}}},[t._v("结束比赛")])],1),t._v(" "),a("el-form-item",{attrs:{label:"数据清理"}},[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){t.handleSwitch(4)}}},[t._v("初始化用户数据")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.initVirtual}},[t._v("初始化虚拟数据")])],1),t._v(" "),a("el-form-item",{attrs:{label:"pushflag文件推送"}},[a("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.pushflag}},[t._v("立即执行")])],1)],1)],1)},[],!1,null,"0e0e07cc",null));g.options.__file="matchStatus.vue";var b=g.exports,w={name:"Index",directives:{waves:o.a},components:{Pagination:s.a},data:function(){return{params:{event_id:this.$route.query.id},monitorData:{offset:0,limit:10,team_id:"",challenge_id:"",name:"",event_id:this.$route.query.id},matchList:[],teamList:[],topicList:[],listTotal:0,listPage:1,scorePage:1,scoreQuery:{order:"asc",event:"",user:""},listQuery:{offset:0,limit:this.$store.state.config.row,search:"",order:"asc",event:this.$route.query.id},showFlag:!1,lookFlagData:{name:"",flag:""}}},created:function(){this.getList(),this.getTopic(),this.getTeam()},methods:{resetFlag:function(){this.lookFlagData={name:"",flag:""}},lookFlag:function(t){this.showFlag=!0,this.lookFlagData.name=t.challenge_name,this.lookFlagData.flag=t.flag},lookRemote:function(t){window.open(t.lvp_remote_desktop)},pushFlag:function(t){var e=this,a={team_id:t.team_id||0,challenge_id:t.challenge_id||this.challenge_id};Object(r.x)(this.params,a).then(function(t){t.data.success&&(e.$message.success(t.data.message_zh),e.getList())})},check:function(t){var e=this,a={team_id:t.team_id||0,challenge_id:t.challenge_id||this.challenge_id};Object(r.D)(this.params,a).then(function(t){t.data.success&&(e.$message.success(t.data.message_zh),e.getList())})},deployStatus:function(t,e){var a=this,n={team_id:t.team_id||0,challenge_id:t.challenge_id||this.challenge_id,action:e};Object(r.k)(this.params,n).then(function(t){t.data.success&&(a.$message.success("操作成功"),a.getList())})},getTopic:function(){var t=this;Object(r.r)(this.params).then(function(e){t.topicList=e.data})},getTeam:function(){var t=this;Object(r.q)(this.params).then(function(e){var a=e.data;a.success&&(t.teamList=a.data)})},indexMethod:function(t){return(this.monitorData.offset-1)*this.monitorData.limit+t+1},handleSelectionChange:function(t){this.userId=t},getList:function(t){var e=this;1===t&&(this.monitorData.offset=t),Object(r.o)(this.monitorData).then(function(t){!1!==t.data.success&&(e.matchList=t.data.row,e.listTotal=t.data.total)})},checkTable:function(){}}},y=(a("c2qN"),Object(u.a)(w,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-select",{staticStyle:{"vertical-align":"top"},attrs:{clearable:"",size:"mini",placeholder:"请选择题目名称"},model:{value:t.monitorData.challenge_id,callback:function(e){t.$set(t.monitorData,"challenge_id",e)},expression:"monitorData.challenge_id"}},t._l(t.topicList,function(t){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.title}})})),t._v(" "),a("el-select",{staticStyle:{"vertical-align":"top"},attrs:{clearable:"",size:"mini",placeholder:"请选择选手名称"},model:{value:t.monitorData.team_id,callback:function(e){t.$set(t.monitorData,"team_id",e)},expression:"monitorData.team_id"}},t._l(t.teamList,function(t){return a("el-option",{key:t.team_id,attrs:{value:t.team_id,label:t.team_name}})})),t._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"请输入选手名称",size:"mini"},model:{value:t.monitorData.name,callback:function(e){t.$set(t.monitorData,"name","string"==typeof e?e.trim():e)},expression:"monitorData.name"}}),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",size:"mini"},on:{click:function(e){t.getList(1)}}},[t._v("搜索")])],1),t._v(" "),a("div",{staticClass:"filter-container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.matchList,border:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{index:t.indexMethod,align:"center",width:"50px",label:"序号",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"name",label:"选手名称"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"challenge_name",label:"题目名称"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"image_name",label:"题目镜像"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"ip",width:"100",label:"题目IP"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"vlan",label:"题目vlan"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"status",label:"题目环境状态"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"solved_count",label:"Flag查看"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.flag?a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"mini",type:"success"},on:{click:function(a){t.lookFlag(e.row)}}},[t._v("查看")]):a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{disabled:"",size:"mini",type:"primary"}},[t._v("查看")])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"solved_count",label:"远程监控"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.lvp_remote_desktop&&"运行中"==e.row.status?a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"mini",type:"primary"},on:{click:function(a){t.lookRemote(e.row)}}},[t._v("查看")]):a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{disabled:"",size:"mini",type:"primary"}},[t._v("查看")])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"solved_count",label:"实例控制",width:"260"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"mini",type:"success"},on:{click:function(a){t.deployStatus(e.row,1)}}},[t._v("开机")]),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"mini",type:"danger"},on:{click:function(a){t.deployStatus(e.row,2)}}},[t._v("关机")]),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"mini",type:"primary"},on:{click:function(a){t.deployStatus(e.row,3)}}},[t._v("重置")])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"测试操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"mini",type:"warning"},on:{click:function(a){t.check(e.row)}}},[t._v("check")]),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"mini",type:"warning"},on:{click:function(a){t.pushFlag(e.row)}}},[t._v("pushflag")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"footer"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.listTotal>0,expression:"listTotal > 0"}],attrs:{total:t.listTotal,page:t.monitorData.offset,limit:t.monitorData.limit},on:{"update:page":function(e){t.$set(t.monitorData,"offset",e)},"update:limit":function(e){t.$set(t.monitorData,"limit",e)},pagination:t.getList}})],1),t._v(" "),a("el-dialog",{attrs:{visible:t.showFlag,title:"查看Flag",width:"30%"},on:{"update:visible":function(e){t.showFlag=e},close:t.resetFlag}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"题目名称:"}},[a("span",[t._v(t._s(t.lookFlagData.name))])]),t._v(" "),a("el-form-item",{attrs:{label:"Flag:"}},[a("span",[t._v(t._s(t.lookFlagData.flag))])])],1)],1)],1)},[],!1,null,"3527347d",null));y.options.__file="index.vue";var k=y.exports,x={name:"MatchNotice",directives:{waves:o.a},components:{Pagination:s.a},data:function(){return{rowdata:{},params:{event_id:parseInt(this.$route.query.id)},addQuery:{notice:""},event_task:[],task_id:"",diaTitle:"",noticeId:!1,addDlg:!1,ids:[],matchList:[],topicList:[],topic:"",noiceType:1,tableKey:0,total:1,page:1,listQuery:{offset:0,limit:this.$store.state.config.row,search:"",order:"asc",event:this.$route.query.id}}},created:function(){this.getList()},methods:{topNoice:function(t){var e=this,a={ids:this.ids,action:t};1===this.noiceType?Object(r.eb)(this.params,a).then(function(t){t.data.success&&(e.$message.success("操作成功"),e.getList(),e.ids=[])}):topTIP(a).then(function(t){t.data.success&&(e.$message.success("操作成功"),e.getList(),e.ids=[])})},romoveNoice:function(){var t=this,e={ids:this.ids};this.ids.length<=0||this.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){1===t.noiceType?Object(r.ab)(t.params,e).then(function(e){e.data.success&&(t.$message.success("删除成功"),t.getList(),t.ids=[])}):removeTIP(e).then(function(e){e.data.success&&(t.$message.success("删除成功"),t.getList(),t.ids=[])})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleType:function(){this.ids=[],this.page=1,this.getList()},submitNotice:function(){this.noticeId?1===this.noiceType?this.updateNoice():this.updateTIP():1===this.noiceType?this.addNoice():this.addTIP()},updateNoice:function(){var t=this,e={notice_id:this.noticeId,notice:this.addQuery.notice};Object(r.c)(this.params,e).then(function(e){e.data.success&&(t.$message.success("修改成功"),t.getList(),t.addDlg=!1,t.noticeId="")})},updateTIP:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){var t=this;updateTIP(this.noticeId,this.addQuery).then(function(e){e.data.success&&(t.$message.success("修改成功"),t.getList(),t.addDlg=!1,t.noticeId="")})}),addTIP:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){var t=this,e=this.addQuery;e.task_id=this.task_id,addTIP(e).then(function(e){e.data.success&&(t.$message.success("新增成功"),t.getList(),t.addDlg=!1)})}),addNoice:function(){var t=this;Object(r.a)(this.params,this.addQuery).then(function(e){e.data.success&&(t.$message.success("新增成功"),t.getList(),t.addDlg=!1)})},showDlg:function(){this.diaTitle="新增公告",2!==this.noiceType||this.task_id?(2===this.noiceType&&(this.diaTitle="新增题目提示"),this.addDlg=!0):this.$alert("请选择题目","警告",{confirmButtonText:"确定"})},getList:function(){1===this.noiceType?this.getNoiceList():(this.getTopicList(),this.getTipList())},editNoice:function(t){this.noticeId=t.id,1===this.noiceType?(this.diaTitle="编辑公告",this.addQuery.notice=t.notice,this.addQuery.event_id=t.event_id):(this.diaTitle="编辑题目提示",this.addQuery.notice=t.notice,this.addQuery.event_id=t.event_id),this.addDlg=!0},getTopicList:function(){var t=this,e={};e.event=this.$route.query.id,fetchTopicList(e).then(function(e){t.topicList=e.data.rows})},getNoiceList:function(){var t=this;this.listQuery.offset=(this.page-1)*this.listQuery.limit,Object(r.Q)(this.params).then(function(e){t.matchList=e.data,t.total=e.data.total})},getTipList:function(){var t=this;this.listQuery.offset=(this.page-1)*this.listQuery.limit;var e=this.listQuery;e.task_id="",fetchTipList(e).then(function(e){t.matchList=e.data.rows,t.total=e.data.total})},checkTable:function(t){this.ids=t.map(function(t){return t.id})},closeDiglog:function(){this.textarea="",this.noticeId="",this.addQuery.notice=""},indexMethod:function(t){return(this.topicQuery.offset-1)*this.topicQuery.limit+t+1}}},j=(a("TebR"),Object(u.a)(x,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"}),t._v(" "),a("div",{staticClass:"filter-container"},[a("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.showDlg}},[t._v("新增")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.romoveNoice}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){t.topNoice(1)}}},[t._v("置顶")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){t.topNoice(0)}}},[t._v("取消置顶")])],1),t._v(" "),a("div",{staticClass:"filter-container"},[a("el-table",{key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.matchList,border:""},on:{"selection-change":t.checkTable}},[a("el-table-column",{attrs:{align:"center",type:"selection"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",type:"index",width:"50",label:"序号"}}),t._v(" "),2===t.noiceType?a("el-table-column",{attrs:{align:"center",prop:"event_task",label:"题目名称"}}):t._e(),t._v(" "),a("el-table-column",{attrs:{prop:"notice",label:"公告内容"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"jointype",label:"是否置顶",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(0==e.row.is_topped?"否":"是"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"create_time",label:"发布时间",width:"200px"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",width:"200px",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"mini",type:"success"},on:{click:function(a){t.editNoice(e.row)}}},[t._v("编辑")])]}}])})],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.addDlg},on:{"update:visible":function(e){t.addDlg=e},close:t.closeDiglog}},[a("span",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.diaTitle))]),t._v(" "),a("el-input",{attrs:{rows:4,type:"textarea",placeholder:"请输入内容"},model:{value:t.addQuery.notice,callback:function(e){t.$set(t.addQuery,"notice","string"==typeof e?e.trim():e)},expression:"addQuery.notice"}}),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitNotice()}}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:function(e){t.addDlg=!1}}},[t._v("取 消")])],1)],1)],1)},[],!1,null,null,null));j.options.__file="matchNoice.vue";var O=j.exports,L=a("z0WU"),S={name:"UserManagement",directives:{waves:o.a},components:{Pagination:s.a},data:function(){return{rowdata:{},params:{event_id:this.$route.query.id,team_name:""},reward_score:{content:"",score:"",team_id:""},scoreDlg:!1,id:this.$route.query.id,matchList:[],rewardScoreList:[],listTotal:0,listPage:1,scorePage:1,scoreQuery:{order:"asc",event:"",user:""},listQuery:{offset:1,limit:this.$store.state.config.row,event_id:this.$route.query.id,team_name:""}}},created:function(){this.getList()},methods:{submitScore:function(){var t=this;Object(r.z)(this.params,this.reward_score).then(function(e){e.data.success&&(t.reward_score.content="",t.reward_score.score=0,t.$message.success("操作成功"),t.showScore(1))})},indexMethod:function(t){return(this.listQuery.offset-1)*this.listQuery.limit+t+1},handleSelectionChange:function(t){this.userId=t},showScore:function(t){var e=this;this.rowdata=t;var a={event_id:this.params.event_id,team_id:t.team_id||this.reward_score.team_id};Object(r.A)(a).then(function(a){e.scoreDlg=!0,e.reward_score.team_id=t.team_id||e.reward_score.team_id,e.rewardScoreList=a.data})},banMatch:function(t,e){var a=this;Object(r.e)(this.params,{action:e,team_id:t.team_id}).then(function(t){t.data.success&&(a.$message.success("操作成功"),a.getList())})},search:function(){this.listQuery.offset=1,this.getList()},getList:function(){var t=this;Object(r.q)(this.listQuery).then(function(e){t.matchList=e.data.data,t.listTotal=e.data.total})},handleExport:function(){Object(r.K)({event_id:this.id}).then(function(t){Object(L.a)(t)})}}},$=(a("ihux"),Object(u.a)(S,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container",staticStyle:{float:"left"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"150px"},attrs:{placeholder:"请输入选手名称",size:"mini"},model:{value:t.listQuery.team_name,callback:function(e){t.$set(t.listQuery,"team_name","string"==typeof e?e.trim():e)},expression:"listQuery.team_name"}}),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",size:"mini"},on:{click:t.search}},[t._v("搜索")])],1),t._v(" "),a("div",{staticClass:"filter-container"},[a("div",{staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"warning",size:"mini"},on:{click:t.handleExport}},[t._v("导出全部WP")])],1)]),t._v(" "),a("div",{staticClass:"filter-container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.matchList,border:""}},[a("el-table-column",{attrs:{index:t.indexMethod,align:"center",width:"50px",label:"序号",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"team_name",label:"选手名称"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"logo",label:"选手Logo",width:"120"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"40px",height:"40px","border-radius":"50%"},attrs:{src:t.row.logo,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"status",label:"账户状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(1==e.row.status?"正常":"禁赛"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"score",label:"当前分数",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"status",label:"WriteUp上传状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(1==e.row.writeup_status?"已上传":"未上传"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"status",label:"WriteUp"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.writeup_status?a("span",[t._v("无")]):a("a",{attrs:{href:e.row.writeup_path,download:""}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"warning",size:"mini"}},[t._v("下载")])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"230px"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:"danger"},on:{click:function(a){t.banMatch(e.row,2)}}},[t._v("禁赛")]):a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){t.banMatch(e.row,1)}}},[t._v("解禁")]),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:"success"},on:{click:function(a){t.showScore(e.row)}}},[t._v("奖罚分数")])]}}])})],1)],1),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.listTotal>0,expression:"listTotal > 0"}],attrs:{total:t.listTotal,page:t.listQuery.offset,limit:t.listQuery.limit},on:{"update:page":function(e){t.$set(t.listQuery,"offset",e)},"update:limit":function(e){t.$set(t.listQuery,"limit",e)},pagination:t.getList}}),t._v(" "),a("el-dialog",{staticClass:"addsub",attrs:{visible:t.scoreDlg,title:"奖惩分数",width:"900px"},on:{"update:visible":function(e){t.scoreDlg=e}}},[a("el-form",{ref:"form",attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"选手名称"}},[a("span",[t._v(t._s(t.rowdata.team_name))])]),t._v(" "),a("el-form-item",{attrs:{label:"奖惩分数"}},[a("el-input-number",{attrs:{min:-1e5,max:1e6,size:"mini"},model:{value:t.reward_score.score,callback:function(e){t.$set(t.reward_score,"score","string"==typeof e?e.trim():e)},expression:"reward_score.score"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"奖惩原因",required:""}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.reward_score.content,callback:function(e){t.$set(t.reward_score,"content","string"==typeof e?e.trim():e)},expression:"reward_score.content"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.submitScore}},[t._v("确定")]),t._v(" "),a("el-button",{on:{click:function(e){t.scoreDlg=!1}}},[t._v("取消")])],1)],1),t._v(" "),a("el-alert",{attrs:{closable:!1,title:"奖惩分详情",type:"success",center:""}}),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.rewardScoreList,border:"",height:"250"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",width:"50px",label:"序号",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"reward_score",label:"奖惩分数"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"create_time",label:"操作时间"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"content",label:"奖惩原因"}})],1)],1)],1)},[],!1,null,"640b9a83",null));$.options.__file="userManagement.vue";var T=$.exports,N={name:"UserManagement",directives:{waves:o.a},components:{Pagination:s.a},data:function(){return{rowdata:{},params:{event_id:this.$route.query.id,name:""},id:this.$route.query.id,scoreDig:!1,scoreList:[],matchList:[],listTotal:0,listPage:1,listQuery:{title:"",offset:1,limit:this.$store.state.config.row,event_id:this.$route.query.id,name:""},scoreQuery:{offset:1,limit:this.$store.state.config.row,event_id:this.$route.query.id},scoreTotal:0}},created:function(){this.getList()},methods:{indexMethod:function(t){return(this.listPage-1)*this.listQuery.limit+t+1},showScore:function(t){var e=this;t.id&&(this.rowdata=t),this.scoreDig=!0,Object(r.y)(this.scoreQuery,this.rowdata.id).then(function(t){var a=t.data;a.success&&(e.scoreList=a.row,e.scoreTotal=a.total)})},getList:function(t){var e=this;1===t&&(this.listQuery.offset=1),Object(r.p)(this.listQuery).then(function(t){e.matchList=t.data.data,e.listTotal=t.data.total})},checkTable:function(){}}},I=(a("Navz"),Object(u.a)(N,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container",staticStyle:{float:"left"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"150px"},attrs:{placeholder:"请输入选手名称",size:"mini"},model:{value:t.listQuery.name,callback:function(e){t.$set(t.listQuery,"name","string"==typeof e?e.trim():e)},expression:"listQuery.name"}}),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",size:"mini"},on:{click:function(e){t.getList(1)}}},[t._v("搜索")])],1),t._v(" "),a("div",{staticClass:"filter-container fr"},[a("a",{attrs:{href:"/api/v1/att_def/admin/operation/statistic_download/?event_id="+t.id,download:""}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"warning",size:"mini"}},[t._v("成绩导出")])],1)]),t._v(" "),a("div",{staticClass:"filter-container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.matchList,border:""}},[a("el-table-column",{attrs:{index:t.indexMethod,align:"center",width:"50px",label:"名次",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"name",label:"选手名称"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"last_time",label:"最后提交"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"final_score",label:"得分"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"reward",label:"奖罚分数"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"查看详情"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"mini",type:"primary"},on:{click:function(a){t.showScore(e.row)}}},[t._v("查看详情")])]}}])})],1)],1),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.listTotal>0,expression:"listTotal > 0"}],attrs:{total:t.listTotal,page:t.listQuery.offset,limit:t.listQuery.limit},on:{"update:page":function(e){t.$set(t.listQuery,"offset",e)},"update:limit":function(e){t.$set(t.listQuery,"limit",e)},pagination:t.getList}}),t._v(" "),a("el-dialog",{attrs:{visible:t.scoreDig,title:"查看详情"},on:{"update:visible":function(e){t.scoreDig=e}}},[a("p",[t._v("当前选手:"+t._s(t.rowdata.name))]),t._v(" "),a("el-table",{attrs:{data:t.scoreList,border:"",height:"300"}},[a("el-table-column",{attrs:{align:"center",width:"50px",label:"序号",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"change_score",label:"分数"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"round",label:"轮次"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"create_time",label:"提交时间"}})],1),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.scoreTotal>0,expression:"scoreTotal > 0"}],attrs:{total:t.scoreTotal,page:t.scoreQuery.offset,limit:t.scoreQuery.limit},on:{"update:page":function(e){t.$set(t.scoreQuery,"offset",e)},"update:limit":function(e){t.$set(t.scoreQuery,"limit",e)},pagination:t.showScore}})],1)],1)},[],!1,null,"e7fd598e",null));I.options.__file="index.vue";var Q=I.exports,C={name:"MatchStatus",data:function(){return{id:this.$route.query.id,process:1,competition_type:1,params:{event_id:this.$route.query.id},matchInfo:{}}},created:function(){this.getList()},methods:{initVirtual:function(){var t=this;this.$confirm("确定要初始化虚拟数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r.W)(t.params).then(function(e){e.data.success&&(t.$message.success("操作成功"),t.getList())})}).catch(function(){t.$message({type:"info",message:"已取消初始化"})})},initSence:function(){var t=this;this.$confirm("确定要场景初始化吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r.V)(t.params).then(function(e){e.data.success&&(t.$message.success("操作成功"),t.getList())})}).catch(function(){t.$message({type:"info",message:"已取消初始化"})})},sureEdit:function(){var t=this;Object(r.C)(this.params,{time:this.matchInfo.round_time}).then(function(e){e.data.success&&(t.$message.success("操作成功"),t.getList())})},getList:function(){var t=this;Object(r.O)(this.params).then(function(e){t.matchInfo=e.data.data})},defenseUse_vis:function(t){var e=this;Object(r.E)(this.params,{use_vis:t}).then(function(t){t.data.success&&(e.$message.success("操作成功"),e.getList())})},isShowRank:function(t){var e=this;Object(r.s)(this.params,{show_rank:t}).then(function(t){t.data.success&&(e.$message.success("操作成功"),e.getList())})},canUploadWP:function(t){var e=this;Object(r.f)(this.params,{writeup:t}).then(function(t){t.data.success&&(e.$message.success("操作成功"),e.getList())})}}},z=(a("63ea"),Object(u.a)(C,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-form",{attrs:{"label-width":"130px"}},[a("el-form-item",{attrs:{label:"是否显示排名"}},[a("el-switch",{attrs:{"active-value":!0,"inactive-value":!1},on:{change:t.isShowRank},model:{value:t.matchInfo.show_rank,callback:function(e){t.$set(t.matchInfo,"show_rank",e)},expression:"matchInfo.show_rank"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"20px"}},[t._v("提示:开启后选手能看到排行榜, 关闭后选手看不到排行榜")])],1),t._v(" "),a("el-form-item",{attrs:{label:"是否开放上传WP"}},[a("el-switch",{attrs:{"active-value":!0,"inactive-value":!1},on:{change:t.canUploadWP},model:{value:t.matchInfo.can_upload_writeup,callback:function(e){t.$set(t.matchInfo,"can_upload_writeup",e)},expression:"matchInfo.can_upload_writeup"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"态势展示"}},[a("a",{attrs:{href:t.matchInfo.vis_zip_path,download:""}},[a("el-button",{attrs:{type:"warning",size:"mini"}},[t._v("客户端下载")])],1),t._v(" "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.initSence}},[t._v("场景初始化")])],1)],1)],1)},[],!1,null,"05dd2b9e",null));z.options.__file="index.vue";var D={name:"Index",components:{deployScene:m,topic:h,matchStatus:b,monitor:k,result:Q,matchNoice:O,userManagement:T,show:z.exports,vpn:a("xk3Q").a},data:function(){return{activeName:"scene",event_mode:""}},created:function(){var t=this;Object(r.M)(this.$route.query.id).then(function(e){t.$store.dispatch("changeMatchName",e.data.name_zh),t.event_mode=e.data.event_mode})},beforeDestroy:function(){this.$store.dispatch("changeMatchName","")}},P=(a("FMtV"),Object(u.a)(D,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-tabs",{staticStyle:{"margin-top":"15px"},attrs:{type:"border-card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{key:"scene",attrs:{label:"部署环境",name:"scene"}},["scene"===t.activeName?a("deployScene",{ref:"scene"}):t._e()],1),t._v(" "),a("el-tab-pane",{key:"status",attrs:{label:"竞赛状态",name:"status"}},["status"===t.activeName?a("matchStatus",{ref:"status"}):t._e()],1),t._v(" "),a("el-tab-pane",{key:"topic",attrs:{label:"题目运维",name:"topic"}},["topic"===t.activeName?a("topic",{ref:"topic"}):t._e()],1),t._v(" "),a("el-tab-pane",{key:"monitor",attrs:{label:"实例运维",name:"monitor"}},["monitor"===t.activeName?a("monitor",{ref:"monitor"}):t._e()],1),t._v(" "),a("el-tab-pane",{key:"noice",attrs:{label:"公告管理",name:"noice"}},["noice"===t.activeName?a("matchNoice",{ref:"noice"}):t._e()],1),t._v(" "),a("el-tab-pane",{key:"user",attrs:{label:"选手管理",name:"user"}},["user"===t.activeName?a("userManagement",{ref:"user"}):t._e()],1),t._v(" "),a("el-tab-pane",{key:"result",attrs:{label:"比赛结果",name:"result"}},["result"===t.activeName?a("result",{ref:"result"}):t._e()],1),t._v(" "),a("el-tab-pane",{key:"show",attrs:{label:"展示管理",name:"show"}},["show"===t.activeName?a("show",{ref:"show"}):t._e()],1),t._v(" "),1==t.event_mode?a("el-tab-pane",{key:"vpn",attrs:{label:"VPN管理",name:"vpn"}},["vpn"===t.activeName?a("vpn",{ref:"vpn"}):t._e()],1):t._e()],1)],1)},[],!1,null,"4a41f009",null));P.options.__file="index.vue";e.default=P.exports},Navz:function(t,e,a){"use strict";var n=a("6M+K");a.n(n).a},TebR:function(t,e,a){"use strict";var n=a("YkeJ");a.n(n).a},W4Sk:function(t,e,a){},Y5bG:function(t,e,a){"use strict";a.d(e,"a",function(){return i}),Math.easeInOutQuad=function(t,e,a,n){return(t/=n/2)<1?a/2*t*t+e:-a/2*(--t*(t-2)-1)+e};var n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};function i(t,e,a){var i=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,s=t-i,o=0;e=void 0===e?500:e;!function t(){o+=20,function(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}(Math.easeInOutQuad(o,i,s,e)),o<e?n(t):a&&"function"==typeof a&&a()}()}},YkeJ:function(t,e,a){},ZySA:function(t,e,a){"use strict";var n=a("6ZY3"),i=a.n(n),s=(a("jUE0"),{bind:function(t,e){t.addEventListener("click",function(a){var n=i()({},e.value),s=i()({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},n),o=s.ele;if(o){o.style.position="relative",o.style.overflow="hidden";var r=o.getBoundingClientRect(),c=o.querySelector(".waves-ripple");switch(c?c.className="waves-ripple":((c=document.createElement("span")).className="waves-ripple",c.style.height=c.style.width=Math.max(r.width,r.height)+"px",o.appendChild(c)),s.type){case"center":c.style.top=r.height/2-c.offsetHeight/2+"px",c.style.left=r.width/2-c.offsetWidth/2+"px";break;default:c.style.top=(a.pageY-r.top-c.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",c.style.left=(a.pageX-r.left-c.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return c.style.backgroundColor=s.color,c.className="waves-ripple z-active",!1}},!1)}}),o=function(t){t.directive("waves",s)};window.Vue&&(window.waves=s,Vue.use(o)),s.install=o;e.a=s},aFNf:function(t,e,a){var n=a("c01Q"),i=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},c2qN:function(t,e,a){"use strict";var n=a("eKwt");a.n(n).a},eKwt:function(t,e,a){},fyhJ:function(t,e,a){},hqvf:function(t,e,a){},i53T:function(t,e,a){},ihux:function(t,e,a){"use strict";var n=a("i53T");a.n(n).a},jPes:function(t,e,a){"use strict";var n=a("qJ9E");a.n(n).a},jUE0:function(t,e,a){},nMsD:function(t,e,a){},omC7:function(t,e,a){t.exports={default:a("aFNf"),__esModule:!0}},qJ9E:function(t,e,a){},xk3Q:function(t,e,a){"use strict";var n=a("2cRn"),i={name:"IndexVue",components:{Pagination:a("Mz3J").a},data:function(){return{id:this.$route.query.id,server:[],total:0,listQuery:{server_id:"",name_param:"",per_page:this.$store.state.config.row,status_param:"",page:1},matchList:[],ids:[],log:"",dialogTableVisible:!1,gridData:[],dialogTableLoading:!1,dialogFlowsVisible:!1,flowsData:[],dialogFlowsLoading:!1}},created:function(){this.getServer(),this.getList()},methods:{getServer:function(){var t=this;Object(n.b)(this.id).then(function(e){t.server=e.data.data})},getList:function(t){var e=this;1===t&&(this.listQuery.offset=t),Object(n.d)(this.id,this.listQuery).then(function(t){e.matchList=t.data.data,e.total=t.data.total||e.total,e.log=t.data.log_path})},operation:function(t){},indexMethod:function(t){return(this.listQuery.page-1)*this.listQuery.per_page+t+1},handleClose:function(t){"servers"===t?(this.gridData=[],this.dialogTableLoading=!1):"servers"===t&&(this.flowsData=[])},showVpnServers:function(){this.dialogTableVisible=!0,this.handleGetVpnServers()},handleGetVpnServers:function(t){var e=this;return t||(this.dialogTableLoading=!0),Object(n.c)(this.id).then(function(a){var n=a.data;n.success&&(e.gridData=n.data,t||(e.dialogTableLoading=!1))})},showFlowTable:function(t){var e=this,a=t.uuid;this.dialogFlowsVisible=!0,this.dialogFlowsLoading=!0,this.handleGetVpnServers(!0).then(function(){e.flowsData=e.gridData.find(function(t){return t.uuid===a}).flows,e.dialogFlowsLoading=!1})},handleReset:function(t){var e=this,a=t.uuid;Object(n.f)(this.id,a).then(function(t){t.data.success&&(e.$message({type:"success",message:"操作成功"}),e.handleGetVpnServers())})}}},s=(a("6DOF"),a("ZrdR")),o=Object(s.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container competition_box"},[a("div",{staticClass:"filter-container"},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择VPN服务器",clearable:"",size:"mini"},model:{value:t.listQuery.server_id,callback:function(e){t.$set(t.listQuery,"server_id",e)},expression:"listQuery.server_id"}},t._l(t.server,function(t,e){return a("el-option",{key:e,attrs:{label:t.server_name,value:t.id}})})),t._v(" "),a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择用户拨入状态",clearable:"",size:"mini"},model:{value:t.listQuery.status_param,callback:function(e){t.$set(t.listQuery,"status_param",e)},expression:"listQuery.status_param"}},[a("el-option",{attrs:{value:1,label:"在线"}}),t._v(" "),a("el-option",{attrs:{value:2,label:"离线"}})],1),t._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"请输入账户名",size:"mini"},model:{value:t.listQuery.name_param,callback:function(e){t.$set(t.listQuery,"name_param","string"==typeof e?e.trim():e)},expression:"listQuery.name_param"}}),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"mini"},on:{click:function(e){t.getList(1)}}},[t._v("搜索")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"mini"},on:{click:t.getList}},[t._v("刷新")]),t._v(" "),a("div",{staticClass:"fr"},[""!=t.listQuery.server_id?a("a",{staticClass:"filter-item",attrs:{href:"/api/v1/common/admin/vpn/"+t.id+"/vpn_log/"+t.listQuery.server_id+"/download",download:""}},[a("el-button",{attrs:{type:"warning",size:"mini"}},[t._v("VPN日志下载")])],1):t._e(),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"warning",size:"mini"},on:{click:t.showVpnServers}},[t._v("VPN服务器管理")])],1)],1),t._v(" "),a("el-table",{ref:"multipleTable",attrs:{data:t.matchList,border:""}},[a("el-table-column",{attrs:{index:t.indexMethod,align:"center",width:"50px",label:"序号",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"user_name",label:"账户名"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"vpn_server_name",label:"VPN服务器"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"user_status",label:"拨入状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(1===e.row.user_status?"在线":"离线")+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"证书申请状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(1===e.row.ca_apply_status?"成功":"失败")+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"virtual_address",label:"虚拟地址"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"entry_time",label:"接入时间"}}),t._v(" "),a("el-table-column",{attrs:{label:"密钥管理",align:"center",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{attrs:{href:"/api/v1/common/admin/vpn/"+t.id+"/vpn_ca/"+e.row.user_id+"/download",download:""}},[a("el-button",{attrs:{size:"mini",type:"warning"}},[t._v("下载 ")])],1)]}}])})],1),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.per_page},on:{"update:page":function(e){t.$set(t.listQuery,"page",e)},"update:limit":function(e){t.$set(t.listQuery,"per_page",e)},pagination:t.getList}}),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogTableVisible,title:"VPN 服务器管理",width:"1200px"},on:{"update:visible":function(e){t.dialogTableVisible=e},close:function(e){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];t.handleClose.apply(void 0,n.concat(["servers"]))}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dialogTableLoading,expression:"dialogTableLoading"}],attrs:{data:t.gridData,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"vpn_server_name",label:"VPN 服务器",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"monitor_port",label:"映射端口",align:"center",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{property:"external_access",label:"外部访问IP/域名",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"网络信息",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.network,function(e,n){return a("div",{key:n,staticStyle:{"text-align":"left"}},[a("span",[t._v(t._s(n+": "+e))])])})}}])}),t._v(" "),a("el-table-column",{attrs:{label:"相关流表信息",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.showFlowTable(e.row)}}},[t._v("查看")])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"status",label:"状态",align:"center",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"重置管理",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){t.handleReset(e.row)}}},[t._v("重置")])]}}])})],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogFlowsVisible,title:"相关流表信息",width:"800px"},on:{"update:visible":function(e){t.dialogFlowsVisible=e},close:function(e){for(var a=arguments.length,n=Array(a);a--;)n[a]=arguments[a];t.handleClose.apply(void 0,n.concat(["flows"]))}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dialogFlowsLoading,expression:"dialogFlowsLoading"}],attrs:{data:t.flowsData,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"内容"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row))])]}}])})],1)],1)],1)},[],!1,null,"c197fb08",null);o.options.__file="index.vue";e.a=o.exports},z0WU:function(t,e,a){"use strict";a.d(e,"e",function(){return o}),a.d(e,"d",function(){return r}),a.d(e,"b",function(){return c}),a.d(e,"c",function(){return u}),a.d(e,"a",function(){return m});a("6ZY3"),a("+XIM"),a("LGhb");var n=a("Q2cO"),i=a.n(n),s=a("twWv");function o(t,e){if(0===arguments.length)return null;var a=e||"{y}-{m}-{d} {h}:{i}:{s}",n=void 0;"object"===(void 0===t?"undefined":i()(t))?n=t:("string"==typeof t&&/^[0-9]+$/.test(t)&&(t=parseInt(t)),"number"==typeof t&&10===t.toString().length&&(t*=1e3),n=new Date(t));var s={y:n.getFullYear(),m:n.getMonth()+1,d:n.getDate(),h:n.getHours(),i:n.getMinutes(),s:n.getSeconds(),a:n.getDay()};return a.replace(/{([ymdhisa])+}/g,function(t,e){var a=s[e];return"a"===e?["日","一","二","三","四","五","六"][a]:a.toString().padStart(2,"0")})}function r(t){var e=0;return t=t.split("."),e=256*Number(t[0])*256*256+256*Number(t[1])*256+256*Number(t[2])+Number(t[3]),e>>>=0}function c(t,e,a){var n,i,s;n=t.split("."),i=e.split("."),s=a.split(".");var o="",r="",c="",l=0;for(l=0;l<4;l++){var u,d,m;u=parseInt(n[l]).toString(2),d=parseInt(i[l]).toString(2),m=parseInt(s[l]).toString(2);var p=void 0;for(p=0;p<8-u.length;p++)o+="0";for(o+=u,p=0;p<8-d.length;p++)r+="0";for(r+=d,p=0;p<8-m.length;p++)c+="0";c+=m}var f,h,v,_=c.length;for(f=o.split(""),h=r.split(""),v=c.split(""),l=0;l<_;l++)if("1"===v[l]&&f[l]!==h[l])return!1;return!0}function l(t,e){var a=document.createElement("a");a.download=e||(new Date).getTime(),a.style.display="none",a.href=t,document.body.appendChild(a),a.click(),document.body.removeChild(a)}function u(t,e){l(function(t){var e=t.url,a=t.query;if(!e)return"";if(a){var n=[];for(var i in a)a.hasOwnProperty(i)&&n.push(i+"="+a[i]);e=-1!==e.indexOf("?")?e+"&"+n.join("&"):e+"?"+n.join("&")}return e}({url:t.url,query:t.query}),e)}function d(t,e){var a=t.headers["content-disposition"].split("="),n=a[a.length-1].replace(/"/g,"").replace(/UTF-8''/g,"");n=decodeURI(n);var i=URL.createObjectURL(t.data);l(i,e||n),URL.revokeObjectURL(i)}function m(t,e){var a=t.data,n=a.type.split("/");if("json"===n[n.length-1]){var i=new FileReader;i.readAsText(a),i.onload=function(){var a=JSON.parse(this.result);if(!1===a.success){var n=a.message||a.message_zh;Object(s.Message)({type:"error",message:n})}else d(t,e)}}else d(t,e)}}}]);
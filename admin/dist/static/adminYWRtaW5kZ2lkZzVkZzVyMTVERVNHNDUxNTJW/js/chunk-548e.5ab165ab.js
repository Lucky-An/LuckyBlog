(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-548e"],{"20q/":function(t,e,n){"use strict";var o=n("TysI");n.n(o).a},"7XVi":function(t,e,n){"use strict";n.r(e);var o=n("ZySA"),i=n("TEjo"),a={name:"ImageConsole",directives:{waves:o.a},data:function(){return{url:this.$route.query.url,instanceId:this.$route.query.instanceId,showMask:!0}},mounted:function(){var t=this;setTimeout(function(){t.getFocus()},1e3),this.url&&"null"!==this.url||(this.$message({type:"error",message:"无法连接"}),setTimeout(function(){window.opener=null,window.open("","_self"),window.close()},5e3))},methods:{operationMethod:function(t){var e=this;"shutdown"===t?this.$confirm("关机操作将执行实例的销毁，是否将实例的本次修改结果保存?","关机确认",{confirmButtonText:"保存",cancelButtonText:"放弃",type:"warning"}).then(function(){e.startHostMethod(t,!0)}).catch(function(){e.startHostMethod(t)}):this.startHostMethod(t)},startHostMethod:function(t,e){var n=this;Object(i.i)(this.instanceId,t,e).then(function(e){e.data.success&&(n.$message({type:"success",message:"操作成功"}),"shutdown"===t&&n.$router.push("/image/virtual"))})},getFocus:function(){var t=this;this.showMask=!1,document.querySelector("#iframe").focus(),document.querySelector("#iframe").onblur=function(){t.showMask=!0}}}},s=(n("20q/"),n("ZrdR")),r=Object(s.a)(a,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container competition_box"},[n("div",{staticClass:"container_bg remote_manage_wrapper"},[n("div",{staticClass:"filter-container"},[n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item pad_r_45",attrs:{type:"primary"},on:{click:function(e){t.operationMethod("reboot")}}},[t._v("重启")]),t._v(" "),n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item pad_r_45",attrs:{type:"primary"},on:{click:function(e){t.operationMethod("shutdown")}}},[t._v("关机")])],1),t._v(" "),t.url&&"null"!==t.url?n("div",{staticClass:"iframe-wrapper"},[t.showMask?n("div",{staticClass:"getFocus",on:{click:t.getFocus}}):t._e(),t._v(" "),n("iframe",{staticStyle:{width:"100%","min-height":"100%"},attrs:{id:"iframe",src:t.url,frameborder:"0"}})]):t._e()])])},[],!1,null,null,null);r.options.__file="imageConsole.vue";e.default=r.exports},TEjo:function(t,e,n){"use strict";n.d(e,"f",function(){return i}),n.d(e,"b",function(){return a}),n.d(e,"a",function(){return s}),n.d(e,"c",function(){return r}),n.d(e,"d",function(){return c}),n.d(e,"e",function(){return u}),n.d(e,"j",function(){return d}),n.d(e,"g",function(){return l}),n.d(e,"h",function(){return m}),n.d(e,"i",function(){return f});var o=n("t3Un");function i(t){return Object(o.a)({url:"/api/v1/common/admin/images",method:"get",params:t})}function a(t){return Object(o.a)({url:"/api/v1/common/admin/images",method:"delete",data:t})}function s(t){return Object(o.a)({url:"/api/v1/common/admin/images",method:"post",data:t})}function r(t,e){return Object(o.a)({url:"/api/v1/common/admin/images/"+t,method:"patch",data:e})}function c(t){return Object(o.a)({url:"/api/v1/common/admin/images/"+t,method:"get"})}function u(){return Object(o.a)({url:"/api/v1/common/admin/images/tags",method:"get"})}function d(t){return Object(o.a)({url:"/api/v1/common/admin/images/tags",method:"post",data:t})}function l(t,e){return Object(o.a)({url:"/api/v1/common/admin/images/tags/"+t,method:"put",data:e})}function m(t){return Object(o.a)({url:"/api/v1/common/admin/images/tags/"+t,method:"delete"})}function f(t,e,n){return Object(o.a)({url:"/api/v1/common/admin/images/"+t+"/instance",method:"post",data:{operation:e,save:n}})}},TysI:function(t,e,n){},ZySA:function(t,e,n){"use strict";var o=n("6ZY3"),i=n.n(o),a=(n("jUE0"),{bind:function(t,e){t.addEventListener("click",function(n){var o=i()({},e.value),a=i()({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},o),s=a.ele;if(s){s.style.position="relative",s.style.overflow="hidden";var r=s.getBoundingClientRect(),c=s.querySelector(".waves-ripple");switch(c?c.className="waves-ripple":((c=document.createElement("span")).className="waves-ripple",c.style.height=c.style.width=Math.max(r.width,r.height)+"px",s.appendChild(c)),a.type){case"center":c.style.top=r.height/2-c.offsetHeight/2+"px",c.style.left=r.width/2-c.offsetWidth/2+"px";break;default:c.style.top=(n.pageY-r.top-c.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",c.style.left=(n.pageX-r.left-c.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return c.style.backgroundColor=a.color,c.className="waves-ripple z-active",!1}},!1)}}),s=function(t){t.directive("waves",a)};window.Vue&&(window.waves=a,Vue.use(s)),a.install=s;e.a=a},jUE0:function(t,e,n){}}]);
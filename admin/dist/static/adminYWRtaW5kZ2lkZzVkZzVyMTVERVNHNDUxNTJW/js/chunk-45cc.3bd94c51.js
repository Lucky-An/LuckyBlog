(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-45cc"],{"2XDT":function(e,t,r){"use strict";r.d(t,"j",function(){return n}),r.d(t,"a",function(){return a}),r.d(t,"d",function(){return i}),r.d(t,"k",function(){return l}),r.d(t,"b",function(){return s}),r.d(t,"f",function(){return u}),r.d(t,"i",function(){return c}),r.d(t,"e",function(){return m}),r.d(t,"c",function(){return d}),r.d(t,"h",function(){return p}),r.d(t,"g",function(){return h}),r.d(t,"l",function(){return f});var o=r("t3Un");function n(e){return Object(o.a)({url:"/api/v1/theory/admin/tasks/categorys/",method:"get",params:e})}function a(e){return Object(o.a)({url:"/api/v1/theory/admin/tasks/categorys/",method:"post",data:e})}function i(e){return Object(o.a)({url:"/api/v1/theory/admin/tasks/categorys/",method:"delete",data:e})}function l(e){return Object(o.a)({url:"/api/v1/theory/admin/tasks/tags/",method:"get",params:e})}function s(e){return Object(o.a)({url:"/api/v1/theory/admin/tasks/tags/",method:"post",data:e})}function u(e){return Object(o.a)({url:"/api/v1/theory/admin/tasks/tags/",method:"delete",data:e})}function c(e){return Object(o.a)({url:"/api/v1/theory/admin/tasks/",method:"get",params:e})}function m(e){return Object(o.a)({url:"/api/v1/theory/admin/tasks/",method:"delete",data:e})}function d(e){return Object(o.a)({url:"/api/v1/theory/admin/tasks/",method:"post",data:e})}function p(e,t){return Object(o.a)({url:"/api/v1/theory/admin/tasks/"+e+"/",method:"patch",data:t})}function h(e,t){return Object(o.a)({url:"/api/v1/theory/admin/tasks/"+e+"/",method:"delete"})}function f(e){return Object(o.a)({url:"/api/v1/theory/admin/tasks/"+e+"/",method:"get"})}},QbF8:function(e,t,r){"use strict";var o=r("kRlP");r.n(o).a},aFNf:function(e,t,r){var o=r("c01Q"),n=o.JSON||(o.JSON={stringify:JSON.stringify});e.exports=function(e){return n.stringify.apply(n,arguments)}},kRlP:function(e,t,r){},omC7:function(e,t,r){e.exports={default:r("aFNf"),__esModule:!0}},saAe:function(e,t,r){"use strict";r.r(t);var o=r("omC7"),n=r.n(o),a=r("uTCP"),i=r("tBjE"),l=r("2XDT"),s={components:{QuillEditor:a.a,UploadFile:i.a},data:function(){return{task_id:this.$route.query.task_id,subTag:[],subCategory:[],difficulty:[{name:"单选题",id:1},{name:"多选题",id:2},{name:"判断题",id:3}],optionAry:["A","B","C","D","E","F","G","H","I","J","K","L","M","N"],ruleForm:{title:"",type_id:"",category_id:"",tag_id:"",content:"",content_html:"",option_number:4,option:{A:"",B:"",C:"",D:""},option_html:{},answer:["A"]},rules:{type_id:[{required:!0,message:"请选择题目类型",trigger:"change"}],content_html:[{required:!0,message:"请输入题目内容",trigger:"blur"}],category_id:[{required:!0,message:"请选择题目方向",trigger:"change"}],tag_id:[{required:!0,message:"请选择题目标签",trigger:"change"}],answer:[{type:"array",required:!0,message:"请至少选择一个选项",trigger:"change"}]},showView:!1}},created:function(){this.getSubType(),this.task_id&&this.subInfo()},beforeDestroy:function(){this.$store.dispatch("changeMatchName","")},methods:{deleteZip:function(){var e=this;Object(l.g)(this.task_id).then(function(t){t.data.success&&(e.ruleForm.file="",e.$message.success("删除成功"))})},handleType:function(e){this.ruleForm.answer=["A"],3===e?(this.ruleForm.option={A:"√",B:"×"},this.ruleForm.option_number=2):(this.ruleForm.option={A:"",B:"",C:"",D:""},this.ruleForm.option_number=4)},goBack:function(){history.back()},handleOption:function(e,t){if(console.log(e,t),e>t)for(var r=0;r<e-t;r++)console.log(t+r),this.ruleForm.option[this.optionAry[t+r]]="";else for(var o=0;o<=t-e;o++)delete this.ruleForm.option[this.optionAry[t-o]]},subInfo:function(){var e=this;Object(l.l)(this.task_id).then(function(t){for(var r in e.$store.dispatch("changeMatchName",t.data.title),e.ruleForm)e.ruleForm[r]=t.data[r]})},getSubType:function(){var e=this;Object(l.k)().then(function(t){e.subTag=t.data}),Object(l.j)().then(function(t){e.subCategory=t.data})},onSubmit:function(){var e=this;for(var t in this.ruleForm.option_html={},this.ruleForm.option){if(""===this.ruleForm.option[t])return this.$message.error("请确保所有选项都已填写");this.ruleForm.option_html[t]=this.ruleForm.option[t]}var r=new FormData,o=this.ruleForm;for(var a in""==o.title&&(o.title=o.content_html.slice(0,20)),o)"option"===a||"option_html"===a||"answer"===a?r.append(a,n()(o[a])):r.append(a,o[a]);var i=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.task_id?Object(l.h)(this.task_id,r).then(function(t){t.data.success&&(e.$message.success("操作成功"),e.$router.push({path:"/itemBank/theory/index",query:{id:e.$route.query.id}})),i.close()}).catch(function(e){i.close()}):Object(l.c)(r).then(function(t){t.data.success&&(e.$message.success("操作成功"),e.$router.push({path:"/itemBank/theory/index",query:{id:t.data.event_id}})),i.close()}).catch(function(e){i.close()})},submitForm:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return e.$message.error("请核验所填写的信息"),!1;e.onSubmit()})}}},u=(r("QbF8"),r("ZrdR")),c=Object(u.a)(s,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container create_topic"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"200px"}},[r("el-form-item",{attrs:{label:"题目名称"}},[r("el-input",{attrs:{clearable:"",placeholder:"此处为选填内容。此参数为空时系统将在题目保存时截取题目内容的前20个字符作为名称保存，方便题目列表的显示和调用。"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title","string"==typeof t?t.trim():t)},expression:"ruleForm.title"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"题目类型",prop:"type_id"}},[r("el-select",{staticClass:"filter-item",attrs:{clearable:"",placeholder:"请选择题目类型"},on:{change:e.handleType},model:{value:e.ruleForm.type_id,callback:function(t){e.$set(e.ruleForm,"type_id",t)},expression:"ruleForm.type_id"}},e._l(e.difficulty,function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"题目方向",prop:"category_id"}},[r("el-select",{staticClass:"filter-item",attrs:{clearable:"",placeholder:"请选择题目方向"},model:{value:e.ruleForm.category_id,callback:function(t){e.$set(e.ruleForm,"category_id",t)},expression:"ruleForm.category_id"}},e._l(e.subCategory,function(e,t){return r("el-option",{key:t,attrs:{label:e.cn_name,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"题目标签",prop:"tag_id"}},[r("el-select",{staticClass:"filter-item",attrs:{clearable:"",placeholder:"请选择题目标签"},model:{value:e.ruleForm.tag_id,callback:function(t){e.$set(e.ruleForm,"tag_id",t)},expression:"ruleForm.tag_id"}},e._l(e.subTag,function(e,t){return r("el-option",{key:t,attrs:{label:e.cn_name,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"题目内容",prop:"content_html"}},[r("quill-editor",{attrs:{holder:"请输入题目内容"},model:{value:e.ruleForm.content_html,callback:function(t){e.$set(e.ruleForm,"content_html",t)},expression:"ruleForm.content_html"}})],1),e._v(" "),3!==e.ruleForm.type_id?r("el-form-item",{attrs:{label:"选项数量"}},[r("el-input-number",{attrs:{min:2,max:6,label:"描述文字"},on:{change:e.handleOption},model:{value:e.ruleForm.option_number,callback:function(t){e.$set(e.ruleForm,"option_number",t)},expression:"ruleForm.option_number"}})],1):e._e(),e._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3!==e.ruleForm.type_id,expression:"ruleForm.type_id!==3"}],attrs:{label:"选项",required:""}},e._l(e.ruleForm.option,function(t,o,n){return r("div",{key:n,staticStyle:{"margin-bottom":"10px"}},[r("el-tag",{attrs:{effect:"dark",type:"warning"}},[e._v("\n          选项"+e._s(o)+"\n        ")]),e._v(" "),r("quill-editor",{attrs:{holder:"请输入题目选项"},model:{value:e.ruleForm.option[o],callback:function(t){e.$set(e.ruleForm.option,o,t)},expression:"ruleForm.option[k]"}})],1)})),e._v(" "),1==e.ruleForm.type_id?r("el-form-item",{attrs:{required:"",label:"正确答案"}},[r("el-radio-group",{attrs:{size:"small"},model:{value:e.ruleForm.answer[0],callback:function(t){e.$set(e.ruleForm.answer,0,t)},expression:"ruleForm.answer[0]"}},e._l(e.ruleForm.option,function(t,o,n){return r("el-radio",{key:n,attrs:{label:o,border:""}},[e._v(e._s(o))])}))],1):e._e(),e._v(" "),2==e.ruleForm.type_id?r("el-form-item",{attrs:{label:"正确答案",prop:"answer"}},[r("el-checkbox-group",{attrs:{size:"small"},model:{value:e.ruleForm.answer,callback:function(t){e.$set(e.ruleForm,"answer",t)},expression:"ruleForm.answer"}},e._l(e.ruleForm.option,function(t,o,n){return r("el-checkbox",{key:n,attrs:{label:o,border:""}},[e._v(e._s(o))])}))],1):e._e(),e._v(" "),3==e.ruleForm.type_id?r("el-form-item",{attrs:{required:"",label:"正确答案"}},[r("el-radio-group",{attrs:{size:"small"},model:{value:e.ruleForm.answer[0],callback:function(t){e.$set(e.ruleForm.answer,0,t)},expression:"ruleForm.answer[0]"}},[r("el-radio",{attrs:{label:"A",border:""}},[e._v("√")]),e._v(" "),r("el-radio",{attrs:{label:"B",border:""}},[e._v("×")])],1)],1):e._e(),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("保存")]),e._v(" "),r("el-button",{attrs:{type:"warning"},on:{click:e.goBack}},[e._v("返回")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="index.vue";t.default=c.exports}}]);
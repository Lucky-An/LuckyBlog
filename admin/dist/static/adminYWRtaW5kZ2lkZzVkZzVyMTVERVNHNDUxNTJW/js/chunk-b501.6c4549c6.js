(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-b501"],{"3Y68":function(t,e,n){"use strict";var i=n("U3Jy");n.n(i).a},"7V9w":function(t,e,n){},"8xXL":function(t,e,n){"use strict";var i=n("7V9w");n.n(i).a},A89i:function(t,e,n){"use strict";var i=n("LWu0");n.n(i).a},"E+Qz":function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return o});var i=n("t3Un");function a(t){return Object(i.a)({url:"/api/v1/common/admin/delete_event_logo/",method:"post",data:t})}function o(t){return Object(i.a)({url:"/api/v1/att_def/admin/deploy/tasks/",method:"get",params:t})}},Ibrk:function(t,e,n){"use strict";n.d(e,"e",function(){return a}),n.d(e,"g",function(){return o}),n.d(e,"i",function(){return r}),n.d(e,"f",function(){return s}),n.d(e,"a",function(){return l}),n.d(e,"b",function(){return u}),n.d(e,"d",function(){return c}),n.d(e,"c",function(){return p}),n.d(e,"h",function(){return d});var i=n("t3Un");function a(t){return Object(i.a)({url:"/api/v1/common/admin/challenge/tags/",method:"get",params:t})}function o(){return Object(i.a)({url:"/api/v1/common/admin/flavors",method:"get",params:{per_page:9999}})}function r(){return Object(i.a)({url:"/api/v1/common/admin/images",method:"get"})}function s(t){return Object(i.a)({url:"/api/v1/common/admin/challenge/categorys/",method:"get",params:t})}function l(t){return Object(i.a)({url:"/api/v1/common/admin/challenge/tags/",method:"post",data:t})}function u(t){return Object(i.a)({url:"/api/v1/common/admin/challenge/categorys/",method:"post",data:t})}function c(t){return Object(i.a)({url:"/api/v1/common/admin/challenge/categorys/",method:"delete",data:t})}function p(t){return Object(i.a)({url:"/api/v1/common/admin/challenge/tags/",method:"delete",data:t})}function d(t){return Object(i.a)({url:"/api/v1/common/admin/flavors",method:"get",params:t})}},"JQm/":function(t,e,n){},LWu0:function(t,e,n){},M6X5:function(t,e,n){"use strict";var i=n("tBcv");n.n(i).a},U3Jy:function(t,e,n){},Y5bG:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),Math.easeInOutQuad=function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e};var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};function a(t,e,n){var a=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,o=t-a,r=0;e=void 0===e?500:e;!function t(){r+=20,function(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}(Math.easeInOutQuad(r,a,o,e)),r<e?i(t):n&&"function"==typeof n&&n()}()}},ZySA:function(t,e,n){"use strict";var i=n("6ZY3"),a=n.n(i),o=(n("jUE0"),{bind:function(t,e){t.addEventListener("click",function(n){var i=a()({},e.value),o=a()({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},i),r=o.ele;if(r){r.style.position="relative",r.style.overflow="hidden";var s=r.getBoundingClientRect(),l=r.querySelector(".waves-ripple");switch(l?l.className="waves-ripple":((l=document.createElement("span")).className="waves-ripple",l.style.height=l.style.width=Math.max(s.width,s.height)+"px",r.appendChild(l)),o.type){case"center":l.style.top=s.height/2-l.offsetHeight/2+"px",l.style.left=s.width/2-l.offsetWidth/2+"px";break;default:l.style.top=(n.pageY-s.top-l.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",l.style.left=(n.pageX-s.left-l.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return l.style.backgroundColor=o.color,l.className="waves-ripple z-active",!1}},!1)}}),r=function(t){t.directive("waves",o)};window.Vue&&(window.waves=o,Vue.use(r)),o.install=r;e.a=o},iKbk:function(t,e,n){"use strict";n.r(e);var i=n("uTCP"),a=n("kFA9"),o=n("E+Qz"),r=n("Y5bG"),s=n("tBjE"),l={components:{QuillEditor:i.a,UploadFile:s.a},data:function(){return{fileList:[],step:!0,showEn:!0,startEndTime:[],ruleForm:{name_zh:"",start_time:"",end_time:"",cover:"",logo:"",event_mode:1,round_time:300,init_score:"",task_access:1,mark_reset_count:1,description_zh:"",description_html_zh:"",competition_guide_zh:"",competition_guide_html_zh:"",public:!0,join_mode:2,name_en:"",description_en:"",description_html_en:"",competition_guide_en:"",competition_guide_html_en:""},rules:{name_zh:[{required:!0,message:"请输入竞赛名称",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字",trigger:"blur"}],init_score:[{required:!0,message:"请输入初始分数",trigger:"blur"}],round_time:[{required:!0,message:"请输入回合时间",trigger:"blur"}],down_score:[{required:!0,message:"请输入宕机扣分",trigger:"blur"}],attack_score:[{required:!0,message:"请填写攻陷得分",trigger:"blur"}],description_zh:[{required:!0,message:"请填写竞赛简介",trigger:"blur"},{min:3,max:100,message:"长度在 3 到 100 个字",trigger:"blur"}]},id:this.$route.query.id,process:null,imgUrl:{logo:"",cover:"",competition_company_url:""}}},created:function(){this.id&&(this.getInfo(),this.step=!1)},mounted:function(){var t=this;setTimeout(function(){t.showEn=!1},200)},methods:{goBottom:function(){Object(r.a)(1e5,100)},nextStep:function(){this.$emit("nextStep",this.step)},changeComType:function(t){this.ruleForm.type=1==t?6:7},getInfo:function(){var t=this;Object(a.M)(this.id).then(function(e){for(var n in t.ruleForm)t.ruleForm[n]=e.data[n];t.startEndTime=[e.data.start_time,e.data.end_time],t.process=e.data.process,setTimeout(function(){Object(r.a)(0,0)},50)})},deleteImg:function(t){var e=this;this.$confirm("此操作会删除服务器中的图片，确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.a)({field:t,event_id:e.id}).then(function(n){n.data.success&&(e.$message.success("删除成功"),e.ruleForm[t]="")})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},clearImg:function(t){this.imgUrl[t]="",this.$refs[t].value=""},handleImage:function(t){var e=this,n=this.$refs[t].files[0];if(n){var i=new FileReader;i.readAsDataURL(n),i.onload=function(n){e.imgUrl[t]=i.result}}else this.imgUrl[t]=""},onSubmit:function(){var t=this,e=new FormData;this.ruleForm.start_time=this.startEndTime[0],this.ruleForm.end_time=this.startEndTime[1];var n=new Date(this.$store.state.config.time),i=new Date(this.ruleForm.start_time),o=new Date(this.ruleForm.end_time);if(n.getTime()>i.getTime()&&0!==this.process)this.$message.error("开始时间不能早于当前时间");else if(n.getTime()>o.getTime())this.$message.error("结束时间不能早于当前时间");else if(this.ruleForm.start_time!==this.ruleForm.end_time){var r=this.ruleForm;for(var s in r)e.append(s,r[s]);this.id?Object(a.J)(this.id,e).then(function(e){e.data.success&&t.nextStep()}):Object(a.f)(e).then(function(e){e.data.success&&(sessionStorage.setItem("id",e.data.event_id),t.$router.push({path:"/competition/DevOps/editMatch/editMatch",query:{id:e.data.event_id,step:1}}))})}else this.$message.error("开始时间和结束时间不能相同")},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return e.$message.error("填写信息有误"),!1;e.onSubmit()})}}},u=(n("3Y68"),n("ZrdR")),c=Object(u.a)(l,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container create_match"},[n("div",{staticClass:"goBottom"},[n("el-button",{attrs:{type:"warning"},on:{click:t.goBottom}},[t._v("直达底部")])],1),t._v(" "),n("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"150px"}},[n("el-form-item",{attrs:{label:"竞赛名称",prop:"name_zh"}},[n("el-input",{attrs:{placeholder:"请输入竞赛名称"},model:{value:t.ruleForm.name_zh,callback:function(e){t.$set(t.ruleForm,"name_zh","string"==typeof e?e.trim():e)},expression:"ruleForm.name_zh"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"起止时间",required:""}},[n("el-date-picker",{attrs:{clearable:!1,disabled:0===t.process,type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.startEndTime,callback:function(e){t.startEndTime=e},expression:"startEndTime"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"竞赛封面"}},[n("UploadFile",{attrs:{file:t.ruleForm.cover,"file-type":["jpg","png"],"list-type":"picture-card","file-size":2097152},on:{"update:file":function(e){t.$set(t.ruleForm,"cover",e)}}}),t._v("\n      （请上传PNG、JPG格式文件，大小不超过2M）\n    ")],1),t._v(" "),n("el-form-item",{attrs:{label:"竞赛 Logo"}},[n("UploadFile",{attrs:{file:t.ruleForm.logo,"file-type":["jpg","png"],"list-type":"picture-card","file-size":2097152},on:{"update:file":function(e){t.$set(t.ruleForm,"logo",e)}}}),t._v("\n      （请上传PNG、JPG格式文件，大小不超过2M）\n    ")],1),t._v(" "),n("el-form-item",{attrs:{prop:"flavor_uuid",label:"比赛模式"}},[n("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择比赛模式"},model:{value:t.ruleForm.event_mode,callback:function(e){t.$set(t.ruleForm,"event_mode",e)},expression:"ruleForm.event_mode"}},[n("el-option",{attrs:{value:1,label:"线上赛"}}),t._v(" "),n("el-option",{attrs:{value:2,label:"线下赛"}})],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"回合时间",prop:"round_time"}},[n("el-input-number",{attrs:{min:30,max:1800,size:"medium"},model:{value:t.ruleForm.round_time,callback:function(e){t.$set(t.ruleForm,"round_time",e)},expression:"ruleForm.round_time"}}),t._v("   秒\n    ")],1),t._v(" "),n("el-form-item",{attrs:{label:"初始分值",prop:"init_score"}},[n("el-input-number",{attrs:{min:0,max:1e5,size:"medium"},model:{value:t.ruleForm.init_score,callback:function(e){t.$set(t.ruleForm,"init_score",e)},expression:"ruleForm.init_score"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"题目访问模式",prop:"init_score"}},[n("el-switch",{attrs:{"active-value":1,"inactive-value":2,"inactive-color":"#409EFF","active-text":"密钥","inactive-text":"密码"},model:{value:t.ruleForm.task_access,callback:function(e){t.$set(t.ruleForm,"task_access",e)},expression:"ruleForm.task_access"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"靶标重置次数",prop:"init_score"}},[n("el-input-number",{attrs:{min:0,max:5,size:"medium"},model:{value:t.ruleForm.mark_reset_count,callback:function(e){t.$set(t.ruleForm,"mark_reset_count",e)},expression:"ruleForm.mark_reset_count"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"竞赛简介",prop:"description_zh"}},[n("el-input",{attrs:{rows:8,type:"textarea",placeholder:"请输入竞赛简介"},model:{value:t.ruleForm.description_zh,callback:function(e){t.$set(t.ruleForm,"description_zh",e)},expression:"ruleForm.description_zh"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"参赛指南",prop:"competition_guide_zh"}},[n("quill-editor",{attrs:{holder:"请输入参赛指南"},model:{value:t.ruleForm.competition_guide_html_zh,callback:function(e){t.$set(t.ruleForm,"competition_guide_html_zh",e)},expression:"ruleForm.competition_guide_html_zh"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"是否公开",prop:"init_score"}},[n("el-switch",{attrs:{"active-text":"公开","inactive-text":"隐藏"},model:{value:t.ruleForm.public,callback:function(e){t.$set(t.ruleForm,"public",e)},expression:"ruleForm.public"}})],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showEn,expression:"showEn"}]},[n("br"),n("br"),n("br"),t._v(" "),n("p",{staticStyle:{"text-align":"center","font-size":"24px","font-weight":"bold"}},[t._v("\n        下方为英文信息\n      ")]),t._v(" "),n("el-form-item",{attrs:{label:"竞赛名称英文",prop:"name_en"}},[n("el-input",{attrs:{placeholder:"请输入竞赛英文名称第一行"},model:{value:t.ruleForm.name_en,callback:function(e){t.$set(t.ruleForm,"name_en","string"==typeof e?e.trim():e)},expression:"ruleForm.name_en"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"竞赛简介英文",prop:"description_en"}},[n("el-input",{attrs:{rows:8,type:"textarea",placeholder:"请输入竞赛简介英文"},model:{value:t.ruleForm.description_en,callback:function(e){t.$set(t.ruleForm,"description_en",e)},expression:"ruleForm.description_en"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"参赛指南英文",prop:"competition_guide_en"}},[n("quill-editor",{attrs:{holder:"请输入参赛指南英文"},model:{value:t.ruleForm.competition_guide_html_en,callback:function(e){t.$set(t.ruleForm,"competition_guide_html_en",e)},expression:"ruleForm.competition_guide_html_en"}})],1)],1),t._v(" "),n("el-form-item",[n("span",{staticStyle:{color:"red","font-size":"18px"}},[t._v("如果竞赛信息有所更改，一定要先点击保存，否则修改的信息会丢失。")])]),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"success"},on:{click:function(e){t.showEn=!t.showEn}}},[t._v(t._s(t.showEn?"关闭输入英文信息":"显示填写英文信息"))]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保存")]),t._v(" "),n("el-button",{attrs:{disabled:t.step,type:"primary"},on:{click:function(e){t.nextStep("ruleForm")}}},[t._v("下一步")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="index.vue";var p=c.exports,d={data:function(){return{data:[],value:[],id:this.$route.query.id}},created:function(){this.getTeamList()},methods:{getTeamList:function(){var t=this,e={event_id:this.id};Object(a.Q)(e).then(function(e){t.data=e.data.teams;var n=e.data.team_ids;t.value=n})},submitForm:function(){var t=this,e={ids:this.value},n={event_id:this.id};Object(a.db)(n,e).then(function(e){e.data.success&&t.$message.success("添加成功")})},nextStep:function(){this.$emit("nextStep")},backStep:function(){this.$emit("backStep")}}},m=(n("A89i"),Object(u.a)(d,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"transfer_box"},[n("el-transfer",{attrs:{titles:["所有选手","参赛选手"],props:{key:"id",label:"name"},data:t.data,filterable:""},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t._v(" "),n("span",{staticStyle:{color:"red","font-size":"18px","margin-top":"20px"}},[t._v("如果竞赛信息有所更改，一定要先点击保存，否则修改的信息会丢失。")]),t._v(" "),n("div",{staticClass:"btn_box"},[n("el-button",{attrs:{type:"primary"},on:{click:t.backStep}},[t._v("上一步")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保存")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.nextStep}},[t._v("下一步")])],1)],1)},[],!1,null,"d7377dc2",null));m.options.__file="index.vue";var f=m.exports,h=n("Mz3J"),v=n("ZySA"),_=n("Ibrk"),b={name:"TopicManagement",directives:{waves:v.a},components:{Pagination:h.a},data:function(){return{newscore:"",subType:[],subTag:[],textarea:"",addDlg:!1,choseDown:!1,diaFlag:!1,fileList:[],flagList:[],downList:[],subData:[],matchList:[],hashs:[],tableKey:0,listTotal:0,subTotal:0,listLoading:!1,listPage:1,subPage:1,topicQuery:{page:1,per_page:this.$store.state.config.row,challenge_type:"",event_id:this.$route.query.id||sessionStorage.id,label:"",title:""},importData:{event:this.$route.query.id,hashs:[]},id:this.$route.query.id||sessionStorage.id,listQuery:{offset:0,limit:this.$store.state.config.row},showInput:-1,timer:{},num:{},loading:[]}},created:function(){this.getList(),this.getType()},beforeDestroy:function(){for(var t in this.timer)clearInterval(this.timer[t])},methods:{nextStep:function(){this.$emit("nextStep")},indexMethod:function(t){return(this.listPage-1)*this.listQuery.limit+t+1},backStep:function(){this.$emit("backStep")},closeLoading:function(t){this.loading=this.loading.filter(function(e){return e!=t})},showEditScore:function(t,e){this.newscore=t,this.showInput=e},sureImport:function(){var t=this,e={event_id:this.id},n={ids:this.importData.hashs};Object(a.eb)(e,n).then(function(e){e.data.success&&(t.addDlg=!1,t.getList())})},handleChange:function(t){this.importData.hashs=t.map(function(t){return t.id})},showtopic:function(){this.addDlg=!0,this.getImportList()},getImportList:function(t){var e=this;1===t&&(this.topicQuery.page=t),Object(a.L)(this.topicQuery).then(function(t){e.subData=t.data.data,e.subTotal=t.data.total})},removeSub:function(){var t=this,e={ids:this.hashs},n={event_id:this.id};this.hashs.length<=0||this.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.G)(n,e).then(function(e){e.data.success&&(t.$message.success("操作成功"),t.getList())})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},showflag:function(t){this.diaFlag=!0,this.flagList=t},closeDown:function(){this.fileList=[],this.downList=[]},showDownload:function(t){this.choseDown=!0,this.fileList=t},download:function(){this.downList.forEach(function(t){window.location.href=t}),this.choseDown=!1},addTopic:function(){this.$router.push({path:"/competition/addTopic",query:{id:this.$route.query.id}})},editTopic:function(t){this.$router.push({path:"/competition/DevOps/editMatch/editTopic",query:{id:this.$route.query.id,task_id:t}})},getType:function(){var t=this;Object(_.f)({type:3}).then(function(e){t.subType=e.data}),Object(_.e)({type:3}).then(function(e){t.subTag=e.data})},getList:function(t){var e=this;this.listQuery.offset=(this.listPage-1)*this.listQuery.limit;var n={offset:this.listQuery.offset,limit:this.listQuery.limit,event_id:this.id};Object(a.R)(n).then(function(n){t&&e.closeLoading(t);var i=n.data;e.matchList=i.rows,e.listTotal=i.total,e.listTotal<=e.listQuery.offset&&0!=e.listTotal&&(e.listQuery.offset=e.listQuery.offset-e.listQuery.limit,e.getList())})},checkTable:function(t){this.hashs=t.map(function(t){return t.id})},handleClose:function(){this.topicQuery.challenge_type="",this.topicQuery.label="",this.topicQuery.title="",this.topicQuery.page=1,this.subData=[],this.importData.hashs=[]}}},g=(n("8xXL"),Object(u.a)(b,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"}),t._v(" "),n("div",{staticClass:"filter-container"},[n("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.showtopic}},[t._v("\n      导入题目")]),t._v(" "),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.removeSub}},[t._v(" 删除")])],1),t._v(" "),n("div",{staticClass:"filter-container"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.matchList,border:"",fit:"","highlight-current-row":"","tooltip-effect":"dark"},on:{"selection-change":t.checkTable}},[n("el-table-column",{attrs:{align:"center",type:"selection"}}),t._v(" "),n("el-table-column",{attrs:{index:t.indexMethod,align:"center",type:"index",width:"50",label:"序号"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"title",label:"题目名称"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"label",label:"题目标签"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(t.subTag,function(i,a){return i.id==e.row.label?n("span",[t._v(t._s(i.cn_name))]):t._e()})}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"label",label:"题目类型"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(t.subType,function(i,a){return i.id==e.row.challenge_type?n("span",[t._v(t._s(i.cn_name))]):t._e()})}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"ops_score",label:"考察点分数"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"category_cn_name",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(n){t.editTopic(e.row.id)}}},[t._v("编辑")])]}}])})],1)],1),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.listTotal>0,expression:"listTotal > 0"}],attrs:{total:t.listTotal,page:t.listPage,limit:t.listQuery.limit},on:{"update:page":function(e){t.listPage=e},"update:limit":function(e){t.$set(t.listQuery,"limit",e)},pagination:t.getList}}),t._v(" "),n("div",{staticClass:"btn_box topicStep_box"},[n("el-button",{attrs:{type:"primary"},on:{click:t.backStep}},[t._v("上一步")]),t._v(" "),n("router-link",{attrs:{to:{path:"/competition/DevOps/index"}}},[n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"}},[t._v("完成")])],1),t._v(" "),n("router-link",{attrs:{to:{path:"/competition/DevOps/operation",query:{id:t.id}}}},[n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning"}},[t._v("竞赛运维")])],1)],1),t._v(" "),n("el-dialog",{staticClass:"addsub",attrs:{visible:t.addDlg,title:"选择题目",width:"900px"},on:{"update:visible":function(e){t.addDlg=e},close:t.handleClose}},[n("div",{staticClass:"clearfix",staticStyle:{"margin-bottom":"20px"}},[n("el-select",{staticClass:"filter-item",attrs:{size:"mini",placeholder:"请选择题目标签",clearable:""},model:{value:t.topicQuery.label,callback:function(e){t.$set(t.topicQuery,"label",e)},expression:"topicQuery.label"}},t._l(t.subTag,function(t,e){return n("el-option",{key:e,attrs:{label:t.cn_name,value:t.id}})})),t._v(" "),n("el-select",{staticClass:"filter-item",attrs:{size:"mini",placeholder:"请选择题目类型",clearable:""},model:{value:t.topicQuery.challenge_type,callback:function(e){t.$set(t.topicQuery,"challenge_type",e)},expression:"topicQuery.challenge_type"}},t._l(t.subType,function(t,e){return n("el-option",{key:e,attrs:{label:t.cn_name,value:t.id}})})),t._v(" "),n("el-input",{staticClass:"filter-item",staticStyle:{width:"150px"},attrs:{placeholder:"请输入题目名称",size:"mini"},model:{value:t.topicQuery.title,callback:function(e){t.$set(t.topicQuery,"title",e)},expression:"topicQuery.title"}}),t._v(" "),n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",size:"mini"},on:{click:t.getImportList}},[t._v("搜索\n      ")])],1),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.subData,border:""},on:{"selection-change":t.handleChange}},[n("el-table-column",{attrs:{align:"center",type:"selection"}}),t._v(" "),n("el-table-column",{attrs:{index:(t.topicQuery.page-1)*t.topicQuery.per_page+1,align:"center",type:"index",width:"50",label:"序号"}}),t._v(" "),n("el-table-column",{attrs:{prop:"title",label:"题目名称"}}),t._v(" "),n("el-table-column",{attrs:{prop:"protocol",label:"题目标签"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(t.subTag,function(i,a){return i.id==e.row.label?n("span",{key:a},[t._v(t._s(i.cn_name))]):t._e()})}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"label",label:"题目类型"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(t.subType,function(i,a){return i.id==e.row.challenge_type?n("span",{key:a},[t._v(t._s(i.cn_name))]):t._e()})}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"ops_score",label:"考察点分数"}})],1),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.subTotal>0,expression:"subTotal>0"}],attrs:{total:t.subTotal,page:t.topicQuery.page,limit:t.topicQuery.per_page},on:{"update:page":function(e){t.$set(t.topicQuery,"page",e)},"update:limit":function(e){t.$set(t.topicQuery,"per_page",e)},pagination:t.getImportList}}),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.sureImport}},[t._v("确 定")]),t._v(" "),n("el-button",{on:{click:function(e){t.addDlg=!1}}},[t._v("取 消")])],1)],1),t._v(" "),n("el-dialog",{staticClass:"addsub",attrs:{visible:t.choseDown,title:"下载附件",width:"900px"},on:{"update:visible":function(e){t.choseDown=e},close:t.closeDown}},t._l(t.fileList,function(e){return n("a",{attrs:{href:e,download:""}},[n("el-button",{attrs:{type:"primary"}},[t._v(t._s(e))])],1)})),t._v(" "),n("el-dialog",{staticClass:"addsub",attrs:{visible:t.diaFlag,title:"查看flag",width:"900px"},on:{"update:visible":function(e){t.diaFlag=e},close:t.closeDown}},t._l(t.flagList,function(e){return n("p",[t._v(t._s(e))])}))],1)},[],!1,null,"36902748",null));g.options.__file="index.vue";var y=g.exports,w={name:"TopicManagement",directives:{waves:v.a},components:{Pagination:h.a},data:function(){return{matchList:[],hashs:[],tableKey:0,listTotal:0,subTotal:0,listLoading:!1,listPage:1,subPage:1,topicQuery:{offset:0,limit:this.$store.state.config.row},importData:{event:this.$route.query.id,hashs:[]},id:this.$route.query.id,listQuery:{offset:0,limit:this.$store.state.config.row}}},created:function(){this.getList()},methods:{indexMethod:function(t){return(this.listQuery.offset-1)*this.listQuery.limit+t+1},backStep:function(){this.$emit("backStep")},handleChange:function(t){this.importData.hashs=t.map(function(t){return t.hash})},addInternet:function(){this.$router.push({path:"/competition/DevOps/editMatch/addInetnet",query:{id:this.id,step:3}})},editInternet:function(t){this.$router.push({path:"/competition/DevOps/editMatch/editInetnet",query:{id:this.id,internet_id:t,step:3}})},removeSub:function(){var t=this;this.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={event_id:t.id};Object(a.E)(e).then(function(e){e.data.success&&(t.$message.success("操作成功"),t.getList())})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},getList:function(t){var e=this,n={event_id:this.id};Object(a.S)(n).then(function(n){t&&e.closeLoading(t);var i=n.data;e.matchList=i})},checkTable:function(t){this.hashs=t.map(function(t){return t.hash})}}},x=(n("rF0f"),Object(u.a)(w,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container "},[n("div",{staticClass:"filter-container"},[n("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.addInternet}},[t._v(" 增加网络")]),t._v(" "),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.removeSub}},[t._v(" 删除")])],1),t._v(" "),n("div",{staticClass:"filter-container"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.matchList,border:"",fit:"","highlight-current-row":"","tooltip-effect":"dark"}},[n("el-table-column",{attrs:{align:"center",prop:"team_name",label:"账户"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"name",label:"网络名称"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"ip",label:"网络"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"vlan",label:"vlan"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"mask",label:"掩码"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"gateway",label:"网关"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",width:"100px",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"mini",type:"success"},on:{click:function(n){t.editInternet(e.row.id)}}},[t._v("编辑\n          ")])]}}])})],1)],1),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.listTotal>0,expression:"listTotal>0"}],attrs:{total:t.listTotal,page:t.listPage,limit:t.listQuery.limit},on:{"update:page":function(e){t.listPage=e},"update:limit":function(e){t.$set(t.listQuery,"limit",e)},pagination:t.getList}}),t._v(" "),n("div",{staticClass:"btn_box topicStep_box"},[n("el-button",{attrs:{type:"primary"},on:{click:t.backStep}},[t._v("上一步")]),t._v(" "),n("router-link",{attrs:{to:{path:"/competition/DevOps/index"}}},[n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"}},[t._v("完成")])],1),t._v(" "),n("router-link",{attrs:{to:{path:"/competition/DevOps/operation",query:{id:t.id}}}},[n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning"}},[t._v("竞赛运维")])],1)],1)],1)},[],!1,null,"0e525614",null));x.options.__file="index.vue";var k={name:"Index",components:{createMatch:p,user:f,topic:y,internet:x.exports},data:function(){return{tabMapOptions:[{label:"基本信息",key:"status"},{label:"用户",key:"user"},{label:"题目",key:"sub"}],activeName:"status",active:1*this.$route.query.step||0}},created:function(){var t=this;this.$route.query.id&&Object(a.M)(this.$route.query.id).then(function(e){t.$store.dispatch("changeMatchName",e.data.name_zh)})},beforeDestroy:function(){this.$store.dispatch("changeMatchName","")},methods:{nextStep:function(){this.active++>3&&(this.active=0),this.$route.query.step=this.active},backStep:function(){this.active--<0&&(this.active=0),this.$route.query.step=this.active}}},O=(n("M6X5"),Object(u.a)(k,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("el-steps",{staticStyle:{"margin-top":"20px"},attrs:{active:t.active,"finish-status":"success",simple:""}},[n("el-step",{attrs:{title:"基本信息"}}),t._v(" "),n("el-step",{attrs:{title:"选择选手"}}),t._v(" "),n("el-step",{attrs:{title:"题目"}})],1)],1),t._v(" "),0==t.active?n("div",[n("createMatch",{on:{nextStep:t.nextStep}})],1):t._e(),t._v(" "),1==t.active?n("div",[n("user",{on:{nextStep:t.nextStep,backStep:t.backStep}})],1):t._e(),t._v(" "),2==t.active?n("div",[n("topic",{on:{nextStep:t.nextStep,backStep:t.backStep}})],1):t._e(),t._v(" "),3==t.active?n("div",[n("internet",{on:{nextStep:t.nextStep,backStep:t.backStep}})],1):t._e()])},[],!1,null,"7e457207",null));O.options.__file="index.vue";e.default=O.exports},jUE0:function(t,e,n){},kFA9:function(t,e,n){"use strict";n.d(e,"N",function(){return a}),n.d(e,"F",function(){return o}),n.d(e,"Y",function(){return r}),n.d(e,"f",function(){return s}),n.d(e,"Q",function(){return l}),n.d(e,"db",function(){return u}),n.d(e,"R",function(){return c}),n.d(e,"L",function(){return p}),n.d(e,"eb",function(){return d}),n.d(e,"G",function(){return m}),n.d(e,"t",function(){return f}),n.d(e,"u",function(){return h}),n.d(e,"M",function(){return v}),n.d(e,"J",function(){return _}),n.d(e,"S",function(){return b}),n.d(e,"T",function(){return g}),n.d(e,"b",function(){return y}),n.d(e,"I",function(){return w}),n.d(e,"E",function(){return x}),n.d(e,"P",function(){return k}),n.d(e,"bb",function(){return O}),n.d(e,"fb",function(){return j}),n.d(e,"a",function(){return F}),n.d(e,"H",function(){return T}),n.d(e,"O",function(){return $}),n.d(e,"s",function(){return S}),n.d(e,"D",function(){return L}),n.d(e,"ab",function(){return Q}),n.d(e,"V",function(){return z}),n.d(e,"h",function(){return D}),n.d(e,"B",function(){return C}),n.d(e,"i",function(){return E}),n.d(e,"X",function(){return q}),n.d(e,"e",function(){return M}),n.d(e,"q",function(){return I}),n.d(e,"g",function(){return N}),n.d(e,"z",function(){return P}),n.d(e,"A",function(){return U}),n.d(e,"r",function(){return B}),n.d(e,"v",function(){return A}),n.d(e,"Z",function(){return J}),n.d(e,"k",function(){return G}),n.d(e,"w",function(){return R}),n.d(e,"j",function(){return Y}),n.d(e,"m",function(){return K}),n.d(e,"n",function(){return X}),n.d(e,"cb",function(){return H}),n.d(e,"l",function(){return V}),n.d(e,"C",function(){return W}),n.d(e,"x",function(){return Z}),n.d(e,"o",function(){return tt}),n.d(e,"p",function(){return et}),n.d(e,"y",function(){return nt}),n.d(e,"U",function(){return it}),n.d(e,"d",function(){return at}),n.d(e,"c",function(){return ot}),n.d(e,"W",function(){return rt}),n.d(e,"K",function(){return st});var i=n("t3Un");function a(t){return Object(i.a)({method:"get",url:"/api/v1/ops/admin/setting/event_list/",params:t})}function o(t){return Object(i.a)({url:"/api/v1/ops/admin/setting/event_delete/",method:"post",data:t})}function r(t){return Object(i.a)({url:"/api/v1/ops/admin/setting/event_public/",method:"post",data:t})}function s(t){return Object(i.a)({url:"/api/v1/ops/admin/setting/event_list/",method:"post",data:t})}function l(t){return Object(i.a)({url:"/api/v1/ops/admin/setting/team_select/",method:"get",params:t})}function u(t,e){return Object(i.a)({url:"  /api/v1/ops/admin/setting/team_select/",method:"post",params:t,data:e})}function c(t){return Object(i.a)({url:"/api/v1/ops/admin/setting/challenge_list/",method:"get",params:t})}function p(t){return Object(i.a)({url:"/api/v1/ops/admin/setting/challenge_store_select/",method:"get",params:t})}function d(t,e){return Object(i.a)({url:"/api/v1/ops/admin/setting/challenge_list/",method:"post",params:t,data:e})}function m(t,e){return Object(i.a)({url:"/api/v1/ops/admin/setting/challenge/",method:"post",params:t,data:e})}function f(t,e){return Object(i.a)({url:"/api/v1/ops/admin/setting/challenge/",method:"get",params:t})}function h(t,e){return Object(i.a)({url:"/api/v1/ops/admin/setting/challenge/",method:"patch",params:t,data:e})}function v(t){return Object(i.a)({method:"get",url:"/api/v1/ops/admin/setting/event_list/"+t+"/"})}function _(t,e){return Object(i.a)({method:"patch",url:"/api/v1/ops/admin/setting/event_list/"+t+"/",data:e})}function b(t){return Object(i.a)({method:"get",url:"/api/v1/ops/admin/setting/network_list/",params:t})}function g(t){return Object(i.a)({method:"get",url:"/api/v1/ops/admin/setting/team_count/",params:t})}function y(t,e){return Object(i.a)({method:"post",url:"/api/v1/ops/admin/setting/network_list/",params:t,data:e})}function w(t,e){return Object(i.a)({method:"patch",url:"/api/v1/ops/admin/setting/network_list/",params:t,data:e})}function x(t){return Object(i.a)({method:"delete",url:"/api/v1/ops/admin/setting/network_list/",params:t})}function k(t){return Object(i.a)({method:"get",url:"/api/v1/ops/admin/operation/notice_list/",params:t})}function O(t,e){return Object(i.a)({method:"post",url:"/api/v1/ops/admin/operation/notice_delete/",params:t,data:e})}function j(t,e){return Object(i.a)({method:"post",url:"/api/v1/ops/admin/operation/notice_top/",params:t,data:e})}function F(t,e){return Object(i.a)({method:"post",url:"/api/v1/ops/admin/operation/notice_list/",params:t,data:e})}function T(t,e){return Object(i.a)({method:"patch",url:"/api/v1/ops/admin/operation/notice_list/",params:t,data:e})}function $(t){return Object(i.a)({method:"get",url:"/api/v1/ops/admin/operation/operation_data/",params:t})}function S(t,e){return Object(i.a)({method:"post",url:"/api/v1/ops/admin/operation/show_rank/",params:t,data:e})}function L(t,e){return Object(i.a)({method:"post",url:"/api/v1/ops/admin/operation/use_vis/",params:t,data:e})}function Q(t){return Object(i.a)({method:"post",url:"/api/v1/ops/admin/operation/upload_pushflag_file/",params:t})}function z(t){return Object(i.a)({method:"post",url:"/api/v1/ops/admin/operation/init_scene/",params:t})}function D(t,e){return Object(i.a)({method:"post",url:"/api/v1/ops/admin/operation/write_up/",params:t,data:e})}function C(t,e){return Object(i.a)({method:"post",url:"/api/v1/ops/admin/operation/time_change/",params:t,data:e})}function E(t,e){return Object(i.a)({method:"post",url:"/api/v1/ops/admin/operation/event_control/",params:t,data:e})}function q(t){return Object(i.a)({method:"post",url:"/api/v1/ops/admin/operation/init_virtual/",params:t})}function M(t,e){return Object(i.a)({method:"post",url:"/api/v1/ops/admin/operation/vpn/",params:t,data:e})}function I(t){return Object(i.a)({method:"get",url:"/api/v1/ops/admin/operation/operation_team_data/",params:t})}function N(t,e){return Object(i.a)({method:"post",url:"/api/v1/ops/admin/operation/team_status/",params:t,data:e})}function P(t,e){return Object(i.a)({method:"post",url:"/api/v1/ops/admin/operation/reward_score/",params:t,data:e})}function U(t,e){return Object(i.a)({method:"get",url:"/api/v1/ops/admin/operation/reward_score/",params:t})}function B(t){return Object(i.a)({method:"get",url:"/api/v1/ops/admin/operation/challenge_operation_data/",params:t})}function A(t,e){return Object(i.a)({method:"post",url:"/api/v1/ops/admin/operation/challenge_status/",params:t,data:e})}function J(t,e){return Object(i.a)({method:"post",url:"/api/v1/ops/admin/operation/pull_image/",params:t,data:e})}function G(t){return Object(i.a)({method:"post",url:"/api/v1/ops/admin/deploy/init_env/",params:t})}function R(t){return Object(i.a)({method:"get",url:"/api/v1/ops/admin/deploy/task_progress/",params:t})}function Y(t){return Object(i.a)({method:"post",url:"/api/v1/ops/admin/deploy/init_network/",params:t})}function K(t){return Object(i.a)({method:"post",url:"/api/v1/ops/admin/deploy/init_team/",params:t})}function X(t){return Object(i.a)({method:"post",url:"/api/v1/ops/admin/deploy/init_challenge_env/",params:t})}function H(t){return Object(i.a)({method:"get",url:"/api/v1/ops/admin/operation/deploy_status/",params:t})}function V(t,e){return Object(i.a)({method:"post",url:"/api/v1/ops/admin/operation/challenge_env_control/",params:t,data:e})}function W(t,e){return Object(i.a)({method:"post",url:"/api/v1/ops/admin/operation/check_scripts/",params:t,data:e})}function Z(t,e){return Object(i.a)({method:"post",url:"/api/v1/ops/admin/operation/push_scripts/",params:t,data:e})}function tt(t,e){return Object(i.a)({method:"get",url:"/api/v1/ops/admin/operation/operation_monitor/",params:t,data:e})}function et(t){return Object(i.a)({method:"get",url:"/api/v1/ops/admin/operation/event_statistic/",params:t})}function nt(t){return Object(i.a)({method:"get",url:"/api/v1/ops/admin/operation/event_statistic_one/",params:t})}function it(t){return Object(i.a)({method:"get",url:"/api/v1/ops/admin/operation/show_panel/",params:t})}function at(t){return Object(i.a)({method:"post",url:"/api/v1/ops/admin/operation/write_up/",params:t})}function ot(t){return Object(i.a)({method:"post",url:"/api/v1/ops/admin/operation/show_rank/",params:t})}function rt(t){return Object(i.a)({method:"post",url:"/api/v1/ops/admin/operation/init_virtual/",params:t})}function st(t){return Object(i.a)({method:"get",url:"/api/v1/ops/admin/operation/writeup_download_all",params:t,responseType:"blob"})}},rF0f:function(t,e,n){"use strict";var i=n("JQm/");n.n(i).a},tBcv:function(t,e,n){}}]);
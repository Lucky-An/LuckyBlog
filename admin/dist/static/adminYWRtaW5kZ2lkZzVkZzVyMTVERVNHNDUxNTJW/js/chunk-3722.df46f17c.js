(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3722"],{CquO:function(e,t,r){"use strict";r.d(t,"y",function(){return a}),r.d(t,"l",function(){return i}),r.d(t,"X",function(){return o}),r.d(t,"x",function(){return u}),r.d(t,"j",function(){return l}),r.d(t,"p",function(){return c}),r.d(t,"g",function(){return s}),r.d(t,"B",function(){return d}),r.d(t,"cb",function(){return m}),r.d(t,"J",function(){return f}),r.d(t,"I",function(){return p}),r.d(t,"U",function(){return g}),r.d(t,"V",function(){return h}),r.d(t,"ib",function(){return v}),r.d(t,"Q",function(){return _}),r.d(t,"R",function(){return b}),r.d(t,"f",function(){return y}),r.d(t,"w",function(){return j}),r.d(t,"eb",function(){return F}),r.d(t,"A",function(){return k}),r.d(t,"H",function(){return O}),r.d(t,"D",function(){return w}),r.d(t,"O",function(){return x}),r.d(t,"r",function(){return $}),r.d(t,"m",function(){return C}),r.d(t,"bb",function(){return M}),r.d(t,"h",function(){return T}),r.d(t,"o",function(){return q}),r.d(t,"E",function(){return A}),r.d(t,"k",function(){return L}),r.d(t,"Y",function(){return S}),r.d(t,"K",function(){return E}),r.d(t,"z",function(){return U}),r.d(t,"C",function(){return N}),r.d(t,"c",function(){return z}),r.d(t,"d",function(){return B}),r.d(t,"hb",function(){return P}),r.d(t,"jb",function(){return I}),r.d(t,"Z",function(){return J}),r.d(t,"ab",function(){return R}),r.d(t,"fb",function(){return W}),r.d(t,"gb",function(){return D}),r.d(t,"u",function(){return Q}),r.d(t,"G",function(){return Z}),r.d(t,"b",function(){return H}),r.d(t,"W",function(){return Y}),r.d(t,"v",function(){return G}),r.d(t,"n",function(){return V}),r.d(t,"i",function(){return X}),r.d(t,"L",function(){return K}),r.d(t,"e",function(){return ee}),r.d(t,"M",function(){return te}),r.d(t,"T",function(){return re}),r.d(t,"F",function(){return ne}),r.d(t,"db",function(){return ae}),r.d(t,"N",function(){return ie}),r.d(t,"a",function(){return oe}),r.d(t,"P",function(){return ue}),r.d(t,"q",function(){return le}),r.d(t,"S",function(){return ce}),r.d(t,"t",function(){return se}),r.d(t,"s",function(){return de});var n=r("t3Un");function a(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/events",method:"get",params:e})}function i(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/events/batch_destroy",method:"delete",data:e})}function o(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/events/batch_public",method:"patch",data:e})}function u(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/events/"+e,method:"get"})}function l(e,t){return Object(n.a)({url:"/api/v1/jeopardy/admin/events/"+e,method:"delete",data:t})}function c(e,t){return Object(n.a)({url:"/api/v1/jeopardy/admin/events/"+e,method:"patch",data:t})}function s(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/events",method:"post",data:e})}function d(e,t){return Object(n.a)({url:"/api/v1/jeopardy/admin/events/"+e+"/users",method:"get"})}function m(e,t){return Object(n.a)({url:"/api/v1/jeopardy/admin/events/"+e+"/users",method:"post",data:t})}function f(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/tasks",method:"get",params:e})}function p(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/users",method:"get",params:e})}function g(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/state",method:"get",params:e})}function h(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event_mode/"+e,method:"get"})}function v(e,t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/state",method:"patch",params:e,data:t})}function _(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/init_env/",method:"post",data:e})}function b(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/"+e+"/networks",method:"post"})}function y(e,t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/data/clear",method:"delete",params:e})}function j(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/import_tasks_details",method:"get",params:e})}function F(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event_tasks/batch_create",method:"post",data:e})}function k(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/task_tags",method:"get"})}function O(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/task_categorys",method:"get"})}function w(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event_tasks",method:"get",params:e})}function x(e,t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/"+e+"/tasks/scores",method:"post",data:t})}function $(e,t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/"+e+"/tasks/scores",method:"patch",data:t})}function C(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event_tasks/batch_destroy",method:"delete",data:e})}
//! 解题赛 创建竞赛  编辑题目回显
function M(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event_tasks/"+e,method:"get"})}function T(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event_tasks",method:"post",data:e})}
//! 解题赛 创建竞赛  保存编辑题目
function q(e,t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event_tasks/"+e,method:"patch",data:t})}function A(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/task_categorys",method:"get"})}function L(e,t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event_tasks/"+e,method:"delete",data:{index:t}})}function S(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event_tasks/batch_public",method:"patch",data:e})}function E(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/instances",method:"get",params:e})}function U(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/notices",method:"get",params:e})}function N(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/task/notices",method:"get",params:e})}function z(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/notices",method:"post",data:e})}function B(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/task/notices",method:"post",data:e})}function P(e,t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/notices",method:"patch",params:e,data:t})}function I(e,t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/task/notices",method:"patch",params:e,data:t})}function J(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/notices",method:"delete",data:e})}function R(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/task/notices",method:"delete",data:e})}function W(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/notices/top",method:"patch",data:e})}function D(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/task/notices/top",method:"patch",data:e})}function Q(e,t){return Object(n.a)({method:"get",url:"/api/v1/jeopardy/admin/event/"+e+"/networks",params:t})}function Z(e){return Object(n.a)({method:"get",url:"/api/v1/jeopardy/admin/event/"+e+"/groups"})}function H(e,t){return Object(n.a)({method:"post",url:"/api/v1/jeopardy/admin/event/"+e+"/networks",data:t})}function Y(e){return Object(n.a)({method:"get",url:"/api/v1/jeopardy/admin/event/check_network/"+e})}function G(e,t,r){return Object(n.a)({method:"get",url:"/api/v1/jeopardy/admin/event/"+e+"/networks/"+t,data:r})}function V(e,t,r){return Object(n.a)({method:"patch",url:"/api/v1/jeopardy/admin/event/"+e+"/networks/"+t,data:r})}function X(e,t){return Object(n.a)({method:"delete",url:"/api/v1/jeopardy/admin/event/"+e+"/networks",data:t})}function K(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/players",method:"get",params:e})}function ee(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/player/bans",method:"PATCH",data:e})}function te(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/player/score",method:"get",params:e})}function re(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/player/score",method:"patch",data:e})}function ne(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/player/reward",method:"get",params:e})}function ae(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/player/reward",method:"post",data:e})}function ie(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/scores",method:"get",params:e})}function oe(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/score/player",method:"get",params:e})}function ue(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/view",method:"get",params:e})}function le(e,t){return Object(n.a)({url:"/api/v1/jeopardy/admin/event/view",method:"patch",params:e,data:t})}function ce(e){return Object(n.a)({method:"patch",url:"/api/v1/jeopardy/admin/event/init_scene",params:e})}function se(e){return Object(n.a)({method:"get",url:"/api/v1/jeopardy/admin/event/data/export",params:e,responseType:"blob"})}function de(e){return Object(n.a)({method:"get",url:"/api/v1/jeopardy/admin/event/wps/export",params:e,responseType:"blob"})}},Ibrk:function(e,t,r){"use strict";r.d(t,"e",function(){return a}),r.d(t,"g",function(){return i}),r.d(t,"i",function(){return o}),r.d(t,"f",function(){return u}),r.d(t,"a",function(){return l}),r.d(t,"b",function(){return c}),r.d(t,"d",function(){return s}),r.d(t,"c",function(){return d}),r.d(t,"h",function(){return m});var n=r("t3Un");function a(e){return Object(n.a)({url:"/api/v1/common/admin/challenge/tags/",method:"get",params:e})}function i(){return Object(n.a)({url:"/api/v1/common/admin/flavors",method:"get",params:{per_page:9999}})}function o(){return Object(n.a)({url:"/api/v1/common/admin/images",method:"get"})}function u(e){return Object(n.a)({url:"/api/v1/common/admin/challenge/categorys/",method:"get",params:e})}function l(e){return Object(n.a)({url:"/api/v1/common/admin/challenge/tags/",method:"post",data:e})}function c(e){return Object(n.a)({url:"/api/v1/common/admin/challenge/categorys/",method:"post",data:e})}function s(e){return Object(n.a)({url:"/api/v1/common/admin/challenge/categorys/",method:"delete",data:e})}function d(e){return Object(n.a)({url:"/api/v1/common/admin/challenge/tags/",method:"delete",data:e})}function m(e){return Object(n.a)({url:"/api/v1/common/admin/flavors",method:"get",params:e})}},"MD+q":function(e,t,r){"use strict";r.d(t,"e",function(){return a}),r.d(t,"d",function(){return i}),r.d(t,"f",function(){return o}),r.d(t,"k",function(){return u}),r.d(t,"i",function(){return l}),r.d(t,"g",function(){return c}),r.d(t,"h",function(){return s}),r.d(t,"j",function(){return d}),r.d(t,"c",function(){return m}),r.d(t,"b",function(){return f}),r.d(t,"a",function(){return p});var n=r("t3Un");
//! 渗透赛获取题目列表
function a(e){return Object(n.a)({url:"/api/v1/inf/admin/setting/challenge_store_list",method:"get",params:e})}
//! 渗透赛获取题目标签options值
function i(e){return Object(n.a)({url:"/api/v1/inf/admin/setting/challenge_store_flag",method:"get",params:e})}function o(e){return Object(n.a)({url:"/api/v1/inf/admin/setting/challenge_store",method:"post",data:e})}function u(e){return Object(n.a)({url:"/api/v1/inf/admin/setting/challenge_store_list",method:"post",data:e})}
//! 获取题目类型
function l(){return Object(n.a)({url:"/api/v1/inf/admin/setting/categorys",method:"get"})}
//! 获取镜像列表
function c(e){return Object(n.a)({url:"/api/v1/common/admin/images",method:"get",params:e})}function s(e){return Object(n.a)({url:"/api/v1/inf/admin/setting/challenge_store",method:"get",params:e})}function d(e,t){return Object(n.a)({url:"/api/v1/inf/admin/setting/challenge_store",method:"patch",params:e,data:t})}function m(e){return Object(n.a)({url:"/api/v1/inf/admin/setting/challenge_store/test_env/"+e,method:"post"})}function f(e){return Object(n.a)({url:"/api/v1/inf/admin/setting/challenge_store/test_env/"+e,method:"delete"})}function p(e){return Object(n.a)({url:"/api/v1/inf/admin/setting/challenge_store/test_env/"+e,method:"get"})}},OrAp:function(e,t,r){},Uyhf:function(e,t,r){"use strict";r.d(t,"i",function(){return a}),r.d(t,"b",function(){return i}),r.d(t,"n",function(){return o}),r.d(t,"h",function(){return u}),r.d(t,"k",function(){return l}),r.d(t,"e",function(){return c}),r.d(t,"g",function(){return s}),r.d(t,"a",function(){return d}),r.d(t,"c",function(){return m}),r.d(t,"o",function(){return f}),r.d(t,"j",function(){return p}),r.d(t,"d",function(){return g}),r.d(t,"f",function(){return h}),r.d(t,"m",function(){return v}),r.d(t,"l",function(){return _});var n=r("t3Un");function a(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/tasks/",method:"get",params:e})}function i(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/tasks/batch_destroy/",method:"delete",data:e})}function o(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/container/sharing/",method:"patch",data:e})}function u(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/task/flags/",method:"get",params:e})}function l(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/categorys/",method:"get",params:e})}function c(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/categorys/",method:"post",data:e})}function s(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/categorys/batch_destroy/",method:"delete",data:e})}function d(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/tasks/",method:"post",data:e})}function m(e,t){return Object(n.a)({url:"/api/v1/jeopardy/admin/tasks/"+e,method:"patch",data:t})}function f(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/tasks/"+e,method:"get"})}function p(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/tags/",method:"get",params:e})}function g(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/tags/",method:"post",data:e})}function h(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/tags/batch_destroy/",method:"delete",data:e})}function v(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/task_test",method:"post",data:e})}function _(e){return Object(n.a)({url:"/api/v1/jeopardy/admin/task_test",method:"get",params:e})}},Y5bG:function(e,t,r){"use strict";r.d(t,"a",function(){return a}),Math.easeInOutQuad=function(e,t,r,n){return(e/=n/2)<1?r/2*e*e+t:-r/2*(--e*(e-2)-1)+t};var n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};function a(e,t,r){var a=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,i=e-a,o=0;t=void 0===t?500:t;!function e(){o+=20,function(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}(Math.easeInOutQuad(o,a,i,t)),o<t?n(e):r&&"function"==typeof r&&r()}()}},ZySA:function(e,t,r){"use strict";var n=r("6ZY3"),a=r.n(n),i=(r("jUE0"),{bind:function(e,t){e.addEventListener("click",function(r){var n=a()({},t.value),i=a()({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},n),o=i.ele;if(o){o.style.position="relative",o.style.overflow="hidden";var u=o.getBoundingClientRect(),l=o.querySelector(".waves-ripple");switch(l?l.className="waves-ripple":((l=document.createElement("span")).className="waves-ripple",l.style.height=l.style.width=Math.max(u.width,u.height)+"px",o.appendChild(l)),i.type){case"center":l.style.top=u.height/2-l.offsetHeight/2+"px",l.style.left=u.width/2-l.offsetWidth/2+"px";break;default:l.style.top=(r.pageY-u.top-l.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",l.style.left=(r.pageX-u.left-l.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return l.style.backgroundColor=i.color,l.className="waves-ripple z-active",!1}},!1)}}),o=function(e){e.directive("waves",i)};window.Vue&&(window.waves=i,Vue.use(o)),i.install=o;t.a=i},a16A:function(e,t,r){"use strict";var n=r("OrAp");r.n(n).a},aFNf:function(e,t,r){var n=r("c01Q"),a=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return a.stringify.apply(a,arguments)}},aFx9:function(e,t,r){"use strict";r.d(t,"i",function(){return a}),r.d(t,"a",function(){return i}),r.d(t,"l",function(){return o}),r.d(t,"d",function(){return u}),r.d(t,"e",function(){return l}),r.d(t,"j",function(){return c}),r.d(t,"n",function(){return s}),r.d(t,"c",function(){return d}),r.d(t,"h",function(){return m}),r.d(t,"g",function(){return f}),r.d(t,"k",function(){return p}),r.d(t,"b",function(){return g}),r.d(t,"f",function(){return h}),r.d(t,"m",function(){return v});var n=r("t3Un");function a(e){return Object(n.a)({url:"/api/v1/common/admin/compose_file",method:"get",params:e})}function i(e){return Object(n.a)({url:"/api/v1/common/admin/compose_file",method:"post",data:e})}function o(e){return Object(n.a)({url:"/api/v1/common/admin/compose_file",method:"delete",data:e})}function u(e){return Object(n.a)({url:"/api/v1/common/admin/compose_file/"+e,method:"get"})}function l(e,t){return Object(n.a)({url:"/api/v1/common/admin/compose_file/"+e,method:"patch",data:t})}function c(e){return Object(n.a)({url:"/api/v1/common/admin/entity/group",method:"get",params:e})}function s(e){return Object(n.a)({url:"/api/v1/common/admin/entity/group",method:"delete",data:e})}function d(e){return Object(n.a)({url:"/api/v1/common/admin/entity/group",method:"post",data:e})}function m(e){return Object(n.a)({url:"/api/v1/common/admin/entity/group/"+e,method:"get"})}function f(e,t){return Object(n.a)({url:"/api/v1/common/admin/entity/group/"+e,method:"patch",data:t})}function p(e){return Object(n.a)({url:"/api/v1/common/admin/entity",method:"get",params:e})}function g(e){return Object(n.a)({url:"/api/v1/common/admin/entity",method:"post",data:e})}function h(e,t){return Object(n.a)({url:"/api/v1/common/admin/entity/"+e,method:"patch",data:t})}function v(e){return Object(n.a)({url:"/api/v1/common/admin/entity",method:"delete",data:e})}},cS3w:function(e,t,r){"use strict";r.r(t);var n=r("omC7"),a=r.n(n),i=r("uTCP"),o=r("tBjE"),u=r("Uyhf"),l=r("CquO"),c=r("aFx9"),s=(r("MD+q"),r("Ibrk")),d=r("ZySA"),m=r("Mz3J"),f={components:{QuillEditor:i.a,Pagination:m.a,UploadFile:o.a},directives:{waves:d.a},data:function(){return{task_id:this.$route.query.task_id,showEn:!0,flagType:"1",subType:[],subTag:[],difficulty:[{name:"初级",id:0},{name:"中级",id:1},{name:"高级",id:2}],enclosureAry:[1],flagAry:[{flag:""}],listSelect:{limit:10,offset:1},is_base:"",search:"",os_type:"",is_image_type:"",image_type_list:[{label:"kvm",value:"kvm"},{label:"docker",value:"docker"},{label:"docker_compose",value:"docker_compose"}],os_type_list:[{label:"windows",value:"windows"},{label:"linux",value:"linux"}],flavorList:[],allMirrorList:[],selectMirrorList:[],selectMirror:!1,ruleForm:{image_type:"kvm",image_uuid:"",image_name:"",source_port:80,flavor_uuid:"",flavor_name:"",flavor_message:"",docker_compose_name:"",docker_compose_id:"",file:[""],answer:[""],flag:[""],official_writeup:"",title:"",category_id:"",tag_id:"",weight:0,content:"",content_html:"",content_en:"",content_en_html:"",is_dynamic_flag:"",protocol:"",push_flag_script:"",public:1},rules:{title:[{required:!0,message:"请输入题目名称",trigger:"blur"},{min:3,max:50,message:"长度在 3 到 50 个字",trigger:"blur"}],category_id:[{type:"number",required:!0,message:"请选择题目类型",trigger:"change"}],tag_id:[{type:"number",required:!0,message:"请选择题目类型",trigger:"change"}],image_type:[{required:!0,message:"请选择镜像类型",trigger:"change"}],flavor_uuid:[{required:!0,message:"请选择实例模板",trigger:"change"}],is_dynamic_flag:[{required:!0,message:"请选择Flag类型",trigger:"change"}]},isConfig:!1,configlist:[],selectConfigList:[],total:0,configParams:{limit:10,offset:1}}},created:function(){this.getSubType(),this.getFlavorInfo(),this.task_id&&this.subInfo()},beforeDestroy:function(){this.$store.dispatch("changeMatchName","")},methods:{getPageList:function(e){this.listSelect.limit=e.limit,this.listSelect.offset=e.page,this.getMirrorList()},confirmSelect:function(){this.isConfig=!1,this.selectConfigList.length&&(this.ruleForm.docker_compose_name=this.selectConfigList[0].name,this.ruleForm.docker_compose_id=this.selectConfigList[0].id)},changeSelectedMirrorList:function(e){e.length>1&&(this.$refs.MirrorListTable.clearSelection(),this.$refs.MirrorListTable.toggleRowSelection(e[1]),e.shift()),this.selectConfigList=e},getConfigList:function(){var e=this;Object(c.i)(this.configParams).then(function(t){e.configlist=t.data.row,e.total=t.data.total,e.isConfig=!0})},flavorSelectedChange:function(e){var t=this;this.flavorList.forEach(function(r){r.uuid==e&&(t.ruleForm.flavor_name=r.name,t.ruleForm.flavor_message=a()(r.msg))})},getFlavorInfo:function(){var e=this;Object(s.h)({page:1,per_page:999}).then(function(t){e.flavorList=t.data.data})},goBack:function(){this.$router.push({path:"/competition/jeopardy/operation/index",query:{id:this.$route.query.id,hash:this.$route.query.hash,activeName:"topic"}})},subInfo:function(){var e=this;Object(l.bb)(this.task_id).then(function(t){for(var r in e.$store.dispatch("changeMatchName",t.data.title),t.data.image_uuid&&t.data.image_name&&(e.selectMirrorList=[{name:t.data.image_name,uuid:t.data.image_uuid}]),e.ruleForm)e.ruleForm[r]=t.data[r];e.ruleForm.flag=t.data.answer})},handleType:function(e){0===e?(this.ruleForm.file=[""],this.ruleForm.flag=[""]):1===e?(this.ruleForm.file=[""],this.ruleForm.flag=[]):(this.ruleForm.file=[""],this.ruleForm.flag=[""],this.ruleForm.image_type="",this.ruleForm.image_uuid="",this.ruleForm.image_name="",this.ruleForm.flavor_uuid="",this.ruleForm.flavor_name="",this.ruleForm.flavor_message="",this.ruleForm.source_port="")},getSubType:function(){var e=this;Object(u.k)({type:5}).then(function(t){e.subType=t.data.rows}),Object(u.j)().then(function(t){e.subTag=t.data.rows})},onSubmit:function(){var e=this;if(""!==this.ruleForm.flag[0]||1==this.ruleForm.is_dynamic_flag){if(2===this.ruleForm.is_dynamic_flag){for(var t=0;t<this.ruleForm.flag.length;t++)if(this.ruleForm.flag[t]&&!this.ruleForm.file[t])return void this.$message.error("附件必须和flag对应");for(var r=0;r<this.ruleForm.file.length;r++)if(this.ruleForm.file[r]&&1!==this.ruleForm.is_dynamic_flag&&!this.ruleForm.flag[r])return void this.$message.error("附件必须和flag对应")}if(1!=this.ruleForm.is_dynamic_flag||this.ruleForm.push_flag_script){var n=new FormData,a=this.ruleForm;for(var i in this.ruleForm.flag.forEach(function(e,t){n.append("flag"+t,e)}),this.ruleForm.file.forEach(function(t,r){n.append("file"+r,e.ruleForm.file[r])}),a)"file"!==i&&"flag"!==i&&n.append(i,a[i]);this.task_id?Object(l.o)(this.task_id,n).then(function(t){t.data.success&&(e.$message.success("操作成功"),e.$router.push({path:"/competition/jeopardy/operation/index",query:{id:e.$route.query.id,hash:e.$route.query.hash,activeName:"topic"}}))}):Object(l.h)(n).then(function(t){t.data.success&&(e.$message.success("操作成功"),e.$router.push({path:"/itemBank/jeopardy/index",query:{id:t.data.event_id,activeName:"topic"}}))})}else this.$message.error("请上传动态flag脚本文件")}else this.$message.error("请至少输入一个flag")},addEnc:function(){this.enclosureAry.push(1),this.flagAry.push({flag:""})},removeEnc:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){1==t.enclosureAry[e]&&(t.$refs["enclosure"+e][0].value="",t.enclosureAry.length>1&&(t.enclosureAry.splice(e,1),t.flagAry.splice(e,1))),1!=t.enclosureAry[e]&&Object(l.k)(t.task_id,e).then(function(r){2==t.ruleForm.is_dynamic_flag?(t.enclosureAry.splice(e,1),t.flagAry.splice(e,1),0==t.enclosureAry.length&&(t.enclosureAry.push(1),t.flagAry.push({flag:""}))):t.enclosureAry=[1]})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},submitForm:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return e.$message.error("请核验所输入的信息"),!1;e.onSubmit()})},resetForm:function(){this.$refs.ruleForm.resetFields()},changeImageType:function(){this.ruleForm.image_name="",this.ruleForm.image_uuid=""}}},p=(r("a16A"),r("goC5"),r("ZrdR")),g=Object(p.a)(f,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container create_topic jeopardy_task"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"200px"}},[r("el-form-item",{attrs:{label:"题目名称",prop:"title"}},[r("el-input",{attrs:{placeholder:"请输入题目名称",clearable:""},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title","string"==typeof t?t.trim():t)},expression:"ruleForm.title"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"题目类型",prop:"category_id"}},[r("el-select",{staticClass:"filter-item",attrs:{disabled:!!e.task_id,placeholder:"请选择题目类型",clearable:""},model:{value:e.ruleForm.category_id,callback:function(t){e.$set(e.ruleForm,"category_id",t)},expression:"ruleForm.category_id"}},e._l(e.subType,function(e,t){return r("el-option",{key:t,attrs:{label:e.cn_name,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"题目难度"}},[r("el-select",{staticClass:"filter-item",attrs:{disabled:!!e.task_id,placeholder:"请选择题目难度",clearable:""},model:{value:e.ruleForm.weight,callback:function(t){e.$set(e.ruleForm,"weight",t)},expression:"ruleForm.weight"}},e._l(e.difficulty,function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"题目标签",prop:"tag_id"}},[r("el-select",{staticClass:"filter-item",attrs:{disabled:!!e.task_id,placeholder:"请选择题目标签",clearable:""},model:{value:e.ruleForm.tag_id,callback:function(t){e.$set(e.ruleForm,"tag_id",t)},expression:"ruleForm.tag_id"}},e._l(e.subTag,function(e,t){return r("el-option",{key:t,attrs:{label:e.cn_name,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"题目内容",prop:"resource"}},[r("quill-editor",{attrs:{holder:"请输入题目内容"},model:{value:e.ruleForm.content_html,callback:function(t){e.$set(e.ruleForm,"content_html",t)},expression:"ruleForm.content_html"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"题目内容英文"}},[r("quill-editor",{attrs:{holder:"请输入题目内容英文"},model:{value:e.ruleForm.content_en_html,callback:function(t){e.$set(e.ruleForm,"content_en_html",t)},expression:"ruleForm.content_en_html"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Flag类型",prop:"is_dynamic_flag"}},[r("el-select",{attrs:{disabled:!!e.task_id,placeholder:"请选择Flag类型",clearable:""},on:{change:e.handleType},model:{value:e.ruleForm.is_dynamic_flag,callback:function(t){e.$set(e.ruleForm,"is_dynamic_flag",t)},expression:"ruleForm.is_dynamic_flag"}},[r("el-option",{attrs:{value:0,label:"静态Flag"}}),e._v(" "),r("el-option",{attrs:{value:1,label:"动态Flag"}}),e._v(" "),r("el-option",{attrs:{value:2,label:"随机Flag"}})],1)],1),e._v(" "),"2"!=e.ruleForm.is_dynamic_flag?[r("el-form-item",{attrs:{label:"镜像类型",prop:"image_type"}},[r("el-select",{attrs:{disabled:!!e.task_id,placeholder:"请选择镜像类型"},on:{change:e.changeImageType},model:{value:e.ruleForm.image_type,callback:function(t){e.$set(e.ruleForm,"image_type",t)},expression:"ruleForm.image_type"}},[r("el-option",{attrs:{value:"kvm",label:"kvm"}}),e._v(" "),r("el-option",{attrs:{value:"docker",label:"docker"}}),e._v(" "),r("el-option",{attrs:{value:"docker-compose",label:"docker-compose"}})],1)],1)]:e._e(),e._v(" "),"2"!=e.ruleForm.is_dynamic_flag&&"docker-compose"==e.ruleForm.image_type?[r("el-form-item",{attrs:{label:"配置文件",required:""}},[r("el-col",{attrs:{span:2}},[r("el-button",{attrs:{disabled:!!e.task_id,type:"primary",size:"mini"},on:{click:e.getConfigList}},[e._v("选择\n          ")])],1),e._v(" "),r("el-col",{attrs:{span:18}},[e._v("\n          "+e._s(e.ruleForm.docker_compose_name)+"\n        ")])],1)]:e._e(),e._v(" "),"0"==e.ruleForm.is_dynamic_flag&&"kvm"!=e.ruleForm.image_type?[r("el-form-item",{attrs:{label:"题目端口"}},[r("el-input-number",{attrs:{disabled:!!e.task_id,min:0,max:65536,placeholder:"默认80端口"},model:{value:e.ruleForm.source_port,callback:function(t){e.$set(e.ruleForm,"source_port",t)},expression:"ruleForm.source_port"}})],1)]:e._e(),e._v(" "),"2"!=e.ruleForm.is_dynamic_flag&&"docker-compose"!=e.ruleForm.image_type?[r("el-form-item",{staticClass:"red_start",attrs:{label:"镜像选择"}},[r("el-button",{attrs:{disabled:!!e.task_id,type:"primary",size:"mini"},on:{click:function(t){e.selectMirror=!0}}},[e._v("选择\n        ")]),e._v("\n\n        "+e._s(e.ruleForm.image_name)+"\n      ")],1)]:e._e(),e._v(" "),"2"!=e.ruleForm.is_dynamic_flag?[r("el-form-item",{attrs:{prop:"flavor_uuid",label:"实例模板"}},[r("el-select",{staticClass:"filter-item",attrs:{disabled:!!e.task_id,placeholder:"请选择实例模板",clearable:""},on:{change:e.flavorSelectedChange},model:{value:e.ruleForm.flavor_uuid,callback:function(t){e.$set(e.ruleForm,"flavor_uuid",t)},expression:"ruleForm.flavor_uuid"}},e._l(e.flavorList,function(e){return r("el-option",{key:e.uuid,attrs:{label:e.name+" / "+e.vcpus+"核 / "+e.memory+"MB / "+e.disk+"GB",value:e.uuid}})}))],1)]:e._e(),e._v(" "),0==e.ruleForm.is_dynamic_flag?r("div",[r("el-form-item",{attrs:{label:"题目附件"}},[r("UploadFile",{attrs:{file:e.ruleForm.file[0],"file-type":["zip"],"file-size":20971520},on:{"update:file":function(t){e.$set(e.ruleForm.file,0,t)}}}),e._v("\n        （请上传zip格式文件，大小不超过20M）\n      ")],1),e._v(" "),r("el-form-item",{staticClass:"red_start",attrs:{label:"题目Flag"}},[r("el-input",{attrs:{disabled:!!e.task_id,type:"input",placeholder:"请输入题目Flag"},model:{value:e.ruleForm.flag[0],callback:function(t){e.$set(e.ruleForm.flag,0,"string"==typeof t?t.trim():t)},expression:"ruleForm.flag[0]"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"赛题WP"}},[r("UploadFile",{attrs:{file:e.ruleForm.official_writeup,"file-type":["docx","pdf","md"]},on:{"update:file":function(t){e.$set(e.ruleForm,"official_writeup",t)}}}),e._v("\n        （请上传pdf,docx,md格式文件,大小不超过10M）\n      ")],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v(" 保存 ")]),e._v(" "),r("el-button",{attrs:{type:"warning"},on:{click:e.goBack}},[e._v("返回")])],1)],1):e._e(),e._v(" "),1==e.ruleForm.is_dynamic_flag?r("div",[r("el-form-item",{attrs:{label:"题目附件"}},[r("UploadFile",{ref:"zipFile",attrs:{file:e.ruleForm.file[0],"file-type":["zip"],"file-size":20971520},on:{"update:file":function(t){e.$set(e.ruleForm.file,0,t)}}}),e._v("\n        （请上传zip格式文件，大小不超过20M）\n      ")],1),e._v(" "),r("el-form-item",{attrs:{label:"动态flag脚本文件",prop:"is_dynamic_flag"}},[e.task_id?r("span",[e._v(" "+e._s(e.ruleForm.push_flag_script)+" ")]):[r("UploadFile",{attrs:{file:e.ruleForm.push_flag_script,"file-type":["sh"]},on:{"update:file":function(t){e.$set(e.ruleForm,"push_flag_script",t)}}}),e._v("\n          （请上传sh格式文件，大小不超过10M）\n        ")]],2),e._v(" "),r("el-form-item",{attrs:{label:"赛题WP"}},[r("UploadFile",{attrs:{file:e.ruleForm.official_writeup,"file-type":["docx","pdf","md"]},on:{"update:file":function(t){e.$set(e.ruleForm,"official_writeup",t)}}}),e._v("\n        （请上传pdf,docx,md格式文件,大小不超过10M）\n      ")],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("保存")]),e._v(" "),r("el-button",{attrs:{type:"warning"},on:{click:e.goBack}},[e._v("返回")])],1)],1):e._e(),e._v(" "),2==e.ruleForm.is_dynamic_flag?r("div",[r("el-form-item",{attrs:{label:"题目附件",prop:"is_dynamic_flag",required:""}},[r("div",[r("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.addEnc}}),e._v("\n          （注：请上传zip格式文件，大小不超过20M）\n        ")],1),e._v(" "),r("div",{staticClass:"randomBox"},[r("div",{staticClass:"uploadBox"},e._l(e.ruleForm.flag,function(t,n){return r("div",{key:n,staticClass:"mb10",staticStyle:{height:"32px"}},[r("UploadFile",{attrs:{file:e.ruleForm.file[n],"file-type":["zip"],"file-size":20971520},on:{"update:file":function(t){e.$set(e.ruleForm.file,n,t)}}})],1)})),e._v(" "),r("div",{staticClass:"flagBox"},e._l(e.ruleForm.flag,function(t,n){return r("div",{key:n,staticClass:"mb10"},[e._v("\n              flag:\n              "),r("el-input",{attrs:{disabled:!!e.task_id,width:"300px"},model:{value:e.ruleForm.flag[n],callback:function(t){e.$set(e.ruleForm.flag,n,"string"==typeof t?t.trim():t)},expression:"ruleForm.flag[index]"}}),e._v(" "),e.ruleForm.flag.length>1?r("el-button",{attrs:{type:"danger",icon:"el-icon-close"},on:{click:function(t){e.removeEnc(n)}}}):e._e()],1)}))])]),e._v(" "),r("el-form-item",{attrs:{label:"赛题WP"}},[r("UploadFile",{attrs:{file:e.ruleForm.official_writeup,"file-type":["docx","pdf","md"]},on:{"update:file":function(t){e.$set(e.ruleForm,"official_writeup",t)}}}),e._v("\n        （请上传pdf,docx,md格式文件,大小不超过10M）\n      ")],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("保存")]),e._v(" "),r("el-button",{attrs:{type:"warning"},on:{click:e.goBack}},[e._v("返回")])],1)],1):e._e()],2),e._v(" "),e.selectMirror?r("ChoiceImage",{attrs:{image_name:e.ruleForm.image_name,image_uuid:e.ruleForm.image_uuid,type:e.ruleForm.image_type,"select-mirror":e.selectMirror},on:{"update:image_name":function(t){e.$set(e.ruleForm,"image_name",t)},"update:image_uuid":function(t){e.$set(e.ruleForm,"image_uuid",t)},"update:selectMirror":function(t){e.selectMirror=t}}}):e._e(),e._v(" "),r("el-dialog",{attrs:{visible:e.isConfig,title:"配置文件选择"},on:{"update:visible":function(t){e.isConfig=t}}},[r("el-table",{ref:"MirrorListTable",attrs:{data:e.configlist,border:"","tooltip-effect":"dark"},on:{"selection-change":e.changeSelectedMirrorList}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),r("el-table-column",{attrs:{type:"index",width:"55",label:"序号"}}),e._v(" "),r("el-table-column",{attrs:{label:"配置名称",align:"center",prop:"name"}}),e._v(" "),r("el-table-column",{attrs:{prop:"remark",align:"center",label:"备注","show-overflow-tooltip":""}})],1),e._v(" "),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.configParams.offset,limit:e.configParams.limit},on:{"update:page":function(t){e.$set(e.configParams,"offset",t)},"update:limit":function(t){e.$set(e.configParams,"limit",t)},pagination:e.getConfigList}}),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.confirmSelect}},[e._v("确 定")]),e._v(" "),r("el-button",{on:{click:function(t){e.isConfig=!1}}},[e._v("取 消")])],1)],1)],1)},[],!1,null,null,null);g.options.__file="index.vue";t.default=g.exports},goC5:function(e,t,r){"use strict";var n=r("jx50");r.n(n).a},jUE0:function(e,t,r){},jx50:function(e,t,r){},omC7:function(e,t,r){e.exports={default:r("aFNf"),__esModule:!0}}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-19eaa830"],{"07ad":function(t,e,n){},"0e8c":function(t,e,n){t.exports=n.p+"inf-static/img/context_gif.6a6f65bb.gif"},"1bee":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var a=function(t){var e,n,a,i,r=parseInt(t/864e5),s=parseInt(t%864e5/36e5),o=parseInt(t%36e5/6e4),c=t%6e4/1e3;localStorage.lang&&"zh"!=localStorage.lang?(e="Day",n=":",a=":",i=""):(e="天",n="时",a="分",i="秒");var l="",g="",d="";0!==r&&(l=r+'<span class="time_margin">'+e+"</span>"),g=0==s?0==r?"":'0<span class="time_margin">'+n+"</span>":s+'<span class="time_margin">'+n+"</span>",d=0==o?0==r&&0==s?"":'0<span class="time_margin">'+a+"</span>":o+'<span class="time_margin">'+a+"</span>";var u=c+'<span class="time_margin">'+i+"</span>";return l+g+d+u}},"1c26":function(t,e,n){t.exports=n.p+"inf-static/img/answered.6a7d7610.png"},2934:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n("b775");function i(t,e){return Object(a["a"])({method:"get",url:t,params:e,responseType:"blob"})}},4424:function(t,e,n){},"58c4":function(t,e,n){"use strict";var a=n("07ad"),i=n.n(a);i.a},"5f36":function(t,e,n){t.exports=n.p+"inf-static/img/entity.49d0c99c.png"},"6e56":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"task_box"},[a("ClickHere"),a("PlayerInfo"),1!==t.match.process?a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.hide,expression:"!hide"}],staticClass:"mask"}),a("div",{staticClass:"description_box"},[a("div",{staticClass:"description"},[a("div",{staticClass:"title"},[t._v(" "+t._s(t.$t("inf.sence_description"))+" ")]),a("div",{class:{content_hide:t.hide},domProps:{innerHTML:t._s(t.content)}}),a("div",{staticClass:"open",on:{click:function(e){t.hide=!t.hide}}},[t._v(" "+t._s(t.hide?t.$t("inf.open"):t.$t("inf.close"))+" ")])])]),t.topoShow?a("topo",{staticClass:"topo",attrs:{scene_type:t.scene_type,container:t.container,bar_list:t.bar_list},on:{handleTask:t.handleTask}}):t._e()],1):a("div",{staticStyle:{"text-align":"center"}},[a("img",{attrs:{src:n("0e8c"),alt:""}})]),a("el-dialog",{attrs:{visible:t.isFlag,title:t.$t("inf.Topic_information"),center:""},on:{"update:visible":function(e){t.isFlag=e},close:t.closed}},[a("el-form",{ref:"ruleForm",attrs:{model:t.form,rules:t.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:t.$t("inf.Topic_name"),prop:"name"}},[t._v(" "+t._s(t.node.name)+" ")]),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.node.link,expression:"node.link"}],attrs:{label:t.$t("inf.Topic_link")}},[t._v(" "+t._s(t.node.link)+" ")]),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.file,expression:"file"}],attrs:{label:t.$t("question.attDescription")}},[a("a",{attrs:{href:t.file,download:""}},[a("el-button",{attrs:{type:"primary",size:"mini"}},[t._v(t._s(t.$t("question.attachment")))])],1)]),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.node.ip,expression:"node.ip"}],attrs:{label:"IP"}},[t._v(" "+t._s(t.node.ip)+" ")]),t.isReport?a("el-form-item",{attrs:{label:"FLAG",prop:"flag"}},[a("el-input",{model:{value:t.form.flag,callback:function(e){t.$set(t.form,"flag",e)},expression:"form.flag"}})],1):a("el-form-item",{attrs:{label:t.$t("inf.upload_report")}},[a("UploadFile",{attrs:{file:t.report,"file-type":["pdf","doc","docx"],"file-size":20971520},on:{"update:file":function(e){t.report=e}}}),t._v(" 仅可上传pdf、doc、docx，大小限制为20MB。 ")],1)],1),t._l(t.tips,(function(e,i){return a("div",{key:e.notice+i,staticClass:"new-hint-b"},[a("img",{attrs:{src:n("d245"),alt:""}}),a("span",[t._v(t._s(e.notice))])])})),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v(t._s(t.$t("question.submit")))])],1)],2)],1)},i=[],r=(n("2eeb"),n("e18c"),n("1c2e"),n("e793")),s=n("52c1"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"topo_box",attrs:{id:"DragTopo"}},[t.show_bar?n("div",{staticClass:"bar"},[n("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-openeds":["0","1"]}},t._l(t.bar_list.bar,(function(e,a){return n("el-submenu",{key:a+e.name,attrs:{index:a+""}},[n("template",{slot:"title"},[n("span",[t._v(t._s(e.name))])]),t._l(e.list,(function(e,i){return n("el-menu-item",{key:a+"-"+i,attrs:{index:a+"-"+i,title:e.name}},[n("div",{attrs:{draggable:""},on:{dragstart:function(n){return t.drag(n,e.type)}}},[n("img",{staticClass:"topo_icon",attrs:{src:t.bar_list.img[e.type]}}),n("br"),n("span",[t._v(t._s(e.name))])])])}))],2)})),1)],1):t._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isRemove,expression:"isRemove"}],staticClass:"remove",on:{drop:function(e){return t.dropRemove(e)},dragover:function(t){t.preventDefault()}}},[n("i",{staticClass:"el-icon-delete-solid"})]),n("div",{ref:"canvas_box",staticClass:"canvas_box"},[n("div",{staticClass:"canvas",class:"topo"+t.scene_type},t._l(t.container,(function(e,a,i){return i<=t.scene_type?n("div",{key:i,class:a},[n("div",{staticClass:"title"},[t._v(" "+t._s(e.network[0].name)+" ")]),n("div",{staticClass:"node_box",class:{showBorder:e.showBorder},attrs:{type:a},on:{dragenter:t.enter,dragleave:t.leave,drop:function(n){return t.drop(n,e)},dragover:function(t){t.preventDefault()}}},[n("div",{staticClass:"node_content",class:{pon_evt:t.pon_evt}},[t._l(e.instance,(function(i,r){return n("div",{key:r,staticClass:"img_box"},[n("el-tooltip",{attrs:{content:i.name,placement:"top",effect:"light"}},[n("img",{attrs:{src:t.bar_list.img[i.type],draggable:t.show_bar},on:{dragstart:function(e){return t.dragRemove(e,r,a)},dragend:function(e){return t.dragendRemoce(e,r)},click:function(n){return t.showTask(i,e.network[0],a)}}})])],1)})),t._l(e.entity,(function(i,r){return n("div",{key:i.uuid,staticClass:"img_box"},[n("el-tooltip",{attrs:{content:i.name,placement:"top",effect:"light"}},[n("img",{attrs:{src:t.bar_list.img[i.type],draggable:t.show_bar},on:{dragstart:function(e){return t.dragRemove(e,r,a)},dragend:function(e){return t.dragendRemoce(e,r)},click:function(n){return t.showTask(i,e.network[0],a)}}})])],1)}))],2)]),t.show_bar?n("div",{staticClass:"net",on:{click:function(n){return t.handleNet(e.network[0],a)}}}):t._e()]):t._e()})),0)])])},c=[],l=(n("513c"),{name:"Index",components:{},props:{show_bar:{type:Boolean,default:!1},scene_type:{type:Number,default:3},container:{type:Object,default:function(){return{dmz:{entity:[],network:[{mask:"255.255.255.0",name:"外网（DMZ）",gateway:"10.10.20.1",last_ip:"10.10.20.100",first_ip:"10.10.20.10"}],instance:[],showBorder:!1},internal_network:{entity:[],network:[{mask:"255.255.255.0",name:"内网（服务器区）",gateway:"192.168.10.1",last_ip:"192.168.10.200",first_ip:"192.168.10.10"}],instance:[],showBorder:!1},core_network:{entity:[],network:[{mask:"255.255.255.0",name:"核心内网（核心数据）",gateway:"192.168.99.1",last_ip:"192.168.99.200",first_ip:"192.168.99.10"}],instance:[],showBorder:!1},office_network:{entity:[],network:[{mask:"255.255.255.0",name:"办公网",gateway:"10.10.4.1",last_ip:"10.10.4.100",first_ip:"10.10.4.10"}],instance:[],showBorder:!1}}}},bar_list:{type:Object,default:function(){return{bar:[{name:"虚拟设备",list:[{name:"虚拟机",type:"kvm"}]}],img:{kvm:n("1c26")}}}}},data:function(){return{pon_evt:!1,isNode:!1,isRemove:!1}},mounted:function(){},methods:{handleNet:function(t,e){this.$emit("handleNet",t,e)},showTask:function(t,e,n){this.$emit("handleTask",t,e,n)},drag:function(t,e){this.isNode=!0,t.dataTransfer.setData("type",e)},enter:function(t){this.isNode&&(this.pon_evt=!0,this.container[t.target.getAttribute("type")].showBorder=!0)},leave:function(t){this.clearAll(t)},drop:function(t,e){var n=t.dataTransfer.getData("type");this.isNode&&(this.clearAll(t),this.$emit("handleDrag",t,e,n))},clearAll:function(t){this.pon_evt=!1;var e=t.target.getAttribute("type");e&&(this.container[e].showBorder=!1)},dragRemove:function(t,e,n){this.isNode=!1,this.isRemove=!0,t.dataTransfer.setData("index",""+e),t.dataTransfer.setData("type",n)},dragendRemoce:function(t){this.isRemove=!1},dropRemove:function(t){var e=this,n=t.dataTransfer.getData("index"),a=t.dataTransfer.getData("type");this.$confirm("确定要删除吗？, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$emit("handleRemove",a,n)})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))}}}),g=l,d=(n("58c4"),n("b5bf"),n("9ca4")),u=Object(d["a"])(g,o,c,!1,null,"0aa6c193",null),f=u.exports,m=n("b418"),p=n("242e"),h=n("29bc"),z=n("9e0c"),v={name:"NoticeList",components:{topo:f,UploadFile:m["a"],PlayerInfo:p["a"],ClickHere:h["a"]},data:function(){return{topo:[],hide:!0,id:this.$route.query.id,hash:this.$route.query.hash,content:"",scene_type:3,container:{dmz:{},internal_network:{},core_network:{},office_network:{}},bar_list:{bar:[{name:"虚拟设备",list:[{name:"虚拟机",type:"instance"}]},{name:"实体设备",list:[{name:"设备",type:"entity"}]}],img:{instance:n("1c26"),entity:n("5f36")}},node:{},tips:[],file:"",isFlag:!1,isReport:!1,form:{flag:""},report:"",rules:{flag:[{required:!0,message:this.$t("inf.fell_flag"),trigger:"blur"},{min:1,max:100,message:this.$t("inf.lang_err100"),trigger:"blur"}]},topoShow:!1}},computed:Object(r["a"])({},Object(s["c"])(["config","match"])),created:function(){this.getTask()},methods:{closed:function(){this.form.flag="",this.report="",this.$refs.ruleForm&&this.$refs.ruleForm.clearValidate()},handleTask:function(t,e,n){var a=this;this.node=t;var i={event_id:this.id,task_id:t.task_uuid};Object(z["g"])(i).then((function(t){a.tips=t.data})),Object(z["f"])(i).then((function(t){a.file=t.data.attachment,a.isReport=t.data.entity_type,a.isFlag=!0}))},submit:function(){var t=this;this.$refs["ruleForm"].validate((function(e){if(!e)return console.log("error submit!!"),!1;if(t.isReport)t.form.challenge_hash=t.node.task_uuid,t.form.event_hash=t.hash,Object(z["k"])(t.form).then((function(e){e.data.success&&t.$notify.success({title:t.$t("dialog_list.tips"),message:t.$t("api_message.submit_success")})}));else{if(!t.report)return void t.$notify.error({customClass:"error_notify",title:t.$t("public.error"),message:t.$t("inf.upload_report_please")});var n={event_id:t.id,challenge_id:t.node.task_uuid},a=new FormData;a.append("file",t.report),Object(z["l"])(n,a).then((function(e){e.data.success&&t.$notify.success({title:t.$t("dialog_list.tips"),message:t.$t("api_message.submit_success")})}))}}))},getTask:function(){var t=this;Object(z["e"])({event_id:this.id}).then((function(e){var n=e.data;if(t.content=n.scene_description_html,t.scene_type=n.scene_type,n.scene_data){for(var a in t.container)t.container[a]=n.scene_data[a];t.topoShow=!0}}))},getMac:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){var t=this;getMac({event_id:this.id}).then((function(e){var n=e.data;n.mac.length>0?t.mac_addr.mac_addr=n.mac_addr.map((function(t){var e={};return e.value=t,e})):(t.isMac=!0,t.mac_addr={mac_addr:[{value:""}]})}))}))}},V=v,_=(n("7ae0"),Object(d["a"])(V,a,i,!1,null,"6ffe55f0",null));e["default"]=_.exports},"7ae0":function(t,e,n){"use strict";var a=n("4424"),i=n.n(a);i.a},"989b":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n("b4fb"),n("ecb4"),n("9302"),n("e18c"),n("e35a"),n("96db"),n("5e9f"),n("0d7a"),n("af86"),n("f1a9");var a=n("b705"),i=n("9923");function r(t,e){var n=document.createElement("a");n.download=e||(new Date).getTime(),n.style.display="none",n.href=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}function s(t,e){var n=t.headers["content-disposition"].split("="),a=n[n.length-1].replace(/"/g,"").replace(/UTF-8''/g,"");a=decodeURI(a);var i=URL.createObjectURL(t.data);r(i,e||a),URL.revokeObjectURL(i)}function o(t,e){var n=t.data,r=n.type.split("/"),o=r[r.length-1];if("json"===o){var c=new FileReader;c.readAsText(n),c.onload=function(){var n=JSON.parse(this.result);if(!1===n.success){var r=n.message||n.message_zh;a["Notification"].error({customClass:"error_notify",title:i["a"].tc("public.error"),message:i["a"].tc("api_message."+r)})}else s(t,e)}}else s(t,e)}},b5bf:function(t,e,n){"use strict";var a=n("d949"),i=n.n(a);i.a},c5c2:function(t,e,n){"use strict";n.d(e,"h",(function(){return i})),n.d(e,"d",(function(){return r})),n.d(e,"j",(function(){return s})),n.d(e,"i",(function(){return o})),n.d(e,"f",(function(){return c})),n.d(e,"g",(function(){return l})),n.d(e,"k",(function(){return g})),n.d(e,"l",(function(){return d})),n.d(e,"e",(function(){return u})),n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return p}));var a=n("b775");function i(t){return Object(a["a"])({url:"/api/v1/common/web/evts/list",method:"get",params:t})}function r(t,e,n,i){return Object(a["a"])({url:t,method:e,params:n,data:i})}function s(t){return Object(a["a"])({url:"/api/v1/common/web/tool_tag/",method:"get"})}function o(t){return Object(a["a"])({url:"/api/v1/common/web/tools/",method:"get",params:t})}function c(t){return Object(a["a"])({url:"/api/v1/common/web/tools/"+t,method:"get"})}function l(t){return Object(a["a"])({url:"/api/v1/common/web/evts/ranks",method:"get"})}function g(t){return Object(a["a"])({url:"/api/v1/common/web/onlook/look_match/look/",method:"get"})}function d(){return Object(a["a"])({url:"/api/v1/common/web/personal/center",method:"get"})}function u(t){return Object(a["a"])({url:"/api/v1/common/web/personal/info",method:"post",data:t})}function f(t){return Object(a["a"])({url:"/api/v1/common/web/personal/logo",method:"patch",data:t})}function m(t){return Object(a["a"])({url:"/api/v1/common/web/personal/paword",method:"patch",data:t})}function p(t){return Object(a["a"])({url:"/api/v1/jeopardy/web/sfzb",method:"get",params:t})}},d245:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAMAAAAM7l6QAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABg1BMVEUVz5j///8Vz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gVz5gAAABT68jmAAAAf3RSTlMAAK/SFAE6/jzaHgWWfxBPmRkVgUpTc1g0h7fz/caXTRoKftQ3DKTEMNawIeOzYjErUZ0J6+E+H7Yzq+YR6i3saW9yUgKPu3XRcSPAWayOB/gm6DhtjOBIzkYOnldHD4q/gCiuDWN3KWHIi9zn3vpo+8cY1cu5GyVBKjmCxbHY0ipm2gAAAAFiS0dEgGW9nmgAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAHdElNRQfhBQUJOhWpVxzYAAABY0lEQVQoz33TZ1MCMRAG4BxFEBULVmyUs6GIgChFRcSCBUHsvWEvCFYUff+6x3CeCW0/5GbyTLKbnT1CmJDJFRwdrCqBinKsgroMk0poCriqukY6rv2D2rp6kRsAnXRe1Eag6e/yZqBF+LS26ds7Oru6hW0DIDNKuU1mnvT0Qoy+fk47YGFLGxwCrMO2EbtDBdjzK3eOwjWWyz3uBjx57IVvQirNikmWpwAbVbkf0yLzgZngLJnDPP2wBYQ4jg8sBkm21CWyjBWaNVBxXFZIwBtedUaiWGPaEsM6t+ENb+b2jNkbaN7CNl3aDnZp3lNBQfM+HDQfwMU87BDRI4rlOGbbYsbJP58CWpbPgPO4yCbgIn9a7EDs8ooQw/UNcFs4TOo7oQ33D8LymCg2a8qE3g88JXWpkpPqUcdLTqrl+eXVnQzJ34qzTxym9+Ic+UjzfPozxZXK/ZXJfJf5S36Eq200/wL7JlQbtcjN5AAAAABJRU5ErkJggg=="},d949:function(t,e,n){}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53aac7ef"],{"09f4":function(t,e,a){"use strict";a.d(e,"a",(function(){return l})),Math.easeInOutQuad=function(t,e,a,n){return t/=n/2,t<1?a/2*t*t+e:(t--,-a/2*(t*(t-2)-1)+e)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function r(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function i(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(t,e,a){var l=i(),o=t-l,s=20,c=0;e="undefined"===typeof e?500:e;var u=function t(){c+=s;var i=Math.easeInOutQuad(c,l,o,e);r(i),c<e?n(t):a&&"function"===typeof a&&a()};u()}},"120c":function(t,e,a){"use strict";var n=a("4a9c"),r=a.n(n);r.a},"1bee":function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var n=function(t){var e,a,n,r,i=parseInt(t/864e5),l=parseInt(t%864e5/36e5),o=parseInt(t%36e5/6e4),s=t%6e4/1e3;localStorage.lang&&"zh"!=localStorage.lang?(e="Day",a=":",n=":",r=""):(e="天",a="时",n="分",r="秒");var c="",u="",d="";0!==i&&(c=i+'<span class="time_margin">'+e+"</span>"),u=0==l?0==i?"":'0<span class="time_margin">'+a+"</span>":l+'<span class="time_margin">'+a+"</span>",d=0==o?0==i&&0==l?"":'0<span class="time_margin">'+n+"</span>":o+'<span class="time_margin">'+n+"</span>";var p=s+'<span class="time_margin">'+r+"</span>";return c+u+d+p}},"1c2e":function(t,e,a){"use strict";var n=a("1944"),r=a("857c"),i=a("efe2"),l=a("99ad"),o="toString",s=RegExp.prototype,c=s[o],u=i((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),d=c.name!=o;(u||d)&&n(RegExp.prototype,o,(function(){var t=r(this),e=String(t.source),a=t.flags,n=String(void 0===a&&t instanceof RegExp&&!("flags"in s)?l.call(t):a);return"/"+e+"/"+n}),{unsafe:!0})},"224d":function(t,e,a){},"372f":function(t,e,a){"use strict";var n=a("224d"),r=a.n(n);r.a},"4a9c":function(t,e,a){},"73c3":function(t,e,a){var n=a("4fda");t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(n)},"84c2":function(t,e,a){var n=a("1e2c"),r=a("d890"),i=a("e8d6"),l=a("7063"),o=a("d910").f,s=a("b338").f,c=a("8a1c"),u=a("99ad"),d=a("22ef"),p=a("1944"),g=a("efe2"),f=a("b702").set,h=a("403f"),m=a("90fb"),_=m("match"),b=r.RegExp,v=b.prototype,y=/a/g,w=/a/g,S=new b(y)!==y,k=d.UNSUPPORTED_Y,x=n&&i("RegExp",!S||k||g((function(){return w[_]=!1,b(y)!=y||b(w)==w||"/a/i"!=b(y,"i")})));if(x){var D=function(t,e){var a,n=this instanceof D,r=c(t),i=void 0===e;if(!n&&r&&t.constructor===D&&i)return t;S?r&&!i&&(t=t.source):t instanceof D&&(i&&(e=u.call(t)),t=t.source),k&&(a=!!e&&e.indexOf("y")>-1,a&&(e=e.replace(/y/g,"")));var o=l(S?new b(t,e):b(t,e),n?this:v,D);return k&&a&&f(o,{sticky:a}),o},j=function(t){t in D||o(D,t,{configurable:!0,get:function(){return b[t]},set:function(e){b[t]=e}})},z=s(b),C=0;while(z.length>C)j(z[C++]);v.constructor=D,D.prototype=v,p(r,"RegExp",D)}h("RegExp")},"84fd":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.show_rank||t.matchData.public_rank?a("div",{staticClass:"app-container rank_box",staticStyle:{position:"relative"}},[a("countDown"),t._t("other_nav"),a("div",[a("el-table",{staticClass:"just_table",staticStyle:{width:"100%"},attrs:{data:t.rows},on:{"row-click":t.tableClick}},[a("el-table-column",[a("el-table-column",[a("el-table-column",{attrs:{"label-class-name":"th_del","class-name":"bor_l1",label:"Rank",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.$index+1+t.pager.pageSize*(t.pager.currentPage-1)))])]}}],null,!1,866975108)})],1)],1),a("el-table-column",[a("el-table-column",[a("el-table-column",{attrs:{"label-class-name":"th_del",label:"Name",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"user_name fcenter"},[""==e.row.obj_logo||null==e.row.obj_logo?a("span",{staticClass:"obj_logo def_logo"}):a("span",{staticClass:"obj_logo",style:"background:url("+e.row.obj_logo+");background-size:cover;"}),t.getStrNumber(e.row.obj_name,18,13)?a("span",{staticClass:"marque_box"},[a("span",[t._v(t._s(e.row.obj_name))])]):a("span",{staticClass:"marque_box"},[a("span",{staticClass:"marquee"},[t._v(t._s(e.row.obj_name)+" "+t._s(e.row.obj_name)+" "+t._s(e.row.obj_name)+" "+t._s(e.row.obj_name)+" ")])])])]}}],null,!1,1977130782)})],1)],1),a("el-table-column",[a("el-table-column",[a("el-table-column",{attrs:{"label-class-name":"th_del",prop:"sum_score",label:"Score","min-width":"50px"}})],1)],1),a("el-table-column",[a("el-table-column",[a("el-table-column",{attrs:{"label-class-name":"th_del",prop:"solved_count",label:"Solved","min-width":"100px"}})],1)],1),t._l(t.subject.rows[0],(function(e,n,r){return a("el-table-column",{key:r,attrs:{"label-class-name":"sub_type","class-name":"bor_l"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("span",{staticClass:"type_span",attrs:{title:n}},[t._v(t._s(n))])]}}],null,!0)},t._l(e,(function(e,n){return a("el-table-column",{key:n,attrs:{label:e.task.title,"label-class-name":"sub_name","class-name":0==n?"bor_l":""},scopedSlots:t._u([{key:"header",fn:function(n){return[a("span",{attrs:{title:e.task.title}},[t._v(t._s(e.task.title))])]}}],null,!0)},[a("el-table-column",{attrs:{"label-class-name":"score th_del",label:1==t.matchData.integral_mode?e.task.score.toString():e.dynamic_score.toString(),"class-name":0==n?"bor_l":"","min-width":"40px"},scopedSlots:t._u([{key:"default",fn:function(n){return[n.row[e.id]?a("div",{staticClass:"rank_logo fcenter"},[a("span",{staticClass:"rank_logo_pic pic_qi",class:{pic_1:1==n.row[e.id]["rank"],pic_2:2==n.row[e.id]["rank"],pic_3:3==n.row[e.id]["rank"]}})]):t._e()]}}],null,!0)})],1)})),1)}))],2),a("div",{staticStyle:{position:"relative"}},["zh"==t.$i18n.locale?a("div",{staticClass:"page_info"},[t._v(" 显示第 "+t._s((t.pager.currentPage-1)*t.pager.pageSize+1)+" 到第 "+t._s(t.pager.currentPage*t.pager.pageSize>t.pager.total?t.pager.total:t.pager.currentPage*t.pager.pageSize)+" 条记录，总共 "+t._s(t.pager.total)+" 条记录 ")]):a("div",{staticClass:"page_info"},[t._v(" Showing "+t._s((t.pager.currentPage-1)*t.pager.pageSize+1)+" through "+t._s(t.pager.currentPage*t.pager.pageSize>t.pager.total?t.pager.total:t.pager.currentPage*t.pager.pageSize)+" records for a total of "+t._s(t.pager.total)+" records. ")]),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.pager.total>t.pager.pageSize,expression:"pager.total>pager.pageSize"}],attrs:{total:t.pager.total,page:t.pager.currentPage,limit:t.pager.pageSize,layout:t.pager.layout},on:{"update:page":function(e){return t.$set(t.pager,"currentPage",e)},"update:limit":function(e){return t.$set(t.pager,"pageSize",e)},pagination:t.getTableData}})],1),a("el-dialog",{staticClass:"my-dialog",attrs:{title:t.$t("ranking.dialog.title_txt"),visible:t.dialogTableVisible,width:"995px"},on:{"update:visible":function(e){t.dialogTableVisible=e},close:t.closeDia}},[a("div",{staticClass:"clearfix",staticStyle:{border:"1px solid hsla(0,0%,100%,.1)",display:"flex","justify-content":"flex-start"}},[t.show_randar?a("div",{ref:"trend_chart",staticClass:"trend_chart fl",attrs:{id:"trend_chart"}}):t._e(),a("div",{staticClass:"table_full_width fl",class:{assign_w:t.show_randar}},[a("el-table",{staticClass:"userDetail scoreDetail",attrs:{data:t.gridData}},[a("el-table-column",{attrs:{prop:"username",label:t.$t("ranking.dialog.userName")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"ellipsis_txt",staticStyle:{display:"block"}},[t._v(t._s(e.row.username))])]}}],null,!1,959591589)}),a("el-table-column",{attrs:{prop:"task.title",label:t.$t("ranking.dialog.subName")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"ellipsis_txt",staticStyle:{display:"block"}},[t._v(t._s(e.row.task.title))])]}}],null,!1,3201674e3)}),a("el-table-column",{attrs:{label:t.$t("ranking.dialog.subType")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"ellipsis_txt",staticStyle:{display:"block"}},[t._v(t._s("layered"==t.the_rank_type?e.row.task.level_name:e.row.task.category_name))])]}}],null,!1,222930085)}),a("el-table-column",{attrs:{prop:"score",label:t.$t("ranking.dialog.score"),width:"85"}}),a("el-table-column",{attrs:{label:t.$t("ranking.dialog.status"),width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(1==e.row.status?t.$t("dialog_list.effective"):t.$t("dialog_list.notEffective")))])]}}],null,!1,2500380755)}),a("el-table-column",{attrs:{prop:"time",label:t.$t("ranking.dialog.subTime"),width:"160"}})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.detail.total>t.detail.pageSize,expression:"detail.total>detail.pageSize"}],attrs:{total:t.detail.total,page:t.detail.currentPage,limit:t.detail.pageSize,layout:t.detail.layout},on:{"update:page":function(e){return t.$set(t.detail,"currentPage",e)},"update:limit":function(e){return t.$set(t.detail,"pageSize",e)},pagination:t.getTableData}})],1)])])],1)],2):t._e()])},r=[],i=(a("fe59"),a("ecb4"),a("e35a"),a("f4e3"),a("08ba"),a("e793")),l=a("4d86"),o=a("30b2"),s=a("632a"),c=a("52c1"),u=a("ed08"),d=a("a336"),p=a.n(d),g=Object(c["a"])("match"),f=g.mapState,h={name:"CompetitionRank",components:{countDown:o["a"],pagination:l["a"]},props:["api","the_rank_type"],data:function(){return{is_login:localStorage.isUserLogin,show_randar:!0,not_click_row:!1,getStrNumber:u["a"],rank_timer:null,subject:{rows:[]},rows:[],gridData:[],pager:{currentPage:1,pageSize:50,total:0,layout:"prev, pager, next"},matchData:{},detail:{currentPage:1,pageSize:10,total:0,layout:"prev, pager, next"},dialogTableVisible:!1,radarData:{indicator:[],val:[]},detailQuery:{evt:this.$route.query.hash,limit:1,offset:0},userId:"",eventHash:"",show_rank:!0}},created:function(){var t=this;this.getSubType(),this.getTableData(),console.log(this.match,"matchmatch"),this.rank_timer=setInterval((function(){t.match.remain_seconds>0?t.getDetail():clearInterval(t.rank_timer)}),6e4)},beforeDestroy:function(){clearInterval(this.rank_timer)},mounted:function(){},methods:{getDetail:function(){var t=this,e="";e=-1==this.$route.path.indexOf("devops")?this.$route.query.hash:{event_id:this.$route.query.event},this.api.events(e).then((function(e){var a=e.data;t.matchData=a,t.matchData.hasOwnProperty("public_rank")&&(t.show_rank=t.matchData.hasOwnProperty("public_rank")),t.getSubType(),t.getTableData()})).catch((function(t){}))},getTableData:function(){var t=this;Object(s["k"])({order:"asc",offset:this.pager.pageSize*(this.pager.currentPage-1),limit:this.pager.pageSize,evt:this.$route.query.hash}).then((function(e){var a=e.data;t.pager.total=a.total,t.rows=a.rows})).catch((function(t){}))},getSubType:function(){var t=this;Object(s["j"])({evt:this.$route.query.hash}).then((function(e){var a=e.data;t.subject=a})).catch((function(t){}))},closeDia:function(){this.radarData={indicator:[],val:[]},this.detail.total=0,this.gridData=[]},getradar:function(t,e){var a=this;this.detailQuery.limit=this.detail.pageSize,this.detailQuery.offset=(this.detail.currentPage-1)*this.detail.pageSize,console.log(this.detailQuery),Object(s["q"])(this.detailQuery).then((function(t){var e=t.data;a.detail.total=e.total,a.gridData=e.rows})).catch((function(t){}))},initEcharts:function(){var t=this.$echarts.init(this.$refs.trend_chart),e="#3173fd",a={radar:[{indicator:this.radarData.indicator,radius:50,startAngle:10,splitNumber:3,shape:"polygon",name:{formatter:"{value}",textStyle:{color:e}},splitArea:{areaStyle:{color:[],shadowColor:"rgba(0, 0, 0, 0)",shadowBlur:10}},axisLine:{lineStyle:{color:e,opacity:.5}},splitLine:{lineStyle:{color:"rgba(255,255,255,.2)"}},axisLabel:{lineStyle:{color:p()(".radarPicture").css("border-color")}}}],calculable:!0,series:[{type:"radar",itemStyle:{emphasis:{lineStyle:{width:1}}},data:[{value:this.radarData.val,areaStyle:{normal:{color:e,opacity:.25}},label:{normal:{show:!1,formatter:function(t){return t.value}}},lineStyle:{normal:{color:e}},itemStyle:{normal:{color:e}}}]}]};t.setOption(a)},tableClick:function(t){var e=this;if(console.log(this.not_click_row),!this.not_click_row){this.userId=t.obj_id;var a=this.subject.rows[0],n={},r=function(r){n[r]={all:0,solved:0},a[r].forEach((function(a,i){1==e.matchData.integral_mode?n[r].all+=a.task.score:n[r].all+=a.dynamic_score,t[a.id]&&(n[r].solved+=t[a.id].score)})),e.radarData.indicator.push({text:r,max:100});var i=Math.round(n[r].solved/n[r].all*100);e.radarData.val.push(i)};for(var i in a)r(i);this.dialogTableVisible=!0,this.$nextTick((function(){e.show_randar&&e.initEcharts(),1==e.match.mode?e.detailQuery.user=t.obj_id:e.detailQuery.team=t.obj_id,e.getradar()}))}}},computed:Object(i["a"])({},f(["match"]))},m=h,_=(a("372f"),a("120c"),a("9ca4")),b=Object(_["a"])(m,n,r,!1,null,"61cb15d8",null);e["default"]=b.exports},8980:function(t,e,a){var n=a("d88d"),r=a("c7e6"),i=a("2732"),l=Math.ceil,o=function(t){return function(e,a,o){var s,c,u=String(i(e)),d=u.length,p=void 0===o?" ":String(o),g=n(a);return g<=d||""==p?u:(s=g-d,c=r.call(p,l(s/p.length)),c.length>s&&(c=c.slice(0,s)),t?u+c:c+u)}};t.exports={start:o(!1),end:o(!0)}},"898e":function(t,e,a){"use strict";var n=a("1c8b"),r=a("8980").start,i=a("73c3");n({target:"String",proto:!0,forced:i},{padStart:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},c7e6:function(t,e,a){"use strict";var n=a("3da3"),r=a("2732");t.exports="".repeat||function(t){var e=String(r(this)),a="",i=n(t);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(a+=e);return a}},ed08:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));a("fe59"),a("ecb4"),a("e18c"),a("84c2"),a("e35a"),a("1c2e"),a("898e"),a("5e9f"),a("0d7a"),a("08ba"),a("f7f9");var n=function(t,e,a){var n=new RegExp("[\\u4E00-\\u9FFF]+","g");return n.test(t)?t.length<=a:t.length<=e}}}]);